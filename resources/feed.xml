<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Layer5 Resources]]></title><description><![CDATA[Expect more from your infrastructure. Cloud native, open source software for your cloud native infrastructure and applications. Allowing developers to focus on business logic, not infrastructure concerns. Empowering operators to confidentally run modern infrastructure.]]></description><link>https://layer5.io</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 13 Jun 2022 06:18:03 GMT</lastBuildDate><item><title><![CDATA[Considerations of Adopting a Service Mesh]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Considerations of Adopting a Service Mesh",
  "thumbnail": "./figure1.png",
  "category": "Service Mesh",
  "tags": ["Service mesh"],
  "type": "Article",
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Learn more about service mesh fundamentals in ", mdx(Link, {
    className: "blog",
    to: "/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition",
    mdxType: "Link"
  }, "The Enterprise Path to Service Mesh Archictures (2nd Edition)"), " -  free book and excellent resource which addresses how to evaluate your organization\u2019s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.")), mdx("h2", null, "What are practical steps to adopt a service mesh in my enterprise? "), mdx("h3", null, "Piecemeal Adoption"), mdx("p", null, "Many organisations wish to take advantage of auto-instrumented observability first, taking baby steps toward a full-service mesh after achieving first success and operational comfort,\xA0to better understand what's going on across their distributed infrastructure. It's a high-value, relatively safe first step to use a service mesh for its ability to provide enhanced observability. First steps for others might be on a parallel path. For example, a financial organisation\xA0might seek improved security with strong identity (per-service certificates) and strong encryption via mutual TLS between each\xA0service. Others, on the other hand, may begin with an ingress proxy as a stepping stone to a larger service mesh deployment."), mdx("p", null, "Consider an organisation\xA0with hundreds of existing services running on virtual machines (VMs) external to the\xA0service mesh that have little to no service-to-service traffic, with practically all traffic flowing from the client to the service and back to the client. Without immediately\xA0deploying hundreds of service proxies, this organisation can deploy\xA0a service mesh ingress (e.g., Istio Ingress Gateway) to gain granular traffic control (e.g., path rewrites) and detailed service monitoring."), mdx("div", {
    className: "center"
  }, mdx("img", {
    src: Traffic,
    align: "center",
    alt: "ingress traffic control"
  }), mdx("p", null, "Figure 1: Simple service mesh deployment primarily using ingress traffic control.")), mdx("h3", null, "Practical Steps to Adoption"), mdx("p", null, "Here are two common paths:"), mdx("ul", null, mdx("li", null, "Wholesale adoption of a service mesh, commonly while designing a new application (a greenfield project)."), mdx("li", null, "Piecemeal adoption of some components and capabilities of a service mesh, but not others, commonly while working with an existing application (a brownfield project).")), mdx("p", null, "Let's take a look at how the second path manifests itself, because it's the path that most people will face (those with existing services) and the approach that most organisations take. In this method, incremental steps are taken. When teams are comfortable with their understanding\xA0of the deployment, have gained operational expertise, and derived substantial value, another step toward a full mesh is usually accomplished. Since n ot all components of a full service mesh are helpful to teams based on their focus or current pain points, not all teams choose to take another step. This will evolve over time, as full service mesh deployments become ubiquitous. More than this, application developers and service (product) owners will begin to rely on the power of a service mesh to empower and satisfy their requirements as well."), mdx("p", null, "Which applications should be constructed from the ground up or transformed using a new service mesh architecture depends on engineering maturity and skill set. You don't have to use all of the features; use\xA0the ones you need. Given that some service meshes provide a path to partial adoption, the best way may be to mitigate risk, baby-step it, and show incremental triumphs. Some service meshes can be deployed and digested in a single step. Even if this is the case, you might find that you enable only\xA0a subset of its\xA0capabilities. Presence of a service mesh\u2019s capabilities is separate from whether those capabilities are actively engaged."), mdx("p", null, "Observability is at the top of the list of reasons why most organizations deploy a service mesh initially. You usually obtain a service dependency graph in addition to metrics, logs, and traces. These graphs visually identify how much traffic is coming from one service and going to the next.\xA0\xA0 You'll feel as if you're running\xA0blind if you don't have a visible topology or service graph."), mdx("p", null, "Alternatively, it could be your current load balancer that is running blind.\xA0 Most service mesh proxies will come in handy if you're running gRPC services and have a load balancer ignorant of\xA0gRPC and treats this traffic like any other TCP traffic. Modern service proxies will support HTTP/2 and, as such, might provide a gRPC bridge from HTTP/1.1 to HTTP/2."), mdx("h3", null, "Security"), mdx("p", null, "Organizations usually prioritise security last.\xA0 They may not want strong authentication and encryption when they ultimately do look into security. Although it is best practise to secure everything using strongly authenticated and authorised services, some organisations fail to do so, resulting in soft, gooey centres in their microservices deployments. Some teams are content to secure the\xA0edge of their network, but they still want the observability and control that a service mesh can provide."), mdx("div", {
    className: "fact"
  }, mdx("p", null, "Needless to say, it is recommended that you run workloads securely, using a service mesh to provide authentication and authorization between all service requests.")), mdx("p", null, "Why aren't certain organizations interested in using Service Mesh's managed certificate authority? Because it is another\xA0thing to operate? When connections are established, encryption consumes resources (CPU cycles) and can inject\xA0a few microseconds of latency. Given this, and to aid adoption, some service meshes prominently display installation options that include a certificate authority (CA) and installation configurations that do not. Maybe you consider the \u201Cgooey center\u201D of your mesh to be secure because there is little to no ingress/egress traffic to/from the cluster and access is provided only via VPN into the cluster.\xA0Depending on workload, wallet, and sensitivity to latency, you might find that you don\u2019t want the overhead of running encryption between all of your services."), mdx("p", null, "Maybe you're just searching for authorization checks, and\xA0you're deploying monoliths rather than microservices. You don't need any further monitoring integrations because you already have API management. Perhaps you use IP addresses (subnets) for network security zones. Using identities and encryption provided by the service mesh, together with authorization checks enforced by policy you specify, a service mesh can help you get rid of network partitions and firewalling on Layer 3 (L3) boundaries. You can flatten your internal network by policy enforcing, authorization checks across your monoliths, making services broadly reachable\xA0while granularly controlling which requests are authorized. The power of service mesh to analyse and reason over details of request traffic much beyond IP addresses and ports (Layer 3/4) provides significantly more flexibility."), mdx("h3", null, "Retrofitting a Deployment"), mdx("p", null, "Recognize that, while some greenfield projects may have the luxury of starting with a service mesh, most organizations will have existing services (monoliths or otherwise) to onboard to the mesh. These services could run in VMs or bare-metal hosts instead of containers. Fear not! Some service meshes squarely address such environments and help with the modernization of such services, allowing organizations to renovate their services inventory by:"), mdx("ul", null, mdx("li", null, "Not having to rewrite their applications"), mdx("li", null, "Adapting microservices and existing services using the same infrastructure architecture"), mdx("li", null, "Facilitating adoption of new languages"), mdx("li", null, "Facilitating moving to or securely connecting with services in the cloud (or on edge)")), mdx("p", null, "For those organisations who adopt a strangler pattern of building services around a legacy monolith to expose a more developer-friendly set of APIs, service meshes make it easier to insert facade services as a way of breaking down monoliths."), mdx("p", null, "With the adoption of a service mesh, organisations can get observability (e.g., metrics, logs, and traces) as well as dependency or service graphs for all of their services (micro or not). The only change required within the service with respect to\xA0tracing is to forward certain HTTP headers. With the least amount of code change, service meshes are effective for retrofitting uniform and ubiquitous observability tracing into existing infrastructures.")));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/considerations-of-adopting-a-service-mesh</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/considerations-of-adopting-a-service-mesh</guid><enclosure url="https://layer5.io/static/1716a305b053b5c56dbf883dfd5cd5cc/figure1.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Learn more about service mesh fundamentals in &lt;a class=&quot;blog&quot; href=&quot;/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition&quot;&gt;The Enterprise Path to Service Mesh Archictures (2nd Edition)&lt;/a&gt; -  free book and excellent resource which addresses how to evaluate your organization’s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.&lt;/p&gt;&lt;/div&gt;&lt;h2&gt;What are practical steps to adopt a service mesh in my enterprise? &lt;/h2&gt;&lt;h3&gt;Piecemeal Adoption&lt;/h3&gt;&lt;p&gt;Many organisations wish to take advantage of auto-instrumented observability first, taking baby steps toward a full-service mesh after achieving first success and operational comfort, to better understand what&amp;#x27;s going on across their distributed infrastructure. It&amp;#x27;s a high-value, relatively safe first step to use a service mesh for its ability to provide enhanced observability. First steps for others might be on a parallel path. For example, a financial organisation might seek improved security with strong identity (per-service certificates) and strong encryption via mutual TLS between each service. Others, on the other hand, may begin with an ingress proxy as a stepping stone to a larger service mesh deployment.&lt;/p&gt;&lt;p&gt;Consider an organisation with hundreds of existing services running on virtual machines (VMs) external to the service mesh that have little to no service-to-service traffic, with practically all traffic flowing from the client to the service and back to the client. Without immediately deploying hundreds of service proxies, this organisation can deploy a service mesh ingress (e.g., Istio Ingress Gateway) to gain granular traffic control (e.g., path rewrites) and detailed service monitoring.&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;img src=&quot;static/figure1-0096c54e72c9eceadcfa1d55a0714c2b.png&quot; align=&quot;center&quot; alt=&quot;ingress traffic control&quot;/&gt;&lt;p&gt;Figure 1: Simple service mesh deployment primarily using ingress traffic control.&lt;/p&gt;&lt;/div&gt;&lt;h3&gt;Practical Steps to Adoption&lt;/h3&gt;&lt;p&gt;Here are two common paths:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Wholesale adoption of a service mesh, commonly while designing a new application (a greenfield project).&lt;/li&gt;&lt;li&gt;Piecemeal adoption of some components and capabilities of a service mesh, but not others, commonly while working with an existing application (a brownfield project).&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Let&amp;#x27;s take a look at how the second path manifests itself, because it&amp;#x27;s the path that most people will face (those with existing services) and the approach that most organisations take. In this method, incremental steps are taken. When teams are comfortable with their understanding of the deployment, have gained operational expertise, and derived substantial value, another step toward a full mesh is usually accomplished. Since n ot all components of a full service mesh are helpful to teams based on their focus or current pain points, not all teams choose to take another step. This will evolve over time, as full service mesh deployments become ubiquitous. More than this, application developers and service (product) owners will begin to rely on the power of a service mesh to empower and satisfy their requirements as well.&lt;/p&gt;&lt;p&gt;Which applications should be constructed from the ground up or transformed using a new service mesh architecture depends on engineering maturity and skill set. You don&amp;#x27;t have to use all of the features; use the ones you need. Given that some service meshes provide a path to partial adoption, the best way may be to mitigate risk, baby-step it, and show incremental triumphs. Some service meshes can be deployed and digested in a single step. Even if this is the case, you might find that you enable only a subset of its capabilities. Presence of a service mesh’s capabilities is separate from whether those capabilities are actively engaged.&lt;/p&gt;&lt;p&gt;Observability is at the top of the list of reasons why most organizations deploy a service mesh initially. You usually obtain a service dependency graph in addition to metrics, logs, and traces. These graphs visually identify how much traffic is coming from one service and going to the next.   You&amp;#x27;ll feel as if you&amp;#x27;re running blind if you don&amp;#x27;t have a visible topology or service graph.&lt;/p&gt;&lt;p&gt;Alternatively, it could be your current load balancer that is running blind.  Most service mesh proxies will come in handy if you&amp;#x27;re running gRPC services and have a load balancer ignorant of gRPC and treats this traffic like any other TCP traffic. Modern service proxies will support HTTP/2 and, as such, might provide a gRPC bridge from HTTP/1.1 to HTTP/2.&lt;/p&gt;&lt;h3&gt;Security&lt;/h3&gt;&lt;p&gt;Organizations usually prioritise security last.  They may not want strong authentication and encryption when they ultimately do look into security. Although it is best practise to secure everything using strongly authenticated and authorised services, some organisations fail to do so, resulting in soft, gooey centres in their microservices deployments. Some teams are content to secure the edge of their network, but they still want the observability and control that a service mesh can provide.&lt;/p&gt;&lt;div class=&quot;fact&quot;&gt;&lt;p&gt;Needless to say, it is recommended that you run workloads securely, using a service mesh to provide authentication and authorization between all service requests.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Why aren&amp;#x27;t certain organizations interested in using Service Mesh&amp;#x27;s managed certificate authority? Because it is another thing to operate? When connections are established, encryption consumes resources (CPU cycles) and can inject a few microseconds of latency. Given this, and to aid adoption, some service meshes prominently display installation options that include a certificate authority (CA) and installation configurations that do not. Maybe you consider the “gooey center” of your mesh to be secure because there is little to no ingress/egress traffic to/from the cluster and access is provided only via VPN into the cluster. Depending on workload, wallet, and sensitivity to latency, you might find that you don’t want the overhead of running encryption between all of your services.&lt;/p&gt;&lt;p&gt;Maybe you&amp;#x27;re just searching for authorization checks, and you&amp;#x27;re deploying monoliths rather than microservices. You don&amp;#x27;t need any further monitoring integrations because you already have API management. Perhaps you use IP addresses (subnets) for network security zones. Using identities and encryption provided by the service mesh, together with authorization checks enforced by policy you specify, a service mesh can help you get rid of network partitions and firewalling on Layer 3 (L3) boundaries. You can flatten your internal network by policy enforcing, authorization checks across your monoliths, making services broadly reachable while granularly controlling which requests are authorized. The power of service mesh to analyse and reason over details of request traffic much beyond IP addresses and ports (Layer 3/4) provides significantly more flexibility.&lt;/p&gt;&lt;h3&gt;Retrofitting a Deployment&lt;/h3&gt;&lt;p&gt;Recognize that, while some greenfield projects may have the luxury of starting with a service mesh, most organizations will have existing services (monoliths or otherwise) to onboard to the mesh. These services could run in VMs or bare-metal hosts instead of containers. Fear not! Some service meshes squarely address such environments and help with the modernization of such services, allowing organizations to renovate their services inventory by:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Not having to rewrite their applications&lt;/li&gt;&lt;li&gt;Adapting microservices and existing services using the same infrastructure architecture&lt;/li&gt;&lt;li&gt;Facilitating adoption of new languages&lt;/li&gt;&lt;li&gt;Facilitating moving to or securely connecting with services in the cloud (or on edge)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;For those organisations who adopt a strangler pattern of building services around a legacy monolith to expose a more developer-friendly set of APIs, service meshes make it easier to insert facade services as a way of breaking down monoliths.&lt;/p&gt;&lt;p&gt;With the adoption of a service mesh, organisations can get observability (e.g., metrics, logs, and traces) as well as dependency or service graphs for all of their services (micro or not). The only change required within the service with respect to tracing is to forward certain HTTP headers. With the least amount of code change, service meshes are effective for retrofitting uniform and ubiquitous observability tracing into existing infrastructures.&lt;/p&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Analyzing Service Mesh Performance]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Analyzing Service Mesh Performance",
  "thumbnail": "./smp-light-text_2.png",
  "type": "Article",
  "category": "Service Mesh Performance",
  "product": "Service Mesh Performance",
  "tags": ["Service Mesh Performance", "GetNighthawk"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Learn more about Service Mesh Performance from this article", mdx("a", {
    className: "blog",
    href: "https://www.nxtbook.com/nxtbooks/ieee/bridge_issue3_2021/index.php#/p/16"
  }, " Analyzing Service Mesh Performance"), " - Published in issue 3 of IEEE Bridge October 2021")), mdx("div", {
    className: "right"
  }, mdx("img", {
    src: cover,
    align: "center",
    alt: "IEEE The Bridge 2021 Issue 3 cover"
  })), mdx("p", null, "As a forthcoming, ubiquitous layer of cloud native infrastructure, service meshes offer deep and uniform control and visibility into the topology and state of ephemeral microservices. Managing the myriad configurations of cloud native infrastructure is greatly facilitated by a service mesh, but succinctly summarizing and characterizing the performance of your service mesh in context of your unique workloads and your infrastructure of choice is a challenge unto its own."), mdx("p", null, "We explore how to model your service mesh topology and optimize for your ideal configuration in context of how much you value properties of resiliency, performance, throughput, latency, and so on before you deploy to production. Readers will understand how distributed performance analysis offers unique insights on the behavior of microservices and their efficiency of operation, see examples of how common types of workloads perform under specific service mesh functions, and be empowered with analytical tooling that can be used to make optimized configurations."), mdx("p", null, "We provide core, memory and I/O combinations based on workload needs with insights into workload analysis which can influence the efficiency of the service mesh and overall performance of the cluster."), mdx("h2", null, "Characterizing the Complexity of Combinatorial Analysis"), mdx("p", null, "Consider that the more value you try to derive from your service mesh, the more work that you will ask it to do. Said another way, that as someone reflects more deeply on the architecture of a service mesh - with its distributed proxies - and the functionality it offers, they will eventually wonder, \"What overhead is running my service mesh incurring?\". This is one of the most common questions engineers have as they initially learn of a service mesh and the value a deployment of one offers. This is not an easy question to answer as the permutations of configuration between your infrastructure, service mesh, and applications are innumerable and any change to one of them affects their collective performance."), mdx("p", null, "How would you describe the performance of your service mesh and that of your clusters and their workloads? Are you imagining a wall of line charts with metrics capturing golden signals? The act of articulating the performance of your service mesh can take anywhere from a minute to even a few hours to characterize the state of your systems and the overhead incurred by your infrastructure and what this means to your users."), mdx("p", null, "Moreover, anytime performance is characterized, analysis is subjective to the specific workload, infrastructure, and instruments used for measurement. Given the variety of this measurement challenge, most service meshes and their data plane proxies (if a third-party component), do not have the tooling necessary or refuse to publish performance data because such tests can be:", mdx("ol", null, mdx("li", null, "arduous to create and sustain a capable harness"), mdx("li", null, "a point-in-time consideration (none of the elements under measurement are static"), mdx("li", null, "misinterpreted"))), mdx("p", null, "Read on as we identify how to surmount each of these challenges."), mdx("h2", null, "Service Mesh Performance Considerations"), mdx("p", null, "As the software defined networking layer of microservices, service mesh encompasses multiple aspects of critical functions of the applications, such as circuit breaking, health checks, and packet operations. Analyzing the permutations of these configurations is an impossible task without a suitable test harness. A service mesh management plane can be such a tool. As the multi-mesh manager, ", mdx("a", {
    href: "https://meshery.io"
  }, "Meshery "), "is capable of provisioning 10 different service meshes, workloads atop the meshes, generating load using ", mdx("a", {
    href: "https://getnighthawk.dev"
  }, "Nighthawk"), ", and analyzing that load. No other tool capable of performing these tasks end-to-end exists. Meshery is a Cloud Native Computing Foundation project originally created by Layer5."), mdx("h3", null, "How are you measuring?"), mdx("p", null, "Consider the simple set of steps to execute performance tests in a simple Kubernetes-based cluster:"), mdx("ol", null, mdx("li", null, "Setup your cluster, service mesh, and application under test."), mdx("li", null, "Pick a benchmarking tool that can measure Layer 4 or Layer 7 performance."), mdx("li", null, "Configure your test setup for performance, doing so in context of other constraints that you might need to uphold (e.g. resiliency characteristics of your service deployment)."), mdx("li", null, "Choose the protocol of interest: HTTP, HTTPS, HTTP1/2, gRPC, NATS"), mdx("li", null, "Identify KPIs of interest - Transactions per second (TPS) or percentile latencies, etc."), mdx("li", null, "Decide on the test duration: 60s or 5 minutes or 1 hour..."), mdx("li", null, "Choose the number of requests per second (RPS)."), mdx("li", null, "Execute the test."), mdx("li", null, "Mark down requests per second, latencies, throughput, and any other output provided by benchmarking tools.")), mdx("h3", null, "What are you measuring?"), mdx("p", null, "Performance of a service mesh can be described across multiple dimensions covering some or all of these core functionalities of a service mesh. So, which dimensions are the linchpins of performance? Which metrics are key indicators of performance? Outside of the different types of performance tests, performance management concerns include the need for performance and overhead data under a permutation of different workloads (applications) and different types and sizes of infrastructure resources."), mdx("div", {
    className: "center"
  }, mdx("a", {
    href: EWtraffic
  }, mdx("img", {
    src: EWtraffic,
    align: "center",
    alt: "EWtraffic"
  }))), mdx("p", null, "Hence, it is crucial to understand what is being measured in a service mesh based deployment. Certain critical considerations are missing from the simple methodology previously described. For example, as indicated in Figure 1, but not limited to:"), mdx("ol", null, mdx("li", null, "Traffic considerations", mdx("ul", null, mdx("li", null, "East-West traffic", mdx("ol", null, mdx("li", null, "between two pods within the same or two different Virtual Machines (VM)."), mdx("li", null, "between two pods within the same or two different bare metal nodes."), mdx("li", null, "combination of above with choice of user-space or kernel-space networking stack on the host node."))), mdx("li", null, "North-South traffic", mdx("ol", null, mdx("li", null, "Throughput and latency of traffic flowing in and out of a single VM or across a single bare metal node."))))), mdx("li", null, "Deployment considerations", mdx("ul", null, mdx("li", null, "Number of hops between traffic source and traffic destination with load balancers, API gateways, ingress controllers, security components such as firewall, deep packet inspectors, and so on."), mdx("li", null, "Operating system settings."), mdx("li", null, "Hardware settings such as BIOS options, power management features, NUMA awareness, platform resource management, hardware accelerators, and so on."))), mdx("li", null, "Load generators types", mdx("ul", null, mdx("li", null, "hardware or software based, L2-3,  L4-7, open or closed loop"))), mdx("li", null, "Service mesh types - the service mesh landscape has over 20 meshes listed. Each share a common architecture, however, their implementation differs and consequently, so does their performance.", mdx("ul", null, mdx("li", null, "Control plane - often a point of contention the larger the service mesh deployment is."), mdx("li", null, "Data plane - not only proxies, but filters loaded in those proxies."))), mdx("li", null, "Service mesh configuration and number of services on the mesh. To name a few considerations:", mdx("ul", null, mdx("li", null, "Telemetry", mdx("ol", null, mdx("li", null, "Including the three pillars of observability are traces, logs, and metrics."), mdx("li", null, "The number of, cardinality of, sampling rate, ingest rate\u2026 all bear weight (and bear load on the system)."))), mdx("li", null, "Policy", mdx("ol", null, mdx("li", null, "Authentication, Authorization - frequency of checks, cache hits vs. cache misses."))), mdx("li", null, "Security", mdx("ol", null, mdx("li", null, "Encryption - overhead of handshaking and mutually authenticated TLS.")))))), mdx("p", null, "Ultimately, the goal of any performance tests is to ensure repeatable measurements and obtain consistent results across multiple test runs."), mdx("h2", null, "Service Mesh Performance as a Specification"), mdx("p", null, "The need for cross-project, apple-to-apple comparisons are also desired in order to facilitate a comparison of behavioral differences between service meshes and which one might be best-suited for specific workloads. Individual service mesh projects shy from publishing test results of other, competing service mesh projects. The need for an independent, unbiased, credible, standard measurement is one of the catalysts for the creation of Service Mesh Performance (SMP)."), mdx("p", null, "Amidst performance concerns and the need to measure and manage performance arose the Service Mesh Performance (SMP) standard. Service Mesh Performance as a specification and disseminating insights and research results. Your authors are working toward the definition of MeshMark, a universal performance index to gauge your mesh\u2019s efficiency against deployments in other organizations\u2019 environments."), mdx("p", null, "Many performance benchmarks are limited to single instance load generation (single pod load generator). This limits the amount of traffic that can be generated to the output of the single machine that the benchmark tool runs on in or out of a cluster. Overcoming this limitation would allow for more flexible and robust testing. Distributed load testing in parallel poses a challenge when merging results without losing the precision we need to gain insight into the high tail percentiles. Distributed load testing offers insight into system behaviours that arguably more accurately represent real-world behaviours of services under load as that load comes from any number of sources."), mdx("p", null, "The specification itself provides a standard format for describing and capturing:"), mdx("ul", null, mdx("li", null, "performance test configuration"), mdx("li", null, "Pick a benchmarking tool that can measure Layer 4 or Layer 7 performance."), mdx("li", null, "service mesh configuration"), mdx("li", null, "environment configuration"), mdx("li", null, "workload configuration"), mdx("li", null, "performance test results"), mdx("li", null, "Distributed performance modeling"), mdx("li", null, "KPIs for service mesh performance"), mdx("li", null, "Test tool requirements")), mdx("p", null, "Value from a service mesh is best derived when it's tuned to scale as per the deployment requirements. Given the complexity of deploying, testing and measuring performance aspects across multiple dimensions, the specification aims to provide a simple starting point for anyone looking to understand and derive service mesh performance. The service mesh performance standard aims to articulate these complexities in a methodical and automated manner in order for anyone to plan the performance scenarios of their deployment and execute relevant tests."), mdx("p", null, "The code snippet provides insight on the fact that the specification defines a common collection of statistical analysis to be calculated for every performance test."), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "message PerformanceTestResult {\n  message Latency {\n    double min = 1;\n    double average = 2;\n    double p50 = 3;\n    double p90 = 4;\n    double p99 = 5;\n    double max = 6;\n  }\n}\n")), mdx("p", null, mdx("i", null, "Snippet of the Service Mesh Performance specification describing how to capture statistical analysis of test results.")), mdx("h2", null, "Defining Deployments"), mdx("p", null, "Virtualized deployments involve deploying microservice orchestration and service mesh stack in virtual machines (VMs). Although bare metal usage has performance benefits, customers often use VMs to provide hardware-level isolation between various applications. This deployment involves two VMs across two nodes, with one acting as a Kubernetes master with the other a worker node. Customers deploy VMs on a single NUMA node to avoid cross UPI traffic. Results in virtualized testing have shown that depending on pinning of QEMU threads to a set of isolated cores - either sequentially or clustering the threads together to all the cores - tail latencies are heavily impacted."), mdx("p", null, "Microservice deployments could use a wide variety of deployment scenarios. The following list provides a sample set of how a service mesh performance could be analyzed either on a same node or in a multi-node cluster:"), mdx("ul", null, mdx("li", null, "Pod to pod communication."), mdx("li", null, "Pod to service communication."), mdx("li", null, "Ingress controller to pod and vice-versa."), mdx("li", null, "Load balancer to pod and vice-versa."), mdx("li", null, "Pod to Egress Gateway."), mdx("li", null, "Mutual TLS termination across any of the above endpoints."), mdx("li", null, "Different security rules and policies."), mdx("li", null, "Communication protocol.")), mdx("p", null, "These considerations are illustrated in a typical workload deployment as shown in ", mdx("i", null, "Figure 3.")), mdx("div", {
    className: "center"
  }, mdx("a", {
    href: Workload
  }, mdx("img", {
    src: Workload,
    align: "center",
    alt: "Workload"
  }))), mdx("p", null, "Here is an example of deployment with Kubernetes as the orchestrator using Calico CNI and deployed in VMs, while the host infrastructure has OVS-DPDK for switching, which can be extended for VMs to leverage SR-IOV. To understand impact of infrastructure elements and networking elements of microservice software stack, performance impact of a service mesh and its set of data plane proxies with fortio as load generator could be understood by running the Meshery in two different environments outside the Kubernetes cluster."), mdx("ol", null, mdx("li", null, "First one with load generator running as a process outside of Kubernetes cluster in master-vm"), mdx("li", null, "Second one with load generator running as a bare metal process on master-host")), mdx("h3", null, "Automating Performance Measurements"), mdx("p", null, "Meshery is ideal tooling in that it provides lifecycle management of a large number of service meshes and sample applications which need to be provisioned, configured, and deprovisioned in the process of analyzing service mesh performance. Meshery is capable of generating load, baselining, and comparing performance results. The canonical implementation of this specification is implemented in Meshery."), mdx("div", {
    className: "center"
  }, mdx("a", {
    href: Archictures
  }, mdx("img", {
    src: Archictures,
    align: "center",
    alt: "Archictures-client"
  }))), mdx("p", null, mdx("i", null, "Figure 4 - Meshery\u2019s load generators can be deployed in the same cluster under test or outside of the cluster under test.")), mdx("h4", null, "Pipelining performance characterization"), mdx("p", null, "Acknowledging the living nature of user deployments, integration of automated performance testing into continuous integration systems helps users deploy new versions of their applications or new configurations of their infrastructure (including service mesh configuration) with the assurity  afforded through the act of dry-running the service mesh and application configuration before production deployment. The Meshery and Service Mesh Performance GitHub Action offers the ability to adaptively analyze application performance as a gate in your continuous delivery pipeline. In this way, the Service Mesh Performance specification facilitates a measurement index that can be referenced when rolling out new versions of a service with this advanced canary technique."), mdx("p", null, "Through Meshery, techniques to mirror non-idempotent requests without fear of impacting the current version of your application allowing replay of user requests. And use of intelligent network functions, embedded in WebAssembly (WASM) programs, to facilitate real user request reenactments to help you extract the most value out of your pipeline."), mdx("ul", null, mdx("li", null, "Repeatability of test scenarios using performance profiles and cloud native orchestration."), mdx("li", null, "Baselining and comparing results.")), mdx("h3", null, "Analyzing Performance Measurements"), mdx("p", null, "We have often seen inefficiencies in the ratio of resource usage vs resources applied. Since the mesh elements i.e. the ingress and sidecars share resources with one or more of the application containers, there may be more resources left to be utilized. Tail latencies decrease with the increase in number of cores for all 1, 10 and 100 clones but increase with the increase in the number of connections. Data for various connection counts, as shown, indicates that performance degradation with Istio shows up with input RPS more than 1000. In a top down microarchitectural analysis (TMA), when the front proxy is pinned to a single core and the sidecar + flask app is pinned to another core and the number of microservices are scaled up. It is observed that (Figure 2):"), mdx("ul", null, mdx("li", null, "Frontend Bound% decreases with increase in number of microservices\u200B and Core Bound % increases."), mdx("li", null, "Memory Bound % increases with increase in the number of microservices\u200B."), mdx("li", null, "L1 and L3 Bound% decreases for both the service cores on which the front \u2013proxy is running as well as the core where the sidecar+flask app is running with number of microservices.")), mdx("p", null, "In customer environments, the size of the cluster as well as the amount of incoming traffic will have an impact on the number of workloads and Envoy microservices. The underlying hardware and L4 networking on each node in the cluster will also impact the performance observed. A call stack and cycles spent analysis of a deployment with 1-20 sidecars on a specific 40 core system with a 10G NIC shows bottlenecks spread between:"), mdx("ol", null, mdx("li", null, "Envoy:TheadLocalStorage-Hashset-Match"), mdx("li", null, "Linux kernel bottleneck spread between", mdx("ol", null, mdx("li", null, "Libpthreadscheduling"), mdx("li", null, "Libevent"))), mdx("li", null, "Envoy buffer slice management and TCP filter, if message sizes or file transfer sizes increase to 1M"), mdx("li", null, "Crypto operations when TLS is enabled.")), mdx("p", null, "Our initial studies show that the optimal service mesh setup for the tolerable latencies and the best RPS may include:"), mdx("ol", null, mdx("li", null, "Exclusive  threads allocated to Envoy processing"), mdx("li", null, "Reduced memory contention by allocating more memory bandwidth which can be controlled dynamically"), mdx("li", null, "Load balancing of worker threads among the among cores which may require"), mdx("li", null, "Less IO switching"), mdx("li", null, "Optimized memory copies with signals incorporated in addition to events (libevent)")), mdx("h4", null, "Accelerations and Offloads"), mdx("p", null, "A number of accelerations and offloads to SMART NIC or other processing elements like IPUs and DPUs are becoming available. How does the service mesh efficiency and performance benefitted from these deployment options needs to be defined and measured. Cycles and cores saved in the host cores vs offload cores which may be of different architectures and/or performance range needs to be quantified and benchmarks and indices created to measure."), mdx("h3", null, "Being Precise in Performance Studies"), mdx("p", null, "When measuring sub-millisecond response times, the noise floor of the environment as well as the sensitivity of the tooling may become dominant factors in measurements. Noisy neighbours, scheduler fairness, garbage collection, and even specifics in the timing of requests being sent as well as connection-reuse patterns may change noise floors such that similar measurements performed using different systems and tools may diverge an order of magnitude in absolute terms."), mdx("p", null, "As a quick survey of load generators by way of those included in Meshery, we find upon close inspection their differences are noteworthy and justify their use under different circumstances."), mdx("p", null, "Written in C, wrk2 supports ignoring coordinated omission. wrk2 lets you test a little more complex scenarios. Users express load generation profiles in terms of RPS. wrk2 shows you what you normally may not see in benchmark results, but what every 1,000th user might see. To see these outliers, you need to run the longer (time) performance tests.  Wrk2 tests the scenario where there's a string of services comprising microservices. wrk2 requires you to specify the desired RPS, while wrk does not. Wrk2 is focused on driving the maximum RPS. Meshery\u2019s fork of wrk2 enables testing of multiple endpoints and enables the variable rate of load generation. In the future, Meshery will offer the ability to assign a weight to each endpoint for the load to be generated by wrk2."), mdx("p", null, "Written in Golang, fortio is extremely fast and usable for testing basic response times on a per request level. Fortio produces results in JSON on a per request basis and easy to integrate into other Golang-based tooling like Meshery."), mdx("p", null, "Written in C++, Nighthawk supports both open- and closed- loop testing, and was designed to offer the right sensitivity for benchmarking microservice proxies (sub millisecond latencies). Using an open loop test methodology avoids coordinated omission, and in conjunction with its adaptive load controller one can seek answers to questions like \u201Cwhat RPS can my mesh reliably sustain under set latency?\u201D."), mdx("h4", null, "Comparing Types of Data Plane Filtering"), mdx("p", null, "Important to note is the power of the service mesh data plane and cost of that power. Envoy is a popular proxy of choice for service mesh data planes. Among other features, Envoy provides the ability to integrate custom traffic filters via one of two methods:"), mdx("ol", null, mdx("li", null, "Natively by incorporating your custom traffic filter into Envoy\u2019s C++ source code and compiling a new Envoy version. The drawback being that you need to maintain your own version of Envoy, while the benefit being that of your custom filter running at native speed."), mdx("li", null, "Via WASM by incorporating your custom filter as a WebAssembly binary writing in C++, Rust, AssemblyScript or Go. The drawback being that WASM-based filters incur some overhead, while the benefit being that you can dynamically load and reload WASM-based filters in Envoy at runtime.")), mdx("p", null, "Whether to  integrate your traffic filters natively or as an extension, a tradeoff between the two deployment exists primarily in exchanging between service mesh speed and service mesh flexibility as shown in ", mdx("i", null, "Figure 4.")), mdx("div", {
    className: "center"
  }, mdx("a", {
    href: NetworkFunction
  }, mdx("img", {
    src: NetworkFunction,
    align: "center",
    alt: "comparison of Network functions"
  }))), mdx("p", null, mdx("i", null, "Figure 5 - A comparison of different modes of delivery of service mesh network functions.")), mdx("p", null, "As an assessment of this tradeoff, an analysis of a series of three tests run across the same rate limit network function implemented as 1) a Golang-based client library, or 2) a Rust-based Envoy filter running in a WebAssembly virtual machine  (or 3) a native Envoy filter) provides some insight as to the comparative overhead involved."), mdx("ol", null, mdx("li", null, "Rate limiting with Go client library", mdx("ul", null, mdx("li", null, "At 100 RPS the p50 is 3.19ms."), mdx("li", null, "At 500 RPS the p50 is 2.44ms."), mdx("li", null, "With unlimited RPS (4,417) the p50 is 0.066ms."))), mdx("li", null, "Rate limiting with WASM module (Rust filter)", mdx("ul", null, mdx("li", null, "At 100 RPS the p50 is 2.1ms"), mdx("li", null, "At 500 RPS the p50 is 2.22ms"), mdx("li", null, "With unlimited RPS (5,781) the p50 is 0.62ms")))), mdx("p", null, "Users not only need to account for the (relatively) easy to quantify system overhead and the operational overhead involved in expanding development resources to implement bespoke tooling versus managing off-the-shelf filters."), mdx("h3", null, "Summary"), mdx("p", null, "To deploy a service mesh effectively, we need to"), mdx("ol", null, mdx("li", null, "quantify application workload characteristics and how it utilizes a particular microarchitecture."), mdx("li", null, "assess how Container Network Interface (CNI) drivers, Open Virtual Switch (OVS), rules processing, match and lookup requirements between Network Address Translated (NAT) and routed networks are required"), mdx("li", null, " different layers of service mesh to be deployed including layer 4 load balancers, ingress and reverse proxy, number of sidecars and number of microservices to be supported"), mdx("li", null, "and what hardware baseline performance does the setup have and "), mdx("li", null, " a quantifiable measure of service mesh deployed with performance measures mapped to KPIs like throughput (RPS) and latency."))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh-performance/analyzing-service-mesh-performance</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh-performance/analyzing-service-mesh-performance</guid><enclosure url="https://layer5.io/static/76fd2590061b4fc01a710ba21d61b901/smp-light-text_2.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Learn more about Service Mesh Performance from this article&lt;a class=&quot;blog&quot; href=&quot;https://www.nxtbook.com/nxtbooks/ieee/bridge_issue3_2021/index.php#/p/16&quot;&gt; Analyzing Service Mesh Performance&lt;/a&gt; - Published in issue 3 of IEEE Bridge October 2021&lt;/p&gt;&lt;/div&gt;&lt;div class=&quot;right&quot;&gt;&lt;img src=&quot;static/ieee_bridge_issue3_2021-8c3419112f1cce7d7d1955ee37b55a70.jpg&quot; align=&quot;center&quot; alt=&quot;IEEE The Bridge 2021 Issue 3 cover&quot;/&gt;&lt;/div&gt;&lt;p&gt;As a forthcoming, ubiquitous layer of cloud native infrastructure, service meshes offer deep and uniform control and visibility into the topology and state of ephemeral microservices. Managing the myriad configurations of cloud native infrastructure is greatly facilitated by a service mesh, but succinctly summarizing and characterizing the performance of your service mesh in context of your unique workloads and your infrastructure of choice is a challenge unto its own.&lt;/p&gt;&lt;p&gt;We explore how to model your service mesh topology and optimize for your ideal configuration in context of how much you value properties of resiliency, performance, throughput, latency, and so on before you deploy to production. Readers will understand how distributed performance analysis offers unique insights on the behavior of microservices and their efficiency of operation, see examples of how common types of workloads perform under specific service mesh functions, and be empowered with analytical tooling that can be used to make optimized configurations.&lt;/p&gt;&lt;p&gt;We provide core, memory and I/O combinations based on workload needs with insights into workload analysis which can influence the efficiency of the service mesh and overall performance of the cluster.&lt;/p&gt;&lt;h2&gt;Characterizing the Complexity of Combinatorial Analysis&lt;/h2&gt;&lt;p&gt;Consider that the more value you try to derive from your service mesh, the more work that you will ask it to do. Said another way, that as someone reflects more deeply on the architecture of a service mesh - with its distributed proxies - and the functionality it offers, they will eventually wonder, &amp;quot;What overhead is running my service mesh incurring?&amp;quot;. This is one of the most common questions engineers have as they initially learn of a service mesh and the value a deployment of one offers. This is not an easy question to answer as the permutations of configuration between your infrastructure, service mesh, and applications are innumerable and any change to one of them affects their collective performance.&lt;/p&gt;&lt;p&gt;How would you describe the performance of your service mesh and that of your clusters and their workloads? Are you imagining a wall of line charts with metrics capturing golden signals? The act of articulating the performance of your service mesh can take anywhere from a minute to even a few hours to characterize the state of your systems and the overhead incurred by your infrastructure and what this means to your users.&lt;/p&gt;&lt;p&gt;Moreover, anytime performance is characterized, analysis is subjective to the specific workload, infrastructure, and instruments used for measurement. Given the variety of this measurement challenge, most service meshes and their data plane proxies (if a third-party component), do not have the tooling necessary or refuse to publish performance data because such tests can be:&lt;ol&gt;&lt;li&gt;arduous to create and sustain a capable harness&lt;/li&gt;&lt;li&gt;a point-in-time consideration (none of the elements under measurement are static&lt;/li&gt;&lt;li&gt;misinterpreted&lt;/li&gt;&lt;/ol&gt;&lt;/p&gt;&lt;p&gt;Read on as we identify how to surmount each of these challenges.&lt;/p&gt;&lt;h2&gt;Service Mesh Performance Considerations&lt;/h2&gt;&lt;p&gt;As the software defined networking layer of microservices, service mesh encompasses multiple aspects of critical functions of the applications, such as circuit breaking, health checks, and packet operations. Analyzing the permutations of these configurations is an impossible task without a suitable test harness. A service mesh management plane can be such a tool. As the multi-mesh manager, &lt;a href=&quot;https://meshery.io&quot;&gt;Meshery &lt;/a&gt;is capable of provisioning 10 different service meshes, workloads atop the meshes, generating load using &lt;a href=&quot;https://getnighthawk.dev&quot;&gt;Nighthawk&lt;/a&gt;, and analyzing that load. No other tool capable of performing these tasks end-to-end exists. Meshery is a Cloud Native Computing Foundation project originally created by Layer5.&lt;/p&gt;&lt;h3&gt;How are you measuring?&lt;/h3&gt;&lt;p&gt;Consider the simple set of steps to execute performance tests in a simple Kubernetes-based cluster:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Setup your cluster, service mesh, and application under test.&lt;/li&gt;&lt;li&gt;Pick a benchmarking tool that can measure Layer 4 or Layer 7 performance.&lt;/li&gt;&lt;li&gt;Configure your test setup for performance, doing so in context of other constraints that you might need to uphold (e.g. resiliency characteristics of your service deployment).&lt;/li&gt;&lt;li&gt;Choose the protocol of interest: HTTP, HTTPS, HTTP1/2, gRPC, NATS&lt;/li&gt;&lt;li&gt;Identify KPIs of interest - Transactions per second (TPS) or percentile latencies, etc.&lt;/li&gt;&lt;li&gt;Decide on the test duration: 60s or 5 minutes or 1 hour...&lt;/li&gt;&lt;li&gt;Choose the number of requests per second (RPS).&lt;/li&gt;&lt;li&gt;Execute the test.&lt;/li&gt;&lt;li&gt;Mark down requests per second, latencies, throughput, and any other output provided by benchmarking tools.&lt;/li&gt;&lt;/ol&gt;&lt;h3&gt;What are you measuring?&lt;/h3&gt;&lt;p&gt;Performance of a service mesh can be described across multiple dimensions covering some or all of these core functionalities of a service mesh. So, which dimensions are the linchpins of performance? Which metrics are key indicators of performance? Outside of the different types of performance tests, performance management concerns include the need for performance and overhead data under a permutation of different workloads (applications) and different types and sizes of infrastructure resources.&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;a href=&quot;static/figure-1-2e917eeefb309ad5b67cdb79d82d5faf.png&quot;&gt;&lt;img src=&quot;static/figure-1-2e917eeefb309ad5b67cdb79d82d5faf.png&quot; align=&quot;center&quot; alt=&quot;EWtraffic&quot;/&gt;&lt;/a&gt;&lt;/div&gt;&lt;p&gt;Hence, it is crucial to understand what is being measured in a service mesh based deployment. Certain critical considerations are missing from the simple methodology previously described. For example, as indicated in Figure 1, but not limited to:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Traffic considerations&lt;ul&gt;&lt;li&gt;East-West traffic&lt;ol&gt;&lt;li&gt;between two pods within the same or two different Virtual Machines (VM).&lt;/li&gt;&lt;li&gt;between two pods within the same or two different bare metal nodes.&lt;/li&gt;&lt;li&gt;combination of above with choice of user-space or kernel-space networking stack on the host node.&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li&gt;North-South traffic&lt;ol&gt;&lt;li&gt;Throughput and latency of traffic flowing in and out of a single VM or across a single bare metal node.&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Deployment considerations&lt;ul&gt;&lt;li&gt;Number of hops between traffic source and traffic destination with load balancers, API gateways, ingress controllers, security components such as firewall, deep packet inspectors, and so on.&lt;/li&gt;&lt;li&gt;Operating system settings.&lt;/li&gt;&lt;li&gt;Hardware settings such as BIOS options, power management features, NUMA awareness, platform resource management, hardware accelerators, and so on.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Load generators types&lt;ul&gt;&lt;li&gt;hardware or software based, L2-3,  L4-7, open or closed loop&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Service mesh types - the service mesh landscape has over 20 meshes listed. Each share a common architecture, however, their implementation differs and consequently, so does their performance.&lt;ul&gt;&lt;li&gt;Control plane - often a point of contention the larger the service mesh deployment is.&lt;/li&gt;&lt;li&gt;Data plane - not only proxies, but filters loaded in those proxies.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Service mesh configuration and number of services on the mesh. To name a few considerations:&lt;ul&gt;&lt;li&gt;Telemetry&lt;ol&gt;&lt;li&gt;Including the three pillars of observability are traces, logs, and metrics.&lt;/li&gt;&lt;li&gt;The number of, cardinality of, sampling rate, ingest rate… all bear weight (and bear load on the system).&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li&gt;Policy&lt;ol&gt;&lt;li&gt;Authentication, Authorization - frequency of checks, cache hits vs. cache misses.&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li&gt;Security&lt;ol&gt;&lt;li&gt;Encryption - overhead of handshaking and mutually authenticated TLS.&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Ultimately, the goal of any performance tests is to ensure repeatable measurements and obtain consistent results across multiple test runs.&lt;/p&gt;&lt;h2&gt;Service Mesh Performance as a Specification&lt;/h2&gt;&lt;p&gt;The need for cross-project, apple-to-apple comparisons are also desired in order to facilitate a comparison of behavioral differences between service meshes and which one might be best-suited for specific workloads. Individual service mesh projects shy from publishing test results of other, competing service mesh projects. The need for an independent, unbiased, credible, standard measurement is one of the catalysts for the creation of Service Mesh Performance (SMP).&lt;/p&gt;&lt;p&gt;Amidst performance concerns and the need to measure and manage performance arose the Service Mesh Performance (SMP) standard. Service Mesh Performance as a specification and disseminating insights and research results. Your authors are working toward the definition of MeshMark, a universal performance index to gauge your mesh’s efficiency against deployments in other organizations’ environments.&lt;/p&gt;&lt;p&gt;Many performance benchmarks are limited to single instance load generation (single pod load generator). This limits the amount of traffic that can be generated to the output of the single machine that the benchmark tool runs on in or out of a cluster. Overcoming this limitation would allow for more flexible and robust testing. Distributed load testing in parallel poses a challenge when merging results without losing the precision we need to gain insight into the high tail percentiles. Distributed load testing offers insight into system behaviours that arguably more accurately represent real-world behaviours of services under load as that load comes from any number of sources.&lt;/p&gt;&lt;p&gt;The specification itself provides a standard format for describing and capturing:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;performance test configuration&lt;/li&gt;&lt;li&gt;Pick a benchmarking tool that can measure Layer 4 or Layer 7 performance.&lt;/li&gt;&lt;li&gt;service mesh configuration&lt;/li&gt;&lt;li&gt;environment configuration&lt;/li&gt;&lt;li&gt;workload configuration&lt;/li&gt;&lt;li&gt;performance test results&lt;/li&gt;&lt;li&gt;Distributed performance modeling&lt;/li&gt;&lt;li&gt;KPIs for service mesh performance&lt;/li&gt;&lt;li&gt;Test tool requirements&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Value from a service mesh is best derived when it&amp;#x27;s tuned to scale as per the deployment requirements. Given the complexity of deploying, testing and measuring performance aspects across multiple dimensions, the specification aims to provide a simple starting point for anyone looking to understand and derive service mesh performance. The service mesh performance standard aims to articulate these complexities in a methodical and automated manner in order for anyone to plan the performance scenarios of their deployment and execute relevant tests.&lt;/p&gt;&lt;p&gt;The code snippet provides insight on the fact that the specification defines a common collection of statistical analysis to be calculated for every performance test.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;message PerformanceTestResult &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  message Latency &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    double min = 1;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    double average = 2;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    double p50 = 3;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    double p90 = 4;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    double p99 = 5;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    double max = 6;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;&lt;i&gt;Snippet of the Service Mesh Performance specification describing how to capture statistical analysis of test results.&lt;/i&gt;&lt;/p&gt;&lt;h2&gt;Defining Deployments&lt;/h2&gt;&lt;p&gt;Virtualized deployments involve deploying microservice orchestration and service mesh stack in virtual machines (VMs). Although bare metal usage has performance benefits, customers often use VMs to provide hardware-level isolation between various applications. This deployment involves two VMs across two nodes, with one acting as a Kubernetes master with the other a worker node. Customers deploy VMs on a single NUMA node to avoid cross UPI traffic. Results in virtualized testing have shown that depending on pinning of QEMU threads to a set of isolated cores - either sequentially or clustering the threads together to all the cores - tail latencies are heavily impacted.&lt;/p&gt;&lt;p&gt;Microservice deployments could use a wide variety of deployment scenarios. The following list provides a sample set of how a service mesh performance could be analyzed either on a same node or in a multi-node cluster:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Pod to pod communication.&lt;/li&gt;&lt;li&gt;Pod to service communication.&lt;/li&gt;&lt;li&gt;Ingress controller to pod and vice-versa.&lt;/li&gt;&lt;li&gt;Load balancer to pod and vice-versa.&lt;/li&gt;&lt;li&gt;Pod to Egress Gateway.&lt;/li&gt;&lt;li&gt;Mutual TLS termination across any of the above endpoints.&lt;/li&gt;&lt;li&gt;Different security rules and policies.&lt;/li&gt;&lt;li&gt;Communication protocol.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;These considerations are illustrated in a typical workload deployment as shown in &lt;i&gt;Figure 3.&lt;/i&gt;&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;a href=&quot;static/figure-2-56880ed83f94d4c64e6163163859a6ea.png&quot;&gt;&lt;img src=&quot;static/figure-2-56880ed83f94d4c64e6163163859a6ea.png&quot; align=&quot;center&quot; alt=&quot;Workload&quot;/&gt;&lt;/a&gt;&lt;/div&gt;&lt;p&gt;Here is an example of deployment with Kubernetes as the orchestrator using Calico CNI and deployed in VMs, while the host infrastructure has OVS-DPDK for switching, which can be extended for VMs to leverage SR-IOV. To understand impact of infrastructure elements and networking elements of microservice software stack, performance impact of a service mesh and its set of data plane proxies with fortio as load generator could be understood by running the Meshery in two different environments outside the Kubernetes cluster.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;First one with load generator running as a process outside of Kubernetes cluster in master-vm&lt;/li&gt;&lt;li&gt;Second one with load generator running as a bare metal process on master-host&lt;/li&gt;&lt;/ol&gt;&lt;h3&gt;Automating Performance Measurements&lt;/h3&gt;&lt;p&gt;Meshery is ideal tooling in that it provides lifecycle management of a large number of service meshes and sample applications which need to be provisioned, configured, and deprovisioned in the process of analyzing service mesh performance. Meshery is capable of generating load, baselining, and comparing performance results. The canonical implementation of this specification is implemented in Meshery.&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;a href=&quot;static/Meshery Architecture - Clients-1bb8a8dd590218403e5f9c4ef02e80a3.png&quot;&gt;&lt;img src=&quot;static/Meshery Architecture - Clients-1bb8a8dd590218403e5f9c4ef02e80a3.png&quot; align=&quot;center&quot; alt=&quot;Archictures-client&quot;/&gt;&lt;/a&gt;&lt;/div&gt;&lt;p&gt;&lt;i&gt;Figure 4 - Meshery’s load generators can be deployed in the same cluster under test or outside of the cluster under test.&lt;/i&gt;&lt;/p&gt;&lt;h4&gt;Pipelining performance characterization&lt;/h4&gt;&lt;p&gt;Acknowledging the living nature of user deployments, integration of automated performance testing into continuous integration systems helps users deploy new versions of their applications or new configurations of their infrastructure (including service mesh configuration) with the assurity  afforded through the act of dry-running the service mesh and application configuration before production deployment. The Meshery and Service Mesh Performance GitHub Action offers the ability to adaptively analyze application performance as a gate in your continuous delivery pipeline. In this way, the Service Mesh Performance specification facilitates a measurement index that can be referenced when rolling out new versions of a service with this advanced canary technique.&lt;/p&gt;&lt;p&gt;Through Meshery, techniques to mirror non-idempotent requests without fear of impacting the current version of your application allowing replay of user requests. And use of intelligent network functions, embedded in WebAssembly (WASM) programs, to facilitate real user request reenactments to help you extract the most value out of your pipeline.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Repeatability of test scenarios using performance profiles and cloud native orchestration.&lt;/li&gt;&lt;li&gt;Baselining and comparing results.&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;Analyzing Performance Measurements&lt;/h3&gt;&lt;p&gt;We have often seen inefficiencies in the ratio of resource usage vs resources applied. Since the mesh elements i.e. the ingress and sidecars share resources with one or more of the application containers, there may be more resources left to be utilized. Tail latencies decrease with the increase in number of cores for all 1, 10 and 100 clones but increase with the increase in the number of connections. Data for various connection counts, as shown, indicates that performance degradation with Istio shows up with input RPS more than 1000. In a top down microarchitectural analysis (TMA), when the front proxy is pinned to a single core and the sidecar + flask app is pinned to another core and the number of microservices are scaled up. It is observed that (Figure 2):&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Frontend Bound% decreases with increase in number of microservices​ and Core Bound % increases.&lt;/li&gt;&lt;li&gt;Memory Bound % increases with increase in the number of microservices​.&lt;/li&gt;&lt;li&gt;L1 and L3 Bound% decreases for both the service cores on which the front –proxy is running as well as the core where the sidecar+flask app is running with number of microservices.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;In customer environments, the size of the cluster as well as the amount of incoming traffic will have an impact on the number of workloads and Envoy microservices. The underlying hardware and L4 networking on each node in the cluster will also impact the performance observed. A call stack and cycles spent analysis of a deployment with 1-20 sidecars on a specific 40 core system with a 10G NIC shows bottlenecks spread between:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Envoy:TheadLocalStorage-Hashset-Match&lt;/li&gt;&lt;li&gt;Linux kernel bottleneck spread between&lt;ol&gt;&lt;li&gt;Libpthreadscheduling&lt;/li&gt;&lt;li&gt;Libevent&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li&gt;Envoy buffer slice management and TCP filter, if message sizes or file transfer sizes increase to 1M&lt;/li&gt;&lt;li&gt;Crypto operations when TLS is enabled.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Our initial studies show that the optimal service mesh setup for the tolerable latencies and the best RPS may include:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Exclusive  threads allocated to Envoy processing&lt;/li&gt;&lt;li&gt;Reduced memory contention by allocating more memory bandwidth which can be controlled dynamically&lt;/li&gt;&lt;li&gt;Load balancing of worker threads among the among cores which may require&lt;/li&gt;&lt;li&gt;Less IO switching&lt;/li&gt;&lt;li&gt;Optimized memory copies with signals incorporated in addition to events (libevent)&lt;/li&gt;&lt;/ol&gt;&lt;h4&gt;Accelerations and Offloads&lt;/h4&gt;&lt;p&gt;A number of accelerations and offloads to SMART NIC or other processing elements like IPUs and DPUs are becoming available. How does the service mesh efficiency and performance benefitted from these deployment options needs to be defined and measured. Cycles and cores saved in the host cores vs offload cores which may be of different architectures and/or performance range needs to be quantified and benchmarks and indices created to measure.&lt;/p&gt;&lt;h3&gt;Being Precise in Performance Studies&lt;/h3&gt;&lt;p&gt;When measuring sub-millisecond response times, the noise floor of the environment as well as the sensitivity of the tooling may become dominant factors in measurements. Noisy neighbours, scheduler fairness, garbage collection, and even specifics in the timing of requests being sent as well as connection-reuse patterns may change noise floors such that similar measurements performed using different systems and tools may diverge an order of magnitude in absolute terms.&lt;/p&gt;&lt;p&gt;As a quick survey of load generators by way of those included in Meshery, we find upon close inspection their differences are noteworthy and justify their use under different circumstances.&lt;/p&gt;&lt;p&gt;Written in C, wrk2 supports ignoring coordinated omission. wrk2 lets you test a little more complex scenarios. Users express load generation profiles in terms of RPS. wrk2 shows you what you normally may not see in benchmark results, but what every 1,000th user might see. To see these outliers, you need to run the longer (time) performance tests.  Wrk2 tests the scenario where there&amp;#x27;s a string of services comprising microservices. wrk2 requires you to specify the desired RPS, while wrk does not. Wrk2 is focused on driving the maximum RPS. Meshery’s fork of wrk2 enables testing of multiple endpoints and enables the variable rate of load generation. In the future, Meshery will offer the ability to assign a weight to each endpoint for the load to be generated by wrk2.&lt;/p&gt;&lt;p&gt;Written in Golang, fortio is extremely fast and usable for testing basic response times on a per request level. Fortio produces results in JSON on a per request basis and easy to integrate into other Golang-based tooling like Meshery.&lt;/p&gt;&lt;p&gt;Written in C++, Nighthawk supports both open- and closed- loop testing, and was designed to offer the right sensitivity for benchmarking microservice proxies (sub millisecond latencies). Using an open loop test methodology avoids coordinated omission, and in conjunction with its adaptive load controller one can seek answers to questions like “what RPS can my mesh reliably sustain under set latency?”.&lt;/p&gt;&lt;h4&gt;Comparing Types of Data Plane Filtering&lt;/h4&gt;&lt;p&gt;Important to note is the power of the service mesh data plane and cost of that power. Envoy is a popular proxy of choice for service mesh data planes. Among other features, Envoy provides the ability to integrate custom traffic filters via one of two methods:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Natively by incorporating your custom traffic filter into Envoy’s C++ source code and compiling a new Envoy version. The drawback being that you need to maintain your own version of Envoy, while the benefit being that of your custom filter running at native speed.&lt;/li&gt;&lt;li&gt;Via WASM by incorporating your custom filter as a WebAssembly binary writing in C++, Rust, AssemblyScript or Go. The drawback being that WASM-based filters incur some overhead, while the benefit being that you can dynamically load and reload WASM-based filters in Envoy at runtime.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Whether to  integrate your traffic filters natively or as an extension, a tradeoff between the two deployment exists primarily in exchanging between service mesh speed and service mesh flexibility as shown in &lt;i&gt;Figure 4.&lt;/i&gt;&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;a href=&quot;static/Comparison of different modes of delivery of service mesh network functions-35336a794ba87248f68ea66ffd850253.png&quot;&gt;&lt;img src=&quot;static/Comparison of different modes of delivery of service mesh network functions-35336a794ba87248f68ea66ffd850253.png&quot; align=&quot;center&quot; alt=&quot;comparison of Network functions&quot;/&gt;&lt;/a&gt;&lt;/div&gt;&lt;p&gt;&lt;i&gt;Figure 5 - A comparison of different modes of delivery of service mesh network functions.&lt;/i&gt;&lt;/p&gt;&lt;p&gt;As an assessment of this tradeoff, an analysis of a series of three tests run across the same rate limit network function implemented as 1) a Golang-based client library, or 2) a Rust-based Envoy filter running in a WebAssembly virtual machine  (or 3) a native Envoy filter) provides some insight as to the comparative overhead involved.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Rate limiting with Go client library&lt;ul&gt;&lt;li&gt;At 100 RPS the p50 is 3.19ms.&lt;/li&gt;&lt;li&gt;At 500 RPS the p50 is 2.44ms.&lt;/li&gt;&lt;li&gt;With unlimited RPS (4,417) the p50 is 0.066ms.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Rate limiting with WASM module (Rust filter)&lt;ul&gt;&lt;li&gt;At 100 RPS the p50 is 2.1ms&lt;/li&gt;&lt;li&gt;At 500 RPS the p50 is 2.22ms&lt;/li&gt;&lt;li&gt;With unlimited RPS (5,781) the p50 is 0.62ms&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Users not only need to account for the (relatively) easy to quantify system overhead and the operational overhead involved in expanding development resources to implement bespoke tooling versus managing off-the-shelf filters.&lt;/p&gt;&lt;h3&gt;Summary&lt;/h3&gt;&lt;p&gt;To deploy a service mesh effectively, we need to&lt;/p&gt;&lt;ol&gt;&lt;li&gt;quantify application workload characteristics and how it utilizes a particular microarchitecture.&lt;/li&gt;&lt;li&gt;assess how Container Network Interface (CNI) drivers, Open Virtual Switch (OVS), rules processing, match and lookup requirements between Network Address Translated (NAT) and routed networks are required&lt;/li&gt;&lt;li&gt; different layers of service mesh to be deployed including layer 4 load balancers, ingress and reverse proxy, number of sidecars and number of microservices to be supported&lt;/li&gt;&lt;li&gt;and what hardware baseline performance does the setup have and &lt;/li&gt;&lt;li&gt; a quantifiable measure of service mesh deployed with performance measures mapped to KPIs like throughput (RPS) and latency.&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[API Gateways interplay with service meshes]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "API Gateways interplay with service meshes",
  "thumbnail": "../service-mesh.svg",
  "category": "Service Mesh",
  "tags": ["Service mesh"],
  "type": "Article",
  "technology": "API",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Learn more about service mesh fundamentals in ", mdx(Link, {
    className: "blog",
    to: "/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition",
    mdxType: "Link"
  }, "The Enterprise Path to Service Mesh Archictures (2nd Edition)"), " -  free book and excellent resource which addresses how to evaluate your organization\u2019s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.")), mdx("p", null, "API gateways come in a few forms:"), mdx("ul", null, mdx("li", null, "Traditional (e.g., Kong)"), mdx("li", null, "Cloud-hosted (e.g., Azure Load Balancer)"), mdx("li", null, "L7 proxy used as an API gateway and microservices API gateways (e.g., Traefik, NGINX, HAProxy, or Envoy)")), mdx("p", null, "L7 proxies used as API gateways generally can be represented by a collection of microservices-oriented, open source projects, which have taken the approach of wrapping existing L7 proxies with additional features needed for an API gateway."), mdx("h3", null, "NGINX"), mdx("p", null, "As a stable, efficient, ubiquitous L7 proxy, NGINX is commonly found at the core of API gateways. It may be used on its own or wrapped with additional features to facilitate container orchestrator native integration or additional self-service functionality for developers. Examples of this include:"), mdx("ul", null, mdx("li", null, "APIUmbrella"), mdx("li", null, "Kong"), mdx("li", null, "OpenResty")), mdx("h3", null, "Envoy"), mdx("p", null, "The Envoy project also has been used as the foundation for API gateways."), mdx("ul", null, mdx("li", null, "Ambassador: Based on Envoy, Ambassador is an API gateway for microservices functioning stand-alone or as a Kubernetes Ingress Controller. "), mdx("li", null, "Contour: Based on Envoy and deployed as a Kubernetes Ingress Controller. Hosted in the CNCF."), mdx("li", null, "Enroute: Envoy Route Controller. API Gateway created for Kubernetes ingress controller, and standalone deployments.")), mdx("p", null, "Other differences between traditional API gateways and microservices API gateways revolve around which team uses the gateway: operators or developers. Operators tend to measure API calls per consumer to meter and disallow API calls when a consumer exceeds its quota. Developers, on the other hand, tend to track L7 latency, throughput, and resilience, limiting API calls when the service is not responding."), mdx("p", null, "One of the most important distinctions to make when it comes to service meshes is that API gateways are designed to accept traffic from outside your organization/network and distribute it internally. API gateways expose your services as managed APIs, focused on transiting north/south traffic. They aren\u2019t as well suited for traffic management within the service mesh necessarily, because they require traffic to travel through a central proxy and add a network hop. Service meshes are primarily designed to handle east/west traffic internal to\xA0the service mesh."), mdx("div", {
    className: "fact-left"
  }, "Traffic Directions", mdx("p", null, "North-south (N-S) traffic refers to traffic between clients outside the Kubernetes cluster and services inside the cluster, while east-west (E-W) traffic refers to traffic between services inside the Kubernetes cluster.")), mdx("p", null, "API gateways and service meshes are frequently deployed in combination due to\xA0\xA0their complementing nature. Service meshes are on their way to providing much, if not all, of the functionality that API gateways do."), mdx("h3", null, "API Management"), mdx("p", null, "API gateways work with other API management ecosystem components like API marketplaces and API publishing portals, both of which are surfacing in service mesh offerings. Analytics, business data, adjunct provider services like single sign-on, and API versioning control are all provided by API management solutions.  Many API management vendors have migrated their API management systems to a single point of architecture, with API gateways designed to be implemented at the edge."), mdx("p", null, "An API gateway can call downstream services via service mesh by offloading application network functions to the service mesh. Some API management capabilities that are oriented toward developer engagement can overlap with service mesh management planes in the following ways:"), mdx("ul", null, mdx("li", null, "Developers use a portal to discover APIs available for API documentation and discovery,  API testing, and exercising their code."), mdx("li", null, "API analytics for tracking KPIs, generating reports on usage and adoption trending."), mdx("li", null, "API lifecycle management to secure APIs (allocate keys) and promote or demote APIs."), mdx("li", null, "Monetization to tracking payment plans and enforcing quotas."))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/api-gateways-interplay-with-service-meshes</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/api-gateways-interplay-with-service-meshes</guid><enclosure url="https://layer5.io/static/cb310234b6631abcabb632a85974a3dd/service-mesh.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Learn more about service mesh fundamentals in &lt;a class=&quot;blog&quot; href=&quot;/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition&quot;&gt;The Enterprise Path to Service Mesh Archictures (2nd Edition)&lt;/a&gt; -  free book and excellent resource which addresses how to evaluate your organization’s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;API gateways come in a few forms:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Traditional (e.g., Kong)&lt;/li&gt;&lt;li&gt;Cloud-hosted (e.g., Azure Load Balancer)&lt;/li&gt;&lt;li&gt;L7 proxy used as an API gateway and microservices API gateways (e.g., Traefik, NGINX, HAProxy, or Envoy)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;L7 proxies used as API gateways generally can be represented by a collection of microservices-oriented, open source projects, which have taken the approach of wrapping existing L7 proxies with additional features needed for an API gateway.&lt;/p&gt;&lt;h3&gt;NGINX&lt;/h3&gt;&lt;p&gt;As a stable, efficient, ubiquitous L7 proxy, NGINX is commonly found at the core of API gateways. It may be used on its own or wrapped with additional features to facilitate container orchestrator native integration or additional self-service functionality for developers. Examples of this include:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;APIUmbrella&lt;/li&gt;&lt;li&gt;Kong&lt;/li&gt;&lt;li&gt;OpenResty&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;Envoy&lt;/h3&gt;&lt;p&gt;The Envoy project also has been used as the foundation for API gateways.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Ambassador: Based on Envoy, Ambassador is an API gateway for microservices functioning stand-alone or as a Kubernetes Ingress Controller. &lt;/li&gt;&lt;li&gt;Contour: Based on Envoy and deployed as a Kubernetes Ingress Controller. Hosted in the CNCF.&lt;/li&gt;&lt;li&gt;Enroute: Envoy Route Controller. API Gateway created for Kubernetes ingress controller, and standalone deployments.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Other differences between traditional API gateways and microservices API gateways revolve around which team uses the gateway: operators or developers. Operators tend to measure API calls per consumer to meter and disallow API calls when a consumer exceeds its quota. Developers, on the other hand, tend to track L7 latency, throughput, and resilience, limiting API calls when the service is not responding.&lt;/p&gt;&lt;p&gt;One of the most important distinctions to make when it comes to service meshes is that API gateways are designed to accept traffic from outside your organization/network and distribute it internally. API gateways expose your services as managed APIs, focused on transiting north/south traffic. They aren’t as well suited for traffic management within the service mesh necessarily, because they require traffic to travel through a central proxy and add a network hop. Service meshes are primarily designed to handle east/west traffic internal to the service mesh.&lt;/p&gt;&lt;div class=&quot;fact-left&quot;&gt;Traffic Directions&lt;p&gt;North-south (N-S) traffic refers to traffic between clients outside the Kubernetes cluster and services inside the cluster, while east-west (E-W) traffic refers to traffic between services inside the Kubernetes cluster.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;API gateways and service meshes are frequently deployed in combination due to  their complementing nature. Service meshes are on their way to providing much, if not all, of the functionality that API gateways do.&lt;/p&gt;&lt;h3&gt;API Management&lt;/h3&gt;&lt;p&gt;API gateways work with other API management ecosystem components like API marketplaces and API publishing portals, both of which are surfacing in service mesh offerings. Analytics, business data, adjunct provider services like single sign-on, and API versioning control are all provided by API management solutions.  Many API management vendors have migrated their API management systems to a single point of architecture, with API gateways designed to be implemented at the edge.&lt;/p&gt;&lt;p&gt;An API gateway can call downstream services via service mesh by offloading application network functions to the service mesh. Some API management capabilities that are oriented toward developer engagement can overlap with service mesh management planes in the following ways:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Developers use a portal to discover APIs available for API documentation and discovery,  API testing, and exercising their code.&lt;/li&gt;&lt;li&gt;API analytics for tracking KPIs, generating reports on usage and adoption trending.&lt;/li&gt;&lt;li&gt;API lifecycle management to secure APIs (allocate keys) and promote or demote APIs.&lt;/li&gt;&lt;li&gt;Monetization to tracking payment plans and enforcing quotas.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Choosing the Perfect Proxy]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Choosing the Perfect Proxy",
  "thumbnail": "../service-mesh.svg",
  "category": "Service Mesh",
  "tags": ["Proxy"],
  "type": "Article",
  "product": "Meshery",
  "technology": "Kubernetes",
  "mesh": "Istio",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("p", null, "Historically, application delivery controllers were purchased, deployed, and managed by IT professionals most commonly to run enterprise-architected applications. With their distributed systems design and ephemeral infrastructure, cloud native applications require load balancers to be as dynamic as the infrastructure (containers, for example) upon which they run. These are often software load balancers. Because cloud native applications are typically developer-led initiatives in which developers are creating the application \u2014 that is, the microservices \u2014 and the infrastructure, developers and platform teams are increasingly making, or heavily influencing, decisions for load balancing (and other) infrastructure."), mdx("p", null, "Selecting your proxy is one of the most important decision your team will make. A developer\u2019s selection process gives heavier weight to a proxy\u2019s APIs (due to their ability to programmatically configure the proxy) and on a proxy\u2019s cloud native integrations (as previously noted). A top item on the list of demands for proxies is protocol support. Generally, protocol considerations can be broken into two types:"), mdx("ul", null, mdx("li", null, "TCP, UDP, HTTP: Network team-centric consideration in which efficiency, performance, offload, and load balancing algorithm support are evaluated. Support for HTTP2 often takes top billing."), mdx("li", null, "gRPC, NATS, Kafka: A developer-centric consideration in which the top item on the list is application-level protocols, specifically those commonly used in modern distributed application designs.")), mdx("div", {
    className: "intro"
  }, mdx("h3", {
    align: "center"
  }, "Tip: HTTP2, gRPC, NATS"), mdx("p", null, "At the heart of many distributed systems architectures are streaming and messaging protocols. When your applications need higher performance than JSON-REST, the application architecture commonly includes use of gRPC or NATS. REST is often found on the perimeter of the services while gRPC is used for service-to-service interactions. gRPC is a universal RPC framework. NATS is a multi-modal messaging system that includes request/reply, pub/sub and load balanced queues.")), mdx("p", null, "The reality is that selecting the perfect proxy involves more than protocol support. Your proxy should meet all key criteria:"), mdx("ul", null, mdx("li", null, "High performance and low latency"), mdx("li", null, "High scalability and small memory footprint"), mdx("li", null, "Deep observability at all layers of the network stack"), mdx("li", null, "Programmatic configuration and ecosystem integration")), mdx("p", null, "With a Kubernetes-native control plane, using CRDs and associated controllers enables powerful simplification, easy scaling, and intent-driven infrastructure. It is critical that the proxy has the capability to be intent-driven using Kubernetes CRDs and controllers (preferably an open source proxy like the Citrix Ingress Controller It\u2019s the robustness of a proxy\u2019s cloud native integrations and configuration APIs, like the Citrix Nitro API, that enables this. Not only are the proxy\u2019s configuration APIs a key consideration, but so is the method by which they handle your applications\u2019 APIs, specifically their security."), mdx("h3", null, "TCP/UDP Support"), mdx("p", null, "There are many applications that communicate over TCP/UDP ports. Kubernetes ingress was developed with web traffic in mind. It provides a standard way to control and route HTTP/S traffic into the cluster. However, ingress mechanisms for non-HTTP traffic are inconsistent and can be challenging."), mdx("p", null, "Typical methods are:"), mdx("ul", null, mdx("p", null, "Service.Type = Nodeport Nodeports use non-standard ports and are awkward and complex to get into production."), mdx("p", null, "Service.Type = LoadBalancer Typically offered only in public clouds, LoadBalancers could get expensive depending on the number of services used."), mdx("p", null, "Citrix offers Service.type = Loadbalancer with a built-in IP address manager that is  consistent across clouds and on-premises deployments. This implementation simplifies IP address management and can save on load balancer costs in public clouds. An alternate method, also supported by Citrix, is to use ingress annotations that expose TCP/UDP ports. ")), mdx("p", null, "All three methods make it much easier for TCP/UDP applications to be used as microservices without extensive code rewrites or protocol changes."), mdx("h2", null, "Securing Your Applications and APIs"), mdx("div", {
    className: "center"
  }, mdx("img", {
    src: Api,
    align: "center",
    alt: "API security considerations by traffic direction."
  }), mdx("p", null, "API security considerations by traffic direction.")), mdx("p", null, "While traffic direction will dictate your security needs, the reality is that several concerns are shared considerations for both north-south and east-west traffic."), mdx("p", null, "Let\u2019s walk through the API security requirements one by one:"), mdx("h3", null, "Ingress Security (North-South) "), mdx("p", null, "As services are exposed outside the cluster, the security considerations remain similar to those of monolithic deployments. In addition to ensuring protections like IP blacklist/whitelist and a robust encryption profile (SSL/TLS), it is imperative that the services are protected against both layer 3-4 and layer 7 DDoS."), mdx("p", null, "Authentication/authorization are equally critical to ensure that the right access controls are established and maintained on data, APIs, and services. At the same time, as attacks are moving to the application layer, web application firewall (WAF) protections like SQL injection (SQLi), buffer overflow, and signature protections are table stakes. As the types of attacks are continuously evolving and because applications and APIs are changing many times a month, it is also critical that the protection mechanisms include behavior-based methods to automate the protection policies and detect potential zero-day attacks."), mdx("h3", null, "API Gateway and Security (North-South)"), mdx("p", null, "APIs are becoming the currency for digital transformation and for microservices that provide services via API, and therefore routing, security, control, and visibility for APIs is critical. API gateways are a perfect function to achieve these capabilities and typically are combined with the ingress solution."), mdx("p", null, "API gateway solutions offer key functions like authentication, authorization, rate limiting, policy-based routing of APIs, and API versioning. In addition, the traditional controls applicable to a N-S web service are equally applicable and even more important to apply to APIs. API security is not just about authentication but also about ensuring that the content coming in from authenticated sources is not malicious. API gateway functions typically get configured in ingress through configmaps or CRDs."), mdx("h3", null, "Intra-Cluster Security for Service Mesh or Service Mesh-Lite (East-West)"), mdx("p", null, "Secure application deployment and secure infrastructure best practices dictate security controls in terms of both N-S and E-W service traffic (the former is generally more intuitively understood) because one layer of security isn\u2019t enough, and in-depth defense is needed."), mdx("p", null, "As the number and variety of your microservices expand, the pattern we\u2019ve seen is that services might start as internal use only, but over time end up being exposed externally to customers and partners. The gooey center of your cluster, where you initially intend to have most of your service-to-service interactions, needs to be as secure because service-to-service interactions expand to those outside the cluster. Service meshes are a natural solution here. To obtain this added layer of security (and many other benefits), the adoption of service meshes is on the rise, dramatically. When your application delivery controller integrates with a service mesh, API security is broadly upleveled and guaranteed up to a certain point irrespective of developers' rigor in incorporating secure coding practices. That\u2019s because a service mesh runs as a layer of your infrastructure, relieving developers of a number of (but not all) identity, authentication, and authorization concerns."), mdx("p", null, "For example, inter-services communication should be mutually authenticated via transport layer security (TLS) so that only permitted API connections are allowed. Previously, this may have been implemented with each individual service, but the service mesh enables this functionality to be offloaded to a sidecar ADC, like Citrix CPX, and managed by the service mesh control plane."), mdx("p", null, "Similarly, it should be possible to ensure a faster and more consistent approach to SSL policy in microservices environments through the use of SSL profiles. By defining acceptable SSL settings (for example, ciphers, protocol, and key strength) and binding them to your different entities, developers can quickly deploy consistent encryption policies that meet the appropriate security requirements. After all, isn\u2019t the goal here to facilitate both developer velocity while ensuring that necessary security practices are met?"), mdx("p", null, "Another rapidly emerging technology to enable developer velocity is serverless computing. While serverless does indeed involve servers, it leverages infrastructure as code to run backend services as needed, which frees the developer from having to worry about scaling, patching, security, and infrastructure reliability. API gateways are key to applications built with serverless because the developer can simply specify policy such as authentication, authorization, and rate limits without worrying about the form factor, performance, and reliability of the proxy that usually provides these features."), mdx("p", null, "Next, let\u2019s explore aspects of another benefit use of a service mesh provides: traffic control."), mdx("h2", null, "Enabling CI/CD and Canary Deployment with Advanced Traffic Steering"), mdx("p", null, "Your application delivery solution should be an enabler of continuous delivery and canary deployments by providing advanced traffic steering. Intelligent proxies are required here. If you\u2019re using a control plane (and not configuring the proxies directly), understand that you will only be able to harness the full power of your proxies to the extent that the control plane exposes their capabilities for configuration."), mdx("h3", null, "Canary Deployment  "), mdx("p", null, "In order to facilitate canary deployments, you need a powerful proxy. Kubernetes facilitates rolling updates to a service deployment, focusing on ensuring that traffic shifting from one version of a service to the next happens gradually over time and with zero downtime. However, Kubernetes on its own doesn\u2019t offer the level of granular control over traffic necessary for simply exposing your canary to a subset of users that you identify. Nor is it convenient for error rate and performance monitoring. Although performance monitoring is integral for canary analysis, many times the solutions for automated canary analysis are cobbled together."), mdx("p", null, "A canary deployment is manual in that you will need to manually check that the canary behaves as you want before doing a full deployment (caution: the difference between canary and baseline isn't always clear). Robust application delivery solutions support ", mdx("b", null, "automated canary analysis"), " and progressive rollout. With an automated canary analysis, not only are you able to avoid manual administration of the deployment, but you can also rely on an automated statistical analysis to better detect problems in the set of metrics you\u2019ve identified as indicators of a healthy deployment."), mdx("p", null, mdx("b", null, "A/B testing"), " requires full control over traffic distribution with several versions of your service running in parallel as you run various experimental tests. Experimentations often include measuring differences in conversion rates between versions of a service with the aim of improving a given business metric. To facilitate these experiments, you might want to direct requests based on various criteria like a client\u2019s browser type and version or a user segment based on the presence of a specific cookie or the effect of UI changes on user behavior and the impact on overall performance."), mdx("p", null, mdx("b", null, "Chaos engineering"), " is akin to A/B testing in that it is an emergent practice that facilitates experimentation. Experimentation here is for purposes of testing and improving application delivery resiliency. Chaos engineering will evolve and expand in use as the complexity and rate of change of large-scale distributed systems demand new tools and techniques for increasing reliability and resiliency. Service-oriented teams (as opposed to infrastructure-oriented platform teams) will push past chaos engineering tools such as Chaos Monkey for inducing machine failures and skip Chaos Kong for evacuating entire regions. Instead they will move to application delivery solutions to perform precise service-level experiments on their path to improving application resiliency via orchestrated chaos. It's through exploration of the impact of increased latency and methodical failure of specific services that service teams will gain confidence in their systems\u2019 capabilities to withstand turbulent conditions in production and begin to sleep more soundly at night."), mdx("p", null, "Savvy cloud native engineers understand the nuances of these delivery methods, and the key role that the proxy plays in enabling these methods. Note, however, that the need for these methods is not restricted to cloud native workloads. These application delivery solution considerations generally apply to microservices and monolithic services in that irrespective of a given service\u2019s architecture, new versions of the service need to be deployed and managed. Because we live in a hybrid world, we encourage you to seek application delivery solutions that do, too."), mdx("h2", null, "Achieving Holistic Observability "), mdx("p", null, "Observability is crucial for effective troubleshooting of microservices environments, but the ephemeral nature and complexity of distributed architecture presents serious challenges. It's incredibly hard to maintain awareness of what's happening in your environment when containers are continuously created and destroyed. Continuous deployment adds to the transient nature of containers because DevOps teams often push many new deployments per day to update their applications."), mdx("p", null, "Similarly, the number of things to monitor \u2014 services, containers, users \u2014 is enormous, and the fact that everything is distributed makes microservices an incredibly complex environment. While it\u2019s easy to determine if a service is down, troubleshooting slow applications is not? How can you isolate problems among all of the vast telemetry data to find the root cause, especially with inter-microservices (E-W) traffic?"), mdx("p", null, "You cannot monitor what you can't see. This is why it is vitally important to have inspection points through which the traffic passes. When they are correctly positioned, proxies/ADCs collect telemetry for an unprecedented view of application traffic \u2014 both N-S and E-W traffic across both monolithic and microservices architectures \u2014 and they report important data to collection tools."), mdx("p", null, "To overcome the challenge of gaining observability into microservices, you need to build an observability stack. The stack should consist of four pillars: logging, metrics, tracing, and service graphs. However, these should not be viewed as individual, disjointed components but rather as a holistic observability stack that is integrated and can combine data as required."), mdx("strong", null, "Logs"), mdx("p", null, "Logs are an immutable record of an individual event at a particular time. They are designed into systems, and there tends to be a log record to accompany almost every action. While logs are highly granular, they are limited in their searchability, and it is not usually feasible to process them manually. ADC feeds log data into tools like Elasticsearch for processing and indexing and Kibana for data visualization."), mdx("strong", null, "Metrics"), mdx("p", null, "Metrics are data points that are measured over time that can be used to monitor trends and set alerts. In addition to the system resources of your individual proxies, the unique position of the proxies means that it sees important information about the use of the application - number of requests, HTTP request rate, errors and more. These metrics can be exported by ADCs to tools like Prometheus where they can be processed and tools like Grafana can visualize them, set alarms create heat maps to help you understand the status of your ADCs."), mdx("strong", null, "Traces"), mdx("p", null, "The flow of packets through a microservices-based application can be complex spanning multiple services (sometimes multiple times) so identifying why a service is slow can be difficult. Distributed Tracing is a technique that monitors request flow through microservices to build a map of the latency through each microservice hop. Trace is an end-to-end latency graph of a specific request. It represents the entire journey of a request and helps troubleshoot latency issues. Distributed tracing can also be used to understand the application architecture and services not being used. ADC integrates with open source tools like OpenTracing and Zipkin for distributed tracing"), mdx("strong", null, "Service Graphs"), mdx("p", null, "Service graphs are dynamic graphical representations of microservices and their interdependencies. Service graphs, like that of the service graph in the Citrix Application Delivery Manager (ADM) console, provide detail on connectivity among microservices, help you identify issues via simple color coding, and learn composite health scores for each microservice based on throughput, saturation, errors, and latency. More than this, Citrix service graphs also have a built in DVR-like function, which allows you to zero in on the specific time period when an issue occurred."), mdx("p", null, "Given their distillment of complex microservices into a graphical form, service graphs need to provide the ability to tag microservices and to use tags to search, sort , and filter. In this way, you can create custom service graph views of microservices running in production only or you can restrict your view to see details just for canary microservices."), mdx("p", null, "As a complement to the basic pillars of observability (logs, metrics, and traces), service graphs enhance your observability stack. They provide a holistic view of your microservices-based application environments in a single place for an intuitive and convenient way to gain insight and troubleshoot microservices environments faster."), mdx("h2", null, "Managing Monoliths and Microservices"), mdx("p", null, "With hybrid cloud now a reality for many organizations, managing multiple environments with divergent capabilities and management systems is also a reality. Operating with confidence requires reconciling these differences into a uniform operational model and, subsequently, into a uniform understanding with consistent (read: quality) control. For operational consistency, you need a single pane of glass to manage your application delivery infrastructure across:"), mdx("ul", null, mdx("li", null, "Any application: monolithic and microservices-based applications"), mdx("li", null, "Any environment: on-premises, public, private, and hybrid "), mdx("li", null, "Any ADC form factor: physical, virtual, cloud, containers, sidecars, and more")), mdx("p", null, "You need holistic control and monitoring for operational consistency across all your workloads (new microservices and existing monoliths). Ideally, you\u2019ll get such consistency from the proxy you\u2019ve put in place. As you select your proxy, exercise caution when piecing together components from disparate vendors/projects into a solution, because this will not only require integration effort, but also separate specialization to understand and operate. The overhead of integration and specialization can be avoided when your proxy portfolio is robust and supports any application, any environment and form factor with operatonal consistancy."), mdx("p", null, "Moreover, as the large public cloud providers extend their reach on-premises with offerings like Google Anthos, AWS Outposts, and Azure Stack, and as organizations adopt them as simpler paths to cloud migration, it becomes important to use a proxy that works in multiple environments. A battle-tested solution like Citrix ADC that is validated to work in Google Anthos and AWS Outposts environments both in the cloud and on-premises can be invaluable for maintaining operational consistency across your hybrid multi-cloud environment. Because Citrix ADC comes in a variety of form factors (including hardware, software, bare metal, cloud, containers, sidecars, and more) that are built on a single code base, it works across your hybrid workloads in a uniform fashion and prevents a sprawl of heterogenous load balancers across your environment.")));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/choosing-the-perfect-proxy</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/choosing-the-perfect-proxy</guid><enclosure url="https://layer5.io/static/cb310234b6631abcabb632a85974a3dd/service-mesh.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;p&gt;Historically, application delivery controllers were purchased, deployed, and managed by IT professionals most commonly to run enterprise-architected applications. With their distributed systems design and ephemeral infrastructure, cloud native applications require load balancers to be as dynamic as the infrastructure (containers, for example) upon which they run. These are often software load balancers. Because cloud native applications are typically developer-led initiatives in which developers are creating the application — that is, the microservices — and the infrastructure, developers and platform teams are increasingly making, or heavily influencing, decisions for load balancing (and other) infrastructure.&lt;/p&gt;&lt;p&gt;Selecting your proxy is one of the most important decision your team will make. A developer’s selection process gives heavier weight to a proxy’s APIs (due to their ability to programmatically configure the proxy) and on a proxy’s cloud native integrations (as previously noted). A top item on the list of demands for proxies is protocol support. Generally, protocol considerations can be broken into two types:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;TCP, UDP, HTTP: Network team-centric consideration in which efficiency, performance, offload, and load balancing algorithm support are evaluated. Support for HTTP2 often takes top billing.&lt;/li&gt;&lt;li&gt;gRPC, NATS, Kafka: A developer-centric consideration in which the top item on the list is application-level protocols, specifically those commonly used in modern distributed application designs.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;intro&quot;&gt;&lt;h3 align=&quot;center&quot;&gt;Tip: HTTP2, gRPC, NATS&lt;/h3&gt;&lt;p&gt;At the heart of many distributed systems architectures are streaming and messaging protocols. When your applications need higher performance than JSON-REST, the application architecture commonly includes use of gRPC or NATS. REST is often found on the perimeter of the services while gRPC is used for service-to-service interactions. gRPC is a universal RPC framework. NATS is a multi-modal messaging system that includes request/reply, pub/sub and load balanced queues.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;The reality is that selecting the perfect proxy involves more than protocol support. Your proxy should meet all key criteria:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;High performance and low latency&lt;/li&gt;&lt;li&gt;High scalability and small memory footprint&lt;/li&gt;&lt;li&gt;Deep observability at all layers of the network stack&lt;/li&gt;&lt;li&gt;Programmatic configuration and ecosystem integration&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;With a Kubernetes-native control plane, using CRDs and associated controllers enables powerful simplification, easy scaling, and intent-driven infrastructure. It is critical that the proxy has the capability to be intent-driven using Kubernetes CRDs and controllers (preferably an open source proxy like the Citrix Ingress Controller It’s the robustness of a proxy’s cloud native integrations and configuration APIs, like the Citrix Nitro API, that enables this. Not only are the proxy’s configuration APIs a key consideration, but so is the method by which they handle your applications’ APIs, specifically their security.&lt;/p&gt;&lt;h3&gt;TCP/UDP Support&lt;/h3&gt;&lt;p&gt;There are many applications that communicate over TCP/UDP ports. Kubernetes ingress was developed with web traffic in mind. It provides a standard way to control and route HTTP/S traffic into the cluster. However, ingress mechanisms for non-HTTP traffic are inconsistent and can be challenging.&lt;/p&gt;&lt;p&gt;Typical methods are:&lt;/p&gt;&lt;ul&gt;&lt;p&gt;Service.Type = Nodeport Nodeports use non-standard ports and are awkward and complex to get into production.&lt;/p&gt;&lt;p&gt;Service.Type = LoadBalancer Typically offered only in public clouds, LoadBalancers could get expensive depending on the number of services used.&lt;/p&gt;&lt;p&gt;Citrix offers Service.type = Loadbalancer with a built-in IP address manager that is  consistent across clouds and on-premises deployments. This implementation simplifies IP address management and can save on load balancer costs in public clouds. An alternate method, also supported by Citrix, is to use ingress annotations that expose TCP/UDP ports. &lt;/p&gt;&lt;/ul&gt;&lt;p&gt;All three methods make it much easier for TCP/UDP applications to be used as microservices without extensive code rewrites or protocol changes.&lt;/p&gt;&lt;h2&gt;Securing Your Applications and APIs&lt;/h2&gt;&lt;div class=&quot;center&quot;&gt;&lt;img src=&quot;static/citrix-api-security-considerations-by-traffic-direction-fd6855ee14436ab0085a6960ffce8734.svg&quot; align=&quot;center&quot; alt=&quot;API security considerations by traffic direction.&quot;/&gt;&lt;p&gt;API security considerations by traffic direction.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;While traffic direction will dictate your security needs, the reality is that several concerns are shared considerations for both north-south and east-west traffic.&lt;/p&gt;&lt;p&gt;Let’s walk through the API security requirements one by one:&lt;/p&gt;&lt;h3&gt;Ingress Security (North-South) &lt;/h3&gt;&lt;p&gt;As services are exposed outside the cluster, the security considerations remain similar to those of monolithic deployments. In addition to ensuring protections like IP blacklist/whitelist and a robust encryption profile (SSL/TLS), it is imperative that the services are protected against both layer 3-4 and layer 7 DDoS.&lt;/p&gt;&lt;p&gt;Authentication/authorization are equally critical to ensure that the right access controls are established and maintained on data, APIs, and services. At the same time, as attacks are moving to the application layer, web application firewall (WAF) protections like SQL injection (SQLi), buffer overflow, and signature protections are table stakes. As the types of attacks are continuously evolving and because applications and APIs are changing many times a month, it is also critical that the protection mechanisms include behavior-based methods to automate the protection policies and detect potential zero-day attacks.&lt;/p&gt;&lt;h3&gt;API Gateway and Security (North-South)&lt;/h3&gt;&lt;p&gt;APIs are becoming the currency for digital transformation and for microservices that provide services via API, and therefore routing, security, control, and visibility for APIs is critical. API gateways are a perfect function to achieve these capabilities and typically are combined with the ingress solution.&lt;/p&gt;&lt;p&gt;API gateway solutions offer key functions like authentication, authorization, rate limiting, policy-based routing of APIs, and API versioning. In addition, the traditional controls applicable to a N-S web service are equally applicable and even more important to apply to APIs. API security is not just about authentication but also about ensuring that the content coming in from authenticated sources is not malicious. API gateway functions typically get configured in ingress through configmaps or CRDs.&lt;/p&gt;&lt;h3&gt;Intra-Cluster Security for Service Mesh or Service Mesh-Lite (East-West)&lt;/h3&gt;&lt;p&gt;Secure application deployment and secure infrastructure best practices dictate security controls in terms of both N-S and E-W service traffic (the former is generally more intuitively understood) because one layer of security isn’t enough, and in-depth defense is needed.&lt;/p&gt;&lt;p&gt;As the number and variety of your microservices expand, the pattern we’ve seen is that services might start as internal use only, but over time end up being exposed externally to customers and partners. The gooey center of your cluster, where you initially intend to have most of your service-to-service interactions, needs to be as secure because service-to-service interactions expand to those outside the cluster. Service meshes are a natural solution here. To obtain this added layer of security (and many other benefits), the adoption of service meshes is on the rise, dramatically. When your application delivery controller integrates with a service mesh, API security is broadly upleveled and guaranteed up to a certain point irrespective of developers&amp;#x27; rigor in incorporating secure coding practices. That’s because a service mesh runs as a layer of your infrastructure, relieving developers of a number of (but not all) identity, authentication, and authorization concerns.&lt;/p&gt;&lt;p&gt;For example, inter-services communication should be mutually authenticated via transport layer security (TLS) so that only permitted API connections are allowed. Previously, this may have been implemented with each individual service, but the service mesh enables this functionality to be offloaded to a sidecar ADC, like Citrix CPX, and managed by the service mesh control plane.&lt;/p&gt;&lt;p&gt;Similarly, it should be possible to ensure a faster and more consistent approach to SSL policy in microservices environments through the use of SSL profiles. By defining acceptable SSL settings (for example, ciphers, protocol, and key strength) and binding them to your different entities, developers can quickly deploy consistent encryption policies that meet the appropriate security requirements. After all, isn’t the goal here to facilitate both developer velocity while ensuring that necessary security practices are met?&lt;/p&gt;&lt;p&gt;Another rapidly emerging technology to enable developer velocity is serverless computing. While serverless does indeed involve servers, it leverages infrastructure as code to run backend services as needed, which frees the developer from having to worry about scaling, patching, security, and infrastructure reliability. API gateways are key to applications built with serverless because the developer can simply specify policy such as authentication, authorization, and rate limits without worrying about the form factor, performance, and reliability of the proxy that usually provides these features.&lt;/p&gt;&lt;p&gt;Next, let’s explore aspects of another benefit use of a service mesh provides: traffic control.&lt;/p&gt;&lt;h2&gt;Enabling CI/CD and Canary Deployment with Advanced Traffic Steering&lt;/h2&gt;&lt;p&gt;Your application delivery solution should be an enabler of continuous delivery and canary deployments by providing advanced traffic steering. Intelligent proxies are required here. If you’re using a control plane (and not configuring the proxies directly), understand that you will only be able to harness the full power of your proxies to the extent that the control plane exposes their capabilities for configuration.&lt;/p&gt;&lt;h3&gt;Canary Deployment  &lt;/h3&gt;&lt;p&gt;In order to facilitate canary deployments, you need a powerful proxy. Kubernetes facilitates rolling updates to a service deployment, focusing on ensuring that traffic shifting from one version of a service to the next happens gradually over time and with zero downtime. However, Kubernetes on its own doesn’t offer the level of granular control over traffic necessary for simply exposing your canary to a subset of users that you identify. Nor is it convenient for error rate and performance monitoring. Although performance monitoring is integral for canary analysis, many times the solutions for automated canary analysis are cobbled together.&lt;/p&gt;&lt;p&gt;A canary deployment is manual in that you will need to manually check that the canary behaves as you want before doing a full deployment (caution: the difference between canary and baseline isn&amp;#x27;t always clear). Robust application delivery solutions support &lt;b&gt;automated canary analysis&lt;/b&gt; and progressive rollout. With an automated canary analysis, not only are you able to avoid manual administration of the deployment, but you can also rely on an automated statistical analysis to better detect problems in the set of metrics you’ve identified as indicators of a healthy deployment.&lt;/p&gt;&lt;p&gt;&lt;b&gt;A/B testing&lt;/b&gt; requires full control over traffic distribution with several versions of your service running in parallel as you run various experimental tests. Experimentations often include measuring differences in conversion rates between versions of a service with the aim of improving a given business metric. To facilitate these experiments, you might want to direct requests based on various criteria like a client’s browser type and version or a user segment based on the presence of a specific cookie or the effect of UI changes on user behavior and the impact on overall performance.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Chaos engineering&lt;/b&gt; is akin to A/B testing in that it is an emergent practice that facilitates experimentation. Experimentation here is for purposes of testing and improving application delivery resiliency. Chaos engineering will evolve and expand in use as the complexity and rate of change of large-scale distributed systems demand new tools and techniques for increasing reliability and resiliency. Service-oriented teams (as opposed to infrastructure-oriented platform teams) will push past chaos engineering tools such as Chaos Monkey for inducing machine failures and skip Chaos Kong for evacuating entire regions. Instead they will move to application delivery solutions to perform precise service-level experiments on their path to improving application resiliency via orchestrated chaos. It&amp;#x27;s through exploration of the impact of increased latency and methodical failure of specific services that service teams will gain confidence in their systems’ capabilities to withstand turbulent conditions in production and begin to sleep more soundly at night.&lt;/p&gt;&lt;p&gt;Savvy cloud native engineers understand the nuances of these delivery methods, and the key role that the proxy plays in enabling these methods. Note, however, that the need for these methods is not restricted to cloud native workloads. These application delivery solution considerations generally apply to microservices and monolithic services in that irrespective of a given service’s architecture, new versions of the service need to be deployed and managed. Because we live in a hybrid world, we encourage you to seek application delivery solutions that do, too.&lt;/p&gt;&lt;h2&gt;Achieving Holistic Observability &lt;/h2&gt;&lt;p&gt;Observability is crucial for effective troubleshooting of microservices environments, but the ephemeral nature and complexity of distributed architecture presents serious challenges. It&amp;#x27;s incredibly hard to maintain awareness of what&amp;#x27;s happening in your environment when containers are continuously created and destroyed. Continuous deployment adds to the transient nature of containers because DevOps teams often push many new deployments per day to update their applications.&lt;/p&gt;&lt;p&gt;Similarly, the number of things to monitor — services, containers, users — is enormous, and the fact that everything is distributed makes microservices an incredibly complex environment. While it’s easy to determine if a service is down, troubleshooting slow applications is not? How can you isolate problems among all of the vast telemetry data to find the root cause, especially with inter-microservices (E-W) traffic?&lt;/p&gt;&lt;p&gt;You cannot monitor what you can&amp;#x27;t see. This is why it is vitally important to have inspection points through which the traffic passes. When they are correctly positioned, proxies/ADCs collect telemetry for an unprecedented view of application traffic — both N-S and E-W traffic across both monolithic and microservices architectures — and they report important data to collection tools.&lt;/p&gt;&lt;p&gt;To overcome the challenge of gaining observability into microservices, you need to build an observability stack. The stack should consist of four pillars: logging, metrics, tracing, and service graphs. However, these should not be viewed as individual, disjointed components but rather as a holistic observability stack that is integrated and can combine data as required.&lt;/p&gt;&lt;strong&gt;Logs&lt;/strong&gt;&lt;p&gt;Logs are an immutable record of an individual event at a particular time. They are designed into systems, and there tends to be a log record to accompany almost every action. While logs are highly granular, they are limited in their searchability, and it is not usually feasible to process them manually. ADC feeds log data into tools like Elasticsearch for processing and indexing and Kibana for data visualization.&lt;/p&gt;&lt;strong&gt;Metrics&lt;/strong&gt;&lt;p&gt;Metrics are data points that are measured over time that can be used to monitor trends and set alerts. In addition to the system resources of your individual proxies, the unique position of the proxies means that it sees important information about the use of the application - number of requests, HTTP request rate, errors and more. These metrics can be exported by ADCs to tools like Prometheus where they can be processed and tools like Grafana can visualize them, set alarms create heat maps to help you understand the status of your ADCs.&lt;/p&gt;&lt;strong&gt;Traces&lt;/strong&gt;&lt;p&gt;The flow of packets through a microservices-based application can be complex spanning multiple services (sometimes multiple times) so identifying why a service is slow can be difficult. Distributed Tracing is a technique that monitors request flow through microservices to build a map of the latency through each microservice hop. Trace is an end-to-end latency graph of a specific request. It represents the entire journey of a request and helps troubleshoot latency issues. Distributed tracing can also be used to understand the application architecture and services not being used. ADC integrates with open source tools like OpenTracing and Zipkin for distributed tracing&lt;/p&gt;&lt;strong&gt;Service Graphs&lt;/strong&gt;&lt;p&gt;Service graphs are dynamic graphical representations of microservices and their interdependencies. Service graphs, like that of the service graph in the Citrix Application Delivery Manager (ADM) console, provide detail on connectivity among microservices, help you identify issues via simple color coding, and learn composite health scores for each microservice based on throughput, saturation, errors, and latency. More than this, Citrix service graphs also have a built in DVR-like function, which allows you to zero in on the specific time period when an issue occurred.&lt;/p&gt;&lt;p&gt;Given their distillment of complex microservices into a graphical form, service graphs need to provide the ability to tag microservices and to use tags to search, sort , and filter. In this way, you can create custom service graph views of microservices running in production only or you can restrict your view to see details just for canary microservices.&lt;/p&gt;&lt;p&gt;As a complement to the basic pillars of observability (logs, metrics, and traces), service graphs enhance your observability stack. They provide a holistic view of your microservices-based application environments in a single place for an intuitive and convenient way to gain insight and troubleshoot microservices environments faster.&lt;/p&gt;&lt;h2&gt;Managing Monoliths and Microservices&lt;/h2&gt;&lt;p&gt;With hybrid cloud now a reality for many organizations, managing multiple environments with divergent capabilities and management systems is also a reality. Operating with confidence requires reconciling these differences into a uniform operational model and, subsequently, into a uniform understanding with consistent (read: quality) control. For operational consistency, you need a single pane of glass to manage your application delivery infrastructure across:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Any application: monolithic and microservices-based applications&lt;/li&gt;&lt;li&gt;Any environment: on-premises, public, private, and hybrid &lt;/li&gt;&lt;li&gt;Any ADC form factor: physical, virtual, cloud, containers, sidecars, and more&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;You need holistic control and monitoring for operational consistency across all your workloads (new microservices and existing monoliths). Ideally, you’ll get such consistency from the proxy you’ve put in place. As you select your proxy, exercise caution when piecing together components from disparate vendors/projects into a solution, because this will not only require integration effort, but also separate specialization to understand and operate. The overhead of integration and specialization can be avoided when your proxy portfolio is robust and supports any application, any environment and form factor with operatonal consistancy.&lt;/p&gt;&lt;p&gt;Moreover, as the large public cloud providers extend their reach on-premises with offerings like Google Anthos, AWS Outposts, and Azure Stack, and as organizations adopt them as simpler paths to cloud migration, it becomes important to use a proxy that works in multiple environments. A battle-tested solution like Citrix ADC that is validated to work in Google Anthos and AWS Outposts environments both in the cloud and on-premises can be invaluable for maintaining operational consistency across your hybrid multi-cloud environment. Because Citrix ADC comes in a variety of form factors (including hardware, software, bare metal, cloud, containers, sidecars, and more) that are built on a single code base, it works across your hybrid workloads in a uniform fashion and prevents a sprawl of heterogenous load balancers across your environment.&lt;/p&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Client Libraries]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Client Libraries",
  "thumbnail": "./using-different-microservice-client-libraries.png",
  "category": "Service Mesh",
  "tags": ["Service mesh"],
  "type": "Article",
  "product": "Meshery",
  "technology": "Docker",
  "mesh": "Linkerd",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Learn more about service mesh fundamentals in ", mdx(Link, {
    className: "blog",
    to: "/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition",
    mdxType: "Link"
  }, "The Enterprise Path to Service Mesh Archictures (2nd Edition)"), " -  free book and excellent resource which addresses how to evaluate your organization\u2019s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.")), mdx("p", null, "Client libraries (microservices frameworks) became very popular as microservices took a foothold in modern application design to avoid rewriting the same logic in every service. Example frameworks include the following:"), mdx("ul", null, mdx("li", null, mdx("h3", null, "Twitter Finagle "), mdx("p", null, "An open source remote procedure call (RPC) library built on Netty for engineers that want a strongly-typed language on the Java Virtual Machine (JVM). Finagle is written in Scala.")), mdx("li", null, mdx("h3", null, "Netflix Hystrix"), mdx("p", null, "An open source latency and fault tolerance library designed to isolate points of access to remote systems, services, and third-party libraries; stop cascading failure; and enable resilience. Hystrix is written in Java.")), mdx("li", null, mdx("h3", null, " Netflix Ribbon"), mdx("p", null, "An open source Inter-Process Communication (IPCs) library with built-in software load balancers. Ribbon is written in Java.")), mdx("li", null, mdx("h3", null, " Gokit"), mdx("p", null, "An open source toolkit for building microservices (or elegant monoliths) with gRPC as the primary messaging pattern. Gokit is written in Go and comes with pluggable serialization and transport.")), mdx("li", null, mdx("h3", null, "DropWizard, Spring Boot, Akka\u2026 and others."))), mdx("div", {
    className: "fact"
  }, mdx("p", null, "See the Layer5 ", mdx(Link, {
    to: "/landscape",
    mdxType: "Link"
  }, "service mesh landscape"), " for a comprehensive perspective of and characterizing of all popular client libraries.")), mdx("p", null, "Prior to the availability of service meshes, developers used language-specific microservices frameworks to improve the resiliency, security, and observability of their services. The drawback of client libraries is that they embed\xA0infrastructure concerns into your application code. Services that embed the same client library across themselves in the presence of a service mesh incorporate duplicative code. Inconsistency is a concern for services that include different client libraries or different versions of the same client library. In environments with polyglot microservices, different client libraries are used.  "), mdx("p", null, "Getting teams to update their client libraries can be an arduous process. When these infrastructure concerns are embedded in your service code, you'll need to track down your developers to update and reconfigure these libraries.\xA0 It can take a long time to get a consistent configuration with the same and most recent version deployed.\xA0 Enforcing consistency is challenging. \xA0As seen in the figure below, these frameworks couple\xA0your services with\xA0the infrastructure."), mdx("div", {
    className: "center"
  }, mdx("img", {
    src: Library,
    align: "right",
    alt: "service mesh client libraries"
  }), mdx("p", null, "Figure 1: Services architecture using client libraries coupled with application logic")), mdx("p", null, "Different services teams must negotiate things like timeouts and retries when infrastructure code is embedded in the application. A service mesh not only decouples infrastructure code from application code, but it also decouples teams. Service meshes are typically implemented as infrastructure that exists outside of your applications, but as their adoption increases, this is changing, and their use for influencing or implementing business logic is becoming more prevalent.")));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/client-libraries</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/client-libraries</guid><enclosure url="https://layer5.io/static/706fddc28c79130042c325a584799427/using-different-microservice-client-libraries.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Learn more about service mesh fundamentals in &lt;a class=&quot;blog&quot; href=&quot;/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition&quot;&gt;The Enterprise Path to Service Mesh Archictures (2nd Edition)&lt;/a&gt; -  free book and excellent resource which addresses how to evaluate your organization’s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Client libraries (microservices frameworks) became very popular as microservices took a foothold in modern application design to avoid rewriting the same logic in every service. Example frameworks include the following:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;h3&gt;Twitter Finagle &lt;/h3&gt;&lt;p&gt;An open source remote procedure call (RPC) library built on Netty for engineers that want a strongly-typed language on the Java Virtual Machine (JVM). Finagle is written in Scala.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt;Netflix Hystrix&lt;/h3&gt;&lt;p&gt;An open source latency and fault tolerance library designed to isolate points of access to remote systems, services, and third-party libraries; stop cascading failure; and enable resilience. Hystrix is written in Java.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt; Netflix Ribbon&lt;/h3&gt;&lt;p&gt;An open source Inter-Process Communication (IPCs) library with built-in software load balancers. Ribbon is written in Java.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt; Gokit&lt;/h3&gt;&lt;p&gt;An open source toolkit for building microservices (or elegant monoliths) with gRPC as the primary messaging pattern. Gokit is written in Go and comes with pluggable serialization and transport.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt;DropWizard, Spring Boot, Akka… and others.&lt;/h3&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;fact&quot;&gt;&lt;p&gt;See the Layer5 &lt;a href=&quot;/landscape&quot;&gt;service mesh landscape&lt;/a&gt; for a comprehensive perspective of and characterizing of all popular client libraries.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Prior to the availability of service meshes, developers used language-specific microservices frameworks to improve the resiliency, security, and observability of their services. The drawback of client libraries is that they embed infrastructure concerns into your application code. Services that embed the same client library across themselves in the presence of a service mesh incorporate duplicative code. Inconsistency is a concern for services that include different client libraries or different versions of the same client library. In environments with polyglot microservices, different client libraries are used.  &lt;/p&gt;&lt;p&gt;Getting teams to update their client libraries can be an arduous process. When these infrastructure concerns are embedded in your service code, you&amp;#x27;ll need to track down your developers to update and reconfigure these libraries.  It can take a long time to get a consistent configuration with the same and most recent version deployed.  Enforcing consistency is challenging.  As seen in the figure below, these frameworks couple your services with the infrastructure.&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;img src=&quot;static/using-different-microservice-client-libraries-dcccc0e38e613c81b5129099e46e8549.png&quot; align=&quot;right&quot; alt=&quot;service mesh client libraries&quot;/&gt;&lt;p&gt;Figure 1: Services architecture using client libraries coupled with application logic&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Different services teams must negotiate things like timeouts and retries when infrastructure code is embedded in the application. A service mesh not only decouples infrastructure code from application code, but it also decouples teams. Service meshes are typically implemented as infrastructure that exists outside of your applications, but as their adoption increases, this is changing, and their use for influencing or implementing business logic is becoming more prevalent.&lt;/p&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Deploying Istio]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Deploying Istio",
  "thumbnail": "../../../assets/images/service-mesh-icons/istio.svg",
  "type": "Article",
  "category": "Service Mesh",
  "mesh": "Istio",
  "technology": "Docker",
  "tags": ["Istio"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Istio is a massive project with a wide range of capabilities and deployment options. We will perform a basic installation on your local machine and deploy a few services onto the mesh. Let\u2019s start by understanding its supported platforms and configuring our environment for deployment.")), mdx("h3", null, "Preparing Your Environment for Istio"), mdx("p", null, "In addition to Istio, we'll be deploying BookInfo, its sample\xA0application. Our Istio and BookInfo deployments will lay down several containers. We will use Kubernetes as the platform to manage these containers. Kubernetes is a robust container orchestration system capable of forming clusters (a collection of nodes) and scheduling containers across nodes within the fleet of host machines (nodes) that form the cluster. Nodes are Linux or Windows servers that can run containers with a Kubernetes agent, kubelet, installed. Kubernetes is the first and best supported underlying platform among a variety of to-be-supported underlying systems. As a result, we'll be using Kubernetes throughout our examples. To be clear, Istio is not dependent on Kubernetes. Istio is designed to be platform agnostic and supports multiple deployment platforms including those without a container orchestrator."), mdx("h4", null, "Docker Desktop as the Installation Environment"), mdx("p", null, "We can deploy Kubernetes in a variety of ways. We'll utilize Docker Desktop as a convenient tool for this. Docker Desktop is an easy-to-install application for your Mac or Windows environment\xA0that allows you to run Kubernetes and Istio on your local machine."), mdx("p", null, "Install Docker Desktop and verify that you have a functional Docker environment by running ", mdx("code", null, "`$ docker run hello-world`"), " on the command line. If you get a ", mdx("code", null, "\u201CHello from Docker!\u201D"), " message, you\u2019ve confirmed that Docker isable to pull images, create new instances, and run as expected."), mdx("p", null, "We'll run Kubernetes on Docker Desktop and leverage Kubernetes as the platform to deploy\xA0Istio. The Docker Desktop managed Kubernetes server is a single-node Kubernetes cluster that runs locally within your Docker instance. It is not configurable."), mdx("p", null, "The Docker Desktop for Mac Kubernetes integration provides the Kubernetes CLI executable at ", mdx("code", null, "/usr/local/bin/kubectl"), ". The Docker Desktop for Windows Kubernetes integration provides the Kubernetes CLI executable at ", mdx("code", null, "C:\\>Program Files\\Docker\\Docker\\Resources\\bin\\kubectl.exe"), ". This location may not be in your shell\u2019s ", mdx("code", null, "PATH"), " variable, so you may need to type the full path of the command or add it to the ", mdx("code", null, "PATH"), ". For more information about ", mdx("code", null, "kubectl"), ", see the official ", mdx("code", null, "kubectl"), " documentation."), mdx("h4", null, "Configuring Docker Desktop"), mdx("p", null, "To make sure your Docker Desktop virtual machine has enough memory to run Kubernetes, Istio, and Istio's sample application, BookInfo, you'll need to set it up with at least 4GiB of RAM. All Istio and BookInfo services require this amount of memory to operate effectively.\xA0 Pilot, in particular, may have problems running as it requests\xA02048Mi of memory in an Istio deployment with default settings (see ", mdx(Link, {
    to: "/resources/service-mesh/istio-v15-at-a-glance",
    mdxType: "Link"
  }, " Istio v1.5 at a Glance"), " for a quick overview of Pilot's purpose). Considering 2048Mi is also the default limit for Docker Desktop, Pilot may refuse to start due to insufficient resources\xA0if this limit is not increased in your Docker installation."), mdx("p", null, "Instead of increasing the amount of memory allocated to your Docker Desktop installation, you may limit the amount of memory that Pilot requests of your Kubernetes cluster.  Depending on whether you're utilizing a package manager like Helm or directly using Kubernetes spec files, there are a couple of options."), mdx("p", null, "Using ", mdx("code", null, "install/kubernetes/istio-demo.yaml"), " as an example manifest, lets highlights which section of the Pilo spec to edit in order to reduce the 2048Mi of memory requested by Pilot to something smaller like 512Mi."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "apiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: istio-pilot\n  namespace: istio-system\n...\n          resources:\n            requests:\n              cpu: 500m\n              memory: 2048Mi\n...\n\n")), mdx("p", null, "When deploying Istio with Helm, you can also offer custom settings. To customize Istio install using Helm, use the ", mdx("code", null, "--set key=value"), " option in Helm command to override one or more values. An example of reducing Pilot\u2019s requested memory resources is shown below."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ helm template install/kubernetes/helm/istio --name istio --namespace istio-system --set pilot.resources.requests.memory=\"512Mi\" | kubectl apply -f -\n")), mdx("h4", null, "Deploying Kubernetes"), mdx("p", null, "If Kubernetes is not installed on your desktop please refer to Troubleshooting for helpful tips on installing Kubernetes. Verify ", mdx("code", null, "kubectl"), " installation by running:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl version --short\nClient Version: v1.13.0\nServer Version: v1.13.0\n\n")), mdx("p", null, "If you see both client and server version numbers, your ", mdx("code", null, "kubectl"), " client is installed in your ", mdx("code", null, "PATH"), " and a Kubernetes cluster is accessible. Verify Kubernetes installation and your current context by running ", mdx("code", null, "`$ kubectl get nodes`"), " which will confirm that your kubeconfig (typically located at ", mdx("code", null, "~/.kube/config"), ") is correctly configured to the `docker-desktop` context and your single-node cluster is up:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get nodes\nNAME             STATUS   ROLES    AGE   VERSION\ndocker-desktop   Ready    master   32m   v1.13.0\n\n")), mdx("h4", null, "Install Kubernetes Dashboard"), mdx("p", null, "The Kubernetes dashboard is a web-based user interface that allows you to manage your cluster and its\xA0resources. Containerized applications can be deployed and troubleshooted. The Kubernetes dashboard shows the current state of\xA0Kubernetes resources in your cluster\xA0as well as any faults that may have occurred. The Kubernetes dashboard can be used to reinforce your understanding of how Istio runs. The easiest and most common way to access the cluster is through ", mdx("code", null, "kubectl proxy"), ", which creates a local web server that securely proxies data to the Kubernetes dashboard through the Kubernetes API server.\xA0Execute the following command to deploy the Kubernetes dashboard:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended/kubernetes-dashboard.yaml\n\n")), mdx("p", null, "Once deployed, you can access the Kubernetes dashboard using the kubectl command-line tool by running the following command:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl proxy\n")), mdx("p", null, "This command creates a local web server that uses the Kubernetes API server to securely proxy data to the Kubernetes dashboard. It's important to note that the Kubernetes dashboard can only be accessed from the machine where the command is executed."), mdx("p", null, "See ", mdx("code", null, "kubectl proxy --help"), " for more options and the Kubernetes dashboard documentation for more information. ", mdx("code", null, "kubectl"), " will make the Kubernetes dashboard available at ", mdx("code", null, "http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/"), "."), mdx("p", null, "Dashboard deploys with a minimal RBAC configuration by default to secure your cluster data. Only a Bearer Token is currently supported for logging into the Kubernetes dashboard. Create a sample user and use its token, or use an existing token provided by your Docker Desktop deployment, and then run:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | awk '/default-token/ {print $1}')\n")), mdx("p", null, "This will print something similar to:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "Name:         default-token-tktcn\nNamespace:    kube-system\nLabels:       <none>\nAnnotations:  kubernetes.io/service-account.name: default\n              kubernetes.io/service-account.uid: 3a0a68b1-4abd-11e9-8561-025000000001\n\nType:  kubernetes.io/service-account-token\n\nData\n====\nca.crt:     1025 bytes\nnamespace:  11 bytes\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZWZhdWx0LXRva2VuLXRrdGNuIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImRlZmF1bHQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIzYTBhNjhiMS00YWJkLTExZTktODU2MS0wMjUwMDAwMDAwMDEiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06ZGVmYXVsdCJ9.WBOH85PHBVjky9JZLidfzS8EWNunIlFZR8MIJjMgBxQbVnqaVl0RmzcvZqYZRY9W7bwQddkXXHAuw5QQMfy8S-I2KdgxpQEP18tfU9wicv6TWt9bRfw9N7QsvB-twlMCEpRKtHwrORZqgRb7_13UH14RB18DiUAIiMok6rs1Pl5w9y0RXVUk9_RXMA2hJnkZ09cTOqJmQ80Vg4QvgAhuxwgmb6kl2rMjb0LegXihAN6j6Yv_JHZ2Vgjk73Priig0Pbjic6t87XfO51Kgjgw7g0vCF0OlOylvp-5oroPMa3nnnlqh6PGnFzOq0zLqjqYXMXZFI5cWkNmf71Q_qKSOsA\n\n")), mdx("p", null, "Copy the token and use it to authenticate in the Kubernetes dashboard."), mdx("h3", null, "Installing Istio"), mdx("p", null, "With Kubernetes deployed and dashboard up, it\u2019s time to install our service mesh. You can download the latest Istio release by executing the following command:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ curl -L https://git.io/getLatestIstio | sh -\n")), mdx("p", null, "The script fetches the latest Istio release candidate and untars it."), mdx("p", null, "If you would like to fetch a particular version of Istio, specify the desired version number as so:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ curl -L https://git.io/getLatestIstio | ISTIO_VERSION=1.1.0 sh -\n")), mdx("p", null, "Istio can also be downloaded from the ", mdx("a", {
    href: "https://github.com/istio/istio/releases"
  }, "Istio release page"), ".\xA0There are versions for Windows, MacOS, and Linux to pick from. After downloading the distribution for your operating system, extract the compressed file to a directory and acquaint yourself with the contents of the distribution, regardless of the operating system you're using."), mdx("p", null, "Each release includes ", mdx("code", null, "istioctl"), ", configuration samples, a sample application and platform-specific installation resources. ", mdx("code", null, "istioctl"), " is a command line utility for service operators to debug and diagnose their Istio service mesh. Alternatively, ", mdx("code", null, "istioctl"), " can be installed via your preferred  package manager."), mdx("p", null, "Explore release contents on MacOS or Linux by changing directory to \u201Cistio-x.x.x\u201D. For example: "), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ cd istio-1.1.0\n")), mdx("p", null, "This directory contains the files necessary for installing Istio, sample files and also ", mdx("code", null, "istioctl"), ", an important command-line tool used to manage your Istio deployment."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ ls -l\ntotal 48\n-rw-r--r--   1  user  staff  11343 Mar 18 16:08 LICENSE\n-rw-r--r--   1  user  staff   5921 Mar 18 16:08 README.md\ndrwxr-xr-x   3  user  staff     96 Mar 18 16:08 bin\ndrwxr-xr-x   7  user  staff    224 Mar 18 16:08 install\n-rw-r--r--   1  user  staff    602 Mar 18 16:08 istio.VERSION\ndrwxr-xr-x  16  user  staff    512 Mar 18 16:08 samples\ndrwxr-xr-x  21  user  staff    672 Mar 18 16:08 tools\n")), mdx("p", null, "The installation directory contains Istio installation ", mdx("code", null, "YAML"), " files for Kubernetes in ", mdx("code", null, "install/"), ", sample applications in ", mdx("code", null, "samples/"), ", the ", mdx("code", null, "istioctl"), " client binary in the ", mdx("code", null, "bin/"), " directory. The ", mdx("code", null, "istio.VERSION"), " configuration file contains a list of Istio components and their version numbers for the release\u2019s distribution."), mdx("p", null, mdx("code", null, "istioctl"), " is the Istio configuration command line utility. ", mdx("code", null, "istioctl"), " is used for setting routing rules, policies, and injecting Envoy as a service proxy manually, among other things. It is also used to create, list, modify, and delete configuration resources in the Istio system. Let\u2019s add it to your ", mdx("code", null, "PATH"), " environment variable:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ export PATH=$PWD/bin:$PATH\n")), mdx("p", null, "Verify your istioctl installation by running:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl version\n")), mdx("p", null, "This should validate path and istioctl command options (see Example 4.7). If not, see Troubleshooting. "), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "version.BuildInfo{\nVersion:\"1.1.0\", GitRevision:\"82797c0c0649a3f73029b33957ae105260458c6e\", \nUser:\"root\", \nHost:\"996cd064-49c1-11e9-813c-0a580a2c0506\", GolangVersion:\"go1.10.4\", \nDockerHub:\"docker.io/istio\", \nBuildStatus:\"Clean\", \nGitTag:\"1.1.0-rc.6\"\n}\n")), mdx("p", null, "Now that we have downloaded an Istio distribution and verified it\u2019s CLI tool, istioctl, is functional on our local machine, let\u2019s perform a basic installation."), mdx("h4", null, "Istio Installation Options"), mdx("p", null, "There are numerous installation and deployment architectures to choose from. Typically, installations fit into one of the following categories:"), mdx("h5", null, "Choice of Security Configuration"), mdx("ul", null, mdx("li", null, "Install with strict mutual TLS authentication.", mdx("ul", null, mdx("li", null, "Recommended for fresh kubernetes cluster. This method enforces authentication between sidecars by default."))), mdx("li", null, "Install with permissive mutual TLS authentication between sidecars.", mdx("ul", null, mdx("li", null, "Recommended if you have existing clusters and services."), mdx("li", null, "Recommended if you have applications where services with an Istio sidecar need to be able to communicate with other non-Istio Kubernetes services"))), mdx("li", null, "Custom deployments that include or exclude certain default Istio components.", mdx("ul", null, mdx("li", null, "Recommended if a function of one of Istio\u2019s components isn\u2019t necessary or desired in your environment (e.g. removal of Citadel if mTLS is not to be used).")))), mdx("h5", null, "Choice of Deployment Utility"), mdx("ul", null, mdx("li", null, "Render Kubernetes manifests directly with kubectl.", mdx("ul", null, mdx("li", null, "Recommended for understanding Istio\u2019s underpinnings more explicitly."))), mdx("li", null, "Render Kubernetes manifests with a package / configuration management system like Helm or Ansible.", mdx("ul", null, mdx("li", null, "Recommended for production deployments with templated configuration.")))), mdx("h4", null, "Registering Istio\u2019s Custom Resources"), mdx("p", null, "Use the following command to apply Istio\u2019s CustomResourceDefinition objects to your cluster:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ for i in install/kubernetes/helm/istio-init/files/crd*yaml; do kubectl apply -f $i; done\n")), mdx("p", null, "This installation does not leverage Helm (a package manager for Kubernetes). The generally preferred method for any installation of Istio that may find its way into production is to use Helm or Ansible; both included in the distribution you just downloaded. With Helm or Ansible you get more flexibility in which components you install and can fine-tune your setup."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl  api-resources | grep istio\nmeshpolicies                                   authentication.istio.io        false        MeshPolicy\npolicies                                       authentication.istio.io        true         Policy\nadapters                                       config.istio.io                true         adapter\napikeys                                        config.istio.io                true         apikey\nattributemanifests                             config.istio.io                true         attributemanifest\nauthorizations                                 config.istio.io                true         authorization\nbypasses                                       config.istio.io                true         bypass\nchecknothings                                  config.istio.io                true         checknothing\ncirconuses                                     config.istio.io                true         circonus\ncloudwatches                                   config.istio.io                true         cloudwatch\n...\n")), mdx("p", null, "Istio actually registers new types of resources, Custom Resource Definitions (CRDs) which represent things like Gateways or Services. We can manipulate (create/update/delete) them just like any other Kubernetes object:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get crd | grep istio\nadapters.config.istio.io               2019-03-24T03:17:08Z\napikeys.config.istio.io                2019-03-24T03:17:07Z\nattributemanifests.config.istio.io     2019-03-24T03:17:07Z\nauthorizations.config.istio.io         2019-03-24T03:17:07Z\nbypasses.config.istio.io               2019-03-24T03:17:07Z\nchecknothings.config.istio.io          2019-03-24T03:17:07Z\ncirconuses.config.istio.io             2019-03-24T03:17:07Z\ncloudwatches.config.istio.io           2019-03-24T03:17:08Z\nclusterrbacconfigs.rbac.istio.io       2019-03-24T03:17:07Z\ndeniers.config.istio.io                2019-03-24T03:17:07Z\ndestinationrules.networking.istio.io   2019-03-24T03:17:07Z\ndogstatsds.config.istio.io             2019-03-24T03:17:08Z\nedges.config.istio.io                  2019-03-24T03:17:08Z\nenvoyfilters.networking.istio.io       2019-03-24T03:17:07Z\n...\n")), mdx("p", null, "Once Istio\u2019s custom resources are registered with Kubernetes, Istio control plane components may be installed."), mdx("h4", null, "Installing Istio Control Plane Components"), mdx("p", null, "The istio-demo.yaml specification file contains Istio configuration that allows services to run in mutual TLS permissive mode. If you have existing services or applications in your Kubernetes cluster, it\xA0is recommended to use mTLS permissive mode. If you're setting up a fresh\xA0cluster, security best practises recommend using ", mdx("code", null, "istio-demo-auth.yaml"), "\xA0to encrypt service traffic between sidecars."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl apply -f install/kubernetes/istio-demo.yaml\n")), mdx("p", null, "Please wait for a few minutes to let the installation run, for the Docker images to properly download and for the deployments to succeed. The application of this extensive yaml file has Kubernetes realize many new Custom Resource Definitions."), mdx("p", null, "You might also use ", mdx("code", null, "istio-demo-auth.yaml"), ", which enforces mutual TLS authentication between all clients and servers. You might consider that initial deployment of Istio with strict mTLS enforcement configured is most successfully used within fresh Kubernetes cluster where all workloads will be Istio-enabled. To apply Istio setup with mutual TLS authentication, use the command below:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl apply -f install/kubernetes/istio-demo-auth.yaml\n")), mdx("p", null, "Istio's control plane is installed in its own istio-system namespace, and it supervises services in all other namespaces with sidecar proxies, or in other words, all other namespaces with services on the mesh. The control plane is deployed in the istio-system namespace act as a cluster-wide, which means that behaves in a single-tenant fashion."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get namespaces\nNAME           STATUS   AGE\ndefault        Active   49d\ndocker         Active   49d\nistio-system   Active   2m15s\nkube-public    Active   49d\nkube-system    Active   49d\n")), mdx("p", null, "Verify installation of the control plane into the ", mdx("code", null, "istio-system"), " namespace using commands:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get namespaces\nNAME           STATUS   AGE\ndefault        Active   49d\ndocker         Active   49d\nistio-system   Active   2m15s\nkube-public    Active   49d\nkube-system    Active   49d\n\nExample 4.11 - istio-system namespace created to contain Istio control plane components.\n\nVerify installation of the control plane into the istio-system namespace using commands:\n\n$ kubectl get svc -n istio-system\nNAME                     TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                                                                                                      AGE\ngrafana                  ClusterIP      10.108.237.105   <none>        3000/TCP                                                                                                                                     11d\nistio-citadel            ClusterIP      10.108.165.14    <none>        8060/TCP,15014/TCP                                                                                                                           11d\nistio-egressgateway      ClusterIP      10.107.148.169   <none>        80/TCP,443/TCP,15443/TCP                                                                                                                     11d\n...\n\n$ kubectl get pod -n istio-system\nNAME                                      READY   STATUS      RESTARTS   AGE\ngrafana-57586c685b-jr2pd                  1/1     Running     0          5m45s\nistio-citadel-645ffc4999-8j4v6            1/1     Running     0          5m45s\nistio-cleanup-secrets-1.1.0-4c9pc         0/1     Completed   0          5m48s\nistio-egressgateway-5c7fd57fdb-85g26      1/1     Running     0          5m46s\nistio-galley-978f9447f-mj5xj              1/1     Running     0          5m46s\nistio-grafana-post-install-1.1.0-g49gh    0/1     Completed   0          5m48s\nistio-ingressgateway-8ccdc79bc-8mk4p      1/1     Running     0          5m46s\nistio-pilot-649455846-klc8c               2/2     Running     0          5m45s\nistio-policy-7b7d7f644b-sqsp8             2/2     Running     4          5m45s\nistio-security-post-install-1.1.0-v4ffp   0/1     Completed   0          5m48s\nistio-sidecar-injector-6dcc9d5c64-tklqz   1/1     Running     0          5m45s\nistio-telemetry-6d494cd676-n6pkz          2/2     Running     4          5m45s\nistio-tracing-656f9fc99c-nn9hd            1/1     Running     0          5m44s\nkiali-69d6978b45-7q7ms                    1/1     Running     0          5m45s\nprometheus-66c9f5694-2xzpm                1/1     Running     0          5m45s\n")), mdx("p", null, "We've only deployed half of the service mesh so far, the control plane. You may not have noticed service proxies prior to deploying the sample application, and thus the data plane, because we have not deployed any services (applications) to run on the mesh. You may believe that no proxies are running, but you would be overlooking the fact that two proxies are already running. Our service proxy is up and operating on both the ingress and egress gateways. Let's have a look."), mdx("h4", null, "Deploy Sample Application"), mdx("p", null, "Let's get started by deploying our first set of services (an application) to the service mesh. We'll utilise BookInfo, an Istio sample application that demonstrates many aspects of the value proposition of service meshes. The Kubernetes manifest files for BookInfo may be found in the ", mdx("code", null, "samples/bookinfo/"), " subdirectory in your release distribution folder.\xA0 Let's take a moment to familiarise with this application."), mdx("p", null, "To populate the page, users call the ", mdx("code", null, "productpage"), "\xA0microservice, which then calls the ", mdx("code", null, "details"), "\xA0and ", mdx("code", null, "reviews"), "\xA0microservices. The book information can be found in the ", mdx("code", null, "details"), "\xA0microservice. The ", mdx("code", null, "reviews"), " microservice contains book reviews and subsequently calls the ", mdx("code", null, "ratings"), " microservice to retrieve reviews. The ", mdx("code", null, "ratings"), " microservice contains book ranking in the form of a 1 to 5 star book review.\xA0\xA0There are three versions of the ", mdx("code", null, "reviews"), "\xA0microservice: Each of the four application services are written in a different language - Python, Ruby, Java, Nodejs, which further demonstrates the value of a service mesh."), mdx("ul", null, mdx("li", null, "reviews v1 has no ratings (does not call the ratings service)."), mdx("li", null, "reviews v2 has ratings of 1 to 5 black stars (calls the ratings service)."), mdx("li", null, "reviews v3 has ratings of 1 to 5 red stars (calls the ratings service).")), mdx("p", null, "The application does not need to be changed to run the sample using Istio. Instead, we'll configure and run the services in an Istio-enabled environment, with service proxies injected alongside each service as sidecars. Istio's service proxies can be injected as sidecars to application services either manually or automatically. As we deploy our sample application, let's have a look at how automated sidecar injection works."), mdx("h4", null, "Deploying Sample App with Automatic Sidecar Injection"), mdx("p", null, "Istio will deploy a sidecar injector in order to have Envoy deployed as sidecars to each of our services. Let's check for the presence of the sidecar injector deployment and its namespace label, which specifies that pods in a specific namespace will have sidecar injected automatically upon deployment (admission):"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl -n istio-system get deployment -l istio=sidecar-injector\nNAME                     READY   UP-TO-DATE   AVAILABLE   AGE\nistio-sidecar-injector   1/1     1            1           82m\n")), mdx("p", null, "Label the default namespace with ", mdx("code", null, "istio-injection=enabled")), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl label namespace default istio-injection=enabled\n")), mdx("p", null, "And confirm which namespaces have the istio-injection label associated:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get namespace -L istio-injection\nNAME           STATUS    AGE       ISTIO-INJECTION\ndefault        Active    1h        enabled\nDocker         Active    1h        enabled\nistio-system   Active    1h        disabled\nkube-public    Active    1h        \nkube-system    Active    1h\n")), mdx("p", null, "The ", mdx("code", null, "istio-demo.yaml"), " deployment we ran has automatic injection configured."), mdx("p", null, "We can now deploy the sample app after installing the sidecar injector with modifying admission webhook and the namespace designated for automatic sidecar injection."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml\n")), mdx("p", null, "With sample application deployed, you can confirm that automatic sidecar injection is working in your environment by inspecting any one of the BookInfo pods and noting the istio-proxy container as a new addition to the application pod."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl describe po/productpage-v1-....\n...\nistio-proxy:\n    Container ID:  docker://f28abdf1f0acf92687711488f7fcca8cc5968e2ed39d8275bf57cc46b5ae2257\n    Image:         docker.io/istio/proxyv2:1.1.7\n    Image ID:      docker-pullable://istio/proxyv2@sha256:e6f039115c7d5ef9c8f6b049866fbf9b6f5e2255d3a733bb8756b36927749822\n    Port:          15090/TCP\n    Host Port:     0/TCP\n    Args:\n      proxy\n      sidecar\n...\n")), mdx("h4", null, "Networking with the Sample App"), mdx("p", null, "After the Bookinfo services are up and running, you'll need to make the application accessible from outside your Kubernetes cluster, such as through a browser. This is accomplished through the usage of an Istio Gateway. You'll need to specify the application's ingress gateway:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml\n")), mdx("p", null, "Confirm the gateway has been created:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get gateway\n\nNAME               AGE\nbookinfo-gateway   7m\n")), mdx("p", null, "Find where the ", mdx("code", null, "productpage"), "\xA0has been exposed as a service available to handle requests from outside of the cluster to interact with the freshly deployed application."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ echo \"http://$(kubectl get nodes -o template --template='{{range.items}}{{range.status.addresses}}{{if eq .type \"InternalIP\"}}{{.address}}{{end}}{{end}}{{end}}'):$(kubectl get svc istio-ingressgateway -n istio-system -o jsonpath='{.spec.ports[0].nodePort}')/productpage\"\n\nhttp://x.x.x.x:31380/productpage\n")), mdx("h4", null, "Uninstall Istio"), mdx("p", null, "It's a common mistake to assume that deleting the istio-system namespace will uninstall\xA0Istio. Deleting the istio-system removes Istio\u2019s control plane components, but leaves CRDs, sidecars and other artifacts resident in your cluster. Uninstalling Istio is as simple as executing this command from within your istio release folder:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl delete -f install/kubernetes/istio-demo.yaml\n")), mdx("p", null, "This will not delete all of the Istio custom resource definitions, mesh configuration and sample application, however. In order to delete these, run:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ for i in install/kubernetes/helm/istio-init/files/crd*yaml; do kubectl delete -f $i; done\n$ kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml\n$ kubectl delete -f samples/bookinfo/networking/bookinfo-gateway.yaml\n")), mdx("p", null, "You can verify the success of Istio and BookInfo\u2019s removal by running:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get crds\n$ kubectl get pods\n"))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/deploying-istio</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/deploying-istio</guid><enclosure url="https://layer5.io/static/731763d720780a49c2ffdfede8c28f4b/istio.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Istio is a massive project with a wide range of capabilities and deployment options. We will perform a basic installation on your local machine and deploy a few services onto the mesh. Let’s start by understanding its supported platforms and configuring our environment for deployment.&lt;/p&gt;&lt;/div&gt;&lt;h3&gt;Preparing Your Environment for Istio&lt;/h3&gt;&lt;p&gt;In addition to Istio, we&amp;#x27;ll be deploying BookInfo, its sample application. Our Istio and BookInfo deployments will lay down several containers. We will use Kubernetes as the platform to manage these containers. Kubernetes is a robust container orchestration system capable of forming clusters (a collection of nodes) and scheduling containers across nodes within the fleet of host machines (nodes) that form the cluster. Nodes are Linux or Windows servers that can run containers with a Kubernetes agent, kubelet, installed. Kubernetes is the first and best supported underlying platform among a variety of to-be-supported underlying systems. As a result, we&amp;#x27;ll be using Kubernetes throughout our examples. To be clear, Istio is not dependent on Kubernetes. Istio is designed to be platform agnostic and supports multiple deployment platforms including those without a container orchestrator.&lt;/p&gt;&lt;h4&gt;Docker Desktop as the Installation Environment&lt;/h4&gt;&lt;p&gt;We can deploy Kubernetes in a variety of ways. We&amp;#x27;ll utilize Docker Desktop as a convenient tool for this. Docker Desktop is an easy-to-install application for your Mac or Windows environment that allows you to run Kubernetes and Istio on your local machine.&lt;/p&gt;&lt;p&gt;Install Docker Desktop and verify that you have a functional Docker environment by running &lt;code&gt;`$ docker run hello-world`&lt;/code&gt; on the command line. If you get a &lt;code&gt;“Hello from Docker!”&lt;/code&gt; message, you’ve confirmed that Docker isable to pull images, create new instances, and run as expected.&lt;/p&gt;&lt;p&gt;We&amp;#x27;ll run Kubernetes on Docker Desktop and leverage Kubernetes as the platform to deploy Istio. The Docker Desktop managed Kubernetes server is a single-node Kubernetes cluster that runs locally within your Docker instance. It is not configurable.&lt;/p&gt;&lt;p&gt;The Docker Desktop for Mac Kubernetes integration provides the Kubernetes CLI executable at &lt;code&gt;/usr/local/bin/kubectl&lt;/code&gt;. The Docker Desktop for Windows Kubernetes integration provides the Kubernetes CLI executable at &lt;code&gt;C:\&amp;gt;Program Files\Docker\Docker\Resources\bin\kubectl.exe&lt;/code&gt;. This location may not be in your shell’s &lt;code&gt;PATH&lt;/code&gt; variable, so you may need to type the full path of the command or add it to the &lt;code&gt;PATH&lt;/code&gt;. For more information about &lt;code&gt;kubectl&lt;/code&gt;, see the official &lt;code&gt;kubectl&lt;/code&gt; documentation.&lt;/p&gt;&lt;h4&gt;Configuring Docker Desktop&lt;/h4&gt;&lt;p&gt;To make sure your Docker Desktop virtual machine has enough memory to run Kubernetes, Istio, and Istio&amp;#x27;s sample application, BookInfo, you&amp;#x27;ll need to set it up with at least 4GiB of RAM. All Istio and BookInfo services require this amount of memory to operate effectively.  Pilot, in particular, may have problems running as it requests 2048Mi of memory in an Istio deployment with default settings (see &lt;a href=&quot;/resources/service-mesh/istio-v15-at-a-glance&quot;&gt; Istio v1.5 at a Glance&lt;/a&gt; for a quick overview of Pilot&amp;#x27;s purpose). Considering 2048Mi is also the default limit for Docker Desktop, Pilot may refuse to start due to insufficient resources if this limit is not increased in your Docker installation.&lt;/p&gt;&lt;p&gt;Instead of increasing the amount of memory allocated to your Docker Desktop installation, you may limit the amount of memory that Pilot requests of your Kubernetes cluster.  Depending on whether you&amp;#x27;re utilizing a package manager like Helm or directly using Kubernetes spec files, there are a couple of options.&lt;/p&gt;&lt;p&gt;Using &lt;code&gt;install/kubernetes/istio-demo.yaml&lt;/code&gt; as an example manifest, lets highlights which section of the Pilo spec to edit in order to reduce the 2048Mi of memory requested by Pilot to something smaller like 512Mi.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: extensions/v1beta1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: Deployment&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  name: istio-pilot&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  namespace: istio-system&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;          resources:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            requests:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;              cpu: 500m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;              memory: 2048Mi&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;When deploying Istio with Helm, you can also offer custom settings. To customize Istio install using Helm, use the &lt;code&gt;--set key=value&lt;/code&gt; option in Helm command to override one or more values. An example of reducing Pilot’s requested memory resources is shown below.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ helm template install/kubernetes/helm/istio --name istio --namespace istio-system --set pilot.resources.requests.memory=&amp;quot;512Mi&amp;quot; | kubectl apply -f -&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Deploying Kubernetes&lt;/h4&gt;&lt;p&gt;If Kubernetes is not installed on your desktop please refer to Troubleshooting for helpful tips on installing Kubernetes. Verify &lt;code&gt;kubectl&lt;/code&gt; installation by running:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl version --short&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Client Version: v1.13.0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Server Version: v1.13.0&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;If you see both client and server version numbers, your &lt;code&gt;kubectl&lt;/code&gt; client is installed in your &lt;code&gt;PATH&lt;/code&gt; and a Kubernetes cluster is accessible. Verify Kubernetes installation and your current context by running &lt;code&gt;`$ kubectl get nodes`&lt;/code&gt; which will confirm that your kubeconfig (typically located at &lt;code&gt;~/.kube/config&lt;/code&gt;) is correctly configured to the `docker-desktop` context and your single-node cluster is up:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get nodes&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME             STATUS   ROLES    AGE   VERSION&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;docker-desktop   Ready    master   32m   v1.13.0&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Install Kubernetes Dashboard&lt;/h4&gt;&lt;p&gt;The Kubernetes dashboard is a web-based user interface that allows you to manage your cluster and its resources. Containerized applications can be deployed and troubleshooted. The Kubernetes dashboard shows the current state of Kubernetes resources in your cluster as well as any faults that may have occurred. The Kubernetes dashboard can be used to reinforce your understanding of how Istio runs. The easiest and most common way to access the cluster is through &lt;code&gt;kubectl proxy&lt;/code&gt;, which creates a local web server that securely proxies data to the Kubernetes dashboard through the Kubernetes API server. Execute the following command to deploy the Kubernetes dashboard:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended/kubernetes-dashboard.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Once deployed, you can access the Kubernetes dashboard using the kubectl command-line tool by running the following command:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl proxy&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;This command creates a local web server that uses the Kubernetes API server to securely proxy data to the Kubernetes dashboard. It&amp;#x27;s important to note that the Kubernetes dashboard can only be accessed from the machine where the command is executed.&lt;/p&gt;&lt;p&gt;See &lt;code&gt;kubectl proxy --help&lt;/code&gt; for more options and the Kubernetes dashboard documentation for more information. &lt;code&gt;kubectl&lt;/code&gt; will make the Kubernetes dashboard available at &lt;code&gt;http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;Dashboard deploys with a minimal RBAC configuration by default to secure your cluster data. Only a Bearer Token is currently supported for logging into the Kubernetes dashboard. Create a sample user and use its token, or use an existing token provided by your Docker Desktop deployment, and then run:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | awk &amp;#x27;/default-token/ {print $1}&amp;#x27;)&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;This will print something similar to:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Name:         default-token-tktcn&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Namespace:    kube-system&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Labels:       &amp;lt;none&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Annotations:  kubernetes.io/service-account.name: default&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;              kubernetes.io/service-account.uid: 3a0a68b1-4abd-11e9-8561-025000000001&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Type:  kubernetes.io/service-account-token&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Data&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;====&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ca.crt:     1025 bytes&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;namespace:  11 bytes&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;token:      eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZWZhdWx0LXRva2VuLXRrdGNuIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImRlZmF1bHQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiIzYTBhNjhiMS00YWJkLTExZTktODU2MS0wMjUwMDAwMDAwMDEiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06ZGVmYXVsdCJ9.WBOH85PHBVjky9JZLidfzS8EWNunIlFZR8MIJjMgBxQbVnqaVl0RmzcvZqYZRY9W7bwQddkXXHAuw5QQMfy8S-I2KdgxpQEP18tfU9wicv6TWt9bRfw9N7QsvB-twlMCEpRKtHwrORZqgRb7_13UH14RB18DiUAIiMok6rs1Pl5w9y0RXVUk9_RXMA2hJnkZ09cTOqJmQ80Vg4QvgAhuxwgmb6kl2rMjb0LegXihAN6j6Yv_JHZ2Vgjk73Priig0Pbjic6t87XfO51Kgjgw7g0vCF0OlOylvp-5oroPMa3nnnlqh6PGnFzOq0zLqjqYXMXZFI5cWkNmf71Q_qKSOsA&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Copy the token and use it to authenticate in the Kubernetes dashboard.&lt;/p&gt;&lt;h3&gt;Installing Istio&lt;/h3&gt;&lt;p&gt;With Kubernetes deployed and dashboard up, it’s time to install our service mesh. You can download the latest Istio release by executing the following command:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ curl -L https://git.io/getLatestIstio | sh -&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;The script fetches the latest Istio release candidate and untars it.&lt;/p&gt;&lt;p&gt;If you would like to fetch a particular version of Istio, specify the desired version number as so:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ curl -L https://git.io/getLatestIstio | ISTIO_VERSION=1.1.0 sh -&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Istio can also be downloaded from the &lt;a href=&quot;https://github.com/istio/istio/releases&quot;&gt;Istio release page&lt;/a&gt;. There are versions for Windows, MacOS, and Linux to pick from. After downloading the distribution for your operating system, extract the compressed file to a directory and acquaint yourself with the contents of the distribution, regardless of the operating system you&amp;#x27;re using.&lt;/p&gt;&lt;p&gt;Each release includes &lt;code&gt;istioctl&lt;/code&gt;, configuration samples, a sample application and platform-specific installation resources. &lt;code&gt;istioctl&lt;/code&gt; is a command line utility for service operators to debug and diagnose their Istio service mesh. Alternatively, &lt;code&gt;istioctl&lt;/code&gt; can be installed via your preferred  package manager.&lt;/p&gt;&lt;p&gt;Explore release contents on MacOS or Linux by changing directory to “istio-x.x.x”. For example: &lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ cd istio-1.1.0&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;This directory contains the files necessary for installing Istio, sample files and also &lt;code&gt;istioctl&lt;/code&gt;, an important command-line tool used to manage your Istio deployment.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ ls -l&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;total 48&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;-rw-r--r--   1  user  staff  11343 Mar 18 16:08 LICENSE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;-rw-r--r--   1  user  staff   5921 Mar 18 16:08 README.md&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;drwxr-xr-x   3  user  staff     96 Mar 18 16:08 bin&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;drwxr-xr-x   7  user  staff    224 Mar 18 16:08 install&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;-rw-r--r--   1  user  staff    602 Mar 18 16:08 istio.VERSION&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;drwxr-xr-x  16  user  staff    512 Mar 18 16:08 samples&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;drwxr-xr-x  21  user  staff    672 Mar 18 16:08 tools&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;The installation directory contains Istio installation &lt;code&gt;YAML&lt;/code&gt; files for Kubernetes in &lt;code&gt;install/&lt;/code&gt;, sample applications in &lt;code&gt;samples/&lt;/code&gt;, the &lt;code&gt;istioctl&lt;/code&gt; client binary in the &lt;code&gt;bin/&lt;/code&gt; directory. The &lt;code&gt;istio.VERSION&lt;/code&gt; configuration file contains a list of Istio components and their version numbers for the release’s distribution.&lt;/p&gt;&lt;p&gt;&lt;code&gt;istioctl&lt;/code&gt; is the Istio configuration command line utility. &lt;code&gt;istioctl&lt;/code&gt; is used for setting routing rules, policies, and injecting Envoy as a service proxy manually, among other things. It is also used to create, list, modify, and delete configuration resources in the Istio system. Let’s add it to your &lt;code&gt;PATH&lt;/code&gt; environment variable:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ export PATH=$PWD/bin:$PATH&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Verify your istioctl installation by running:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl version&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;This should validate path and istioctl command options (see Example 4.7). If not, see Troubleshooting. &lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;version.BuildInfo{&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Version:&amp;quot;1.1.0&amp;quot;, GitRevision:&amp;quot;82797c0c0649a3f73029b33957ae105260458c6e&amp;quot;, &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;User:&amp;quot;root&amp;quot;, &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Host:&amp;quot;996cd064-49c1-11e9-813c-0a580a2c0506&amp;quot;, GolangVersion:&amp;quot;go1.10.4&amp;quot;, &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;DockerHub:&amp;quot;docker.io/istio&amp;quot;, &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;BuildStatus:&amp;quot;Clean&amp;quot;, &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;GitTag:&amp;quot;1.1.0-rc.6&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Now that we have downloaded an Istio distribution and verified it’s CLI tool, istioctl, is functional on our local machine, let’s perform a basic installation.&lt;/p&gt;&lt;h4&gt;Istio Installation Options&lt;/h4&gt;&lt;p&gt;There are numerous installation and deployment architectures to choose from. Typically, installations fit into one of the following categories:&lt;/p&gt;&lt;h5&gt;Choice of Security Configuration&lt;/h5&gt;&lt;ul&gt;&lt;li&gt;Install with strict mutual TLS authentication.&lt;ul&gt;&lt;li&gt;Recommended for fresh kubernetes cluster. This method enforces authentication between sidecars by default.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Install with permissive mutual TLS authentication between sidecars.&lt;ul&gt;&lt;li&gt;Recommended if you have existing clusters and services.&lt;/li&gt;&lt;li&gt;Recommended if you have applications where services with an Istio sidecar need to be able to communicate with other non-Istio Kubernetes services&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Custom deployments that include or exclude certain default Istio components.&lt;ul&gt;&lt;li&gt;Recommended if a function of one of Istio’s components isn’t necessary or desired in your environment (e.g. removal of Citadel if mTLS is not to be used).&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h5&gt;Choice of Deployment Utility&lt;/h5&gt;&lt;ul&gt;&lt;li&gt;Render Kubernetes manifests directly with kubectl.&lt;ul&gt;&lt;li&gt;Recommended for understanding Istio’s underpinnings more explicitly.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Render Kubernetes manifests with a package / configuration management system like Helm or Ansible.&lt;ul&gt;&lt;li&gt;Recommended for production deployments with templated configuration.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4&gt;Registering Istio’s Custom Resources&lt;/h4&gt;&lt;p&gt;Use the following command to apply Istio’s CustomResourceDefinition objects to your cluster:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ for i in install/kubernetes/helm/istio-init/files/crd*yaml; do kubectl apply -f $i; done&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;This installation does not leverage Helm (a package manager for Kubernetes). The generally preferred method for any installation of Istio that may find its way into production is to use Helm or Ansible; both included in the distribution you just downloaded. With Helm or Ansible you get more flexibility in which components you install and can fine-tune your setup.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl  api-resources | grep istio&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;meshpolicies                                   authentication.istio.io        false        MeshPolicy&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;policies                                       authentication.istio.io        true         Policy&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;adapters                                       config.istio.io                true         adapter&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apikeys                                        config.istio.io                true         apikey&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;attributemanifests                             config.istio.io                true         attributemanifest&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;authorizations                                 config.istio.io                true         authorization&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;bypasses                                       config.istio.io                true         bypass&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;checknothings                                  config.istio.io                true         checknothing&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;circonuses                                     config.istio.io                true         circonus&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;cloudwatches                                   config.istio.io                true         cloudwatch&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Istio actually registers new types of resources, Custom Resource Definitions (CRDs) which represent things like Gateways or Services. We can manipulate (create/update/delete) them just like any other Kubernetes object:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get crd | grep istio&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;adapters.config.istio.io               2019-03-24T03:17:08Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apikeys.config.istio.io                2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;attributemanifests.config.istio.io     2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;authorizations.config.istio.io         2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;bypasses.config.istio.io               2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;checknothings.config.istio.io          2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;circonuses.config.istio.io             2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;cloudwatches.config.istio.io           2019-03-24T03:17:08Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;clusterrbacconfigs.rbac.istio.io       2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;deniers.config.istio.io                2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;destinationrules.networking.istio.io   2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;dogstatsds.config.istio.io             2019-03-24T03:17:08Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;edges.config.istio.io                  2019-03-24T03:17:08Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;envoyfilters.networking.istio.io       2019-03-24T03:17:07Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Once Istio’s custom resources are registered with Kubernetes, Istio control plane components may be installed.&lt;/p&gt;&lt;h4&gt;Installing Istio Control Plane Components&lt;/h4&gt;&lt;p&gt;The istio-demo.yaml specification file contains Istio configuration that allows services to run in mutual TLS permissive mode. If you have existing services or applications in your Kubernetes cluster, it is recommended to use mTLS permissive mode. If you&amp;#x27;re setting up a fresh cluster, security best practises recommend using &lt;code&gt;istio-demo-auth.yaml&lt;/code&gt; to encrypt service traffic between sidecars.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl apply -f install/kubernetes/istio-demo.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Please wait for a few minutes to let the installation run, for the Docker images to properly download and for the deployments to succeed. The application of this extensive yaml file has Kubernetes realize many new Custom Resource Definitions.&lt;/p&gt;&lt;p&gt;You might also use &lt;code&gt;istio-demo-auth.yaml&lt;/code&gt;, which enforces mutual TLS authentication between all clients and servers. You might consider that initial deployment of Istio with strict mTLS enforcement configured is most successfully used within fresh Kubernetes cluster where all workloads will be Istio-enabled. To apply Istio setup with mutual TLS authentication, use the command below:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl apply -f install/kubernetes/istio-demo-auth.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Istio&amp;#x27;s control plane is installed in its own istio-system namespace, and it supervises services in all other namespaces with sidecar proxies, or in other words, all other namespaces with services on the mesh. The control plane is deployed in the istio-system namespace act as a cluster-wide, which means that behaves in a single-tenant fashion.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get namespaces&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME           STATUS   AGE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;default        Active   49d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;docker         Active   49d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-system   Active   2m15s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kube-public    Active   49d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kube-system    Active   49d&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Verify installation of the control plane into the &lt;code&gt;istio-system&lt;/code&gt; namespace using commands:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get namespaces&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME           STATUS   AGE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;default        Active   49d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;docker         Active   49d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-system   Active   2m15s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kube-public    Active   49d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kube-system    Active   49d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Example 4.11 - istio-system namespace created to contain Istio control plane components.&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Verify installation of the control plane into the istio-system namespace using commands:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get svc -n istio-system&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME                     TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                                                                                                      AGE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;grafana                  ClusterIP      10.108.237.105   &amp;lt;none&amp;gt;        3000/TCP                                                                                                                                     11d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-citadel            ClusterIP      10.108.165.14    &amp;lt;none&amp;gt;        8060/TCP,15014/TCP                                                                                                                           11d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-egressgateway      ClusterIP      10.107.148.169   &amp;lt;none&amp;gt;        80/TCP,443/TCP,15443/TCP                                                                                                                     11d&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get pod -n istio-system&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME                                      READY   STATUS      RESTARTS   AGE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;grafana-57586c685b-jr2pd                  1/1     Running     0          5m45s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-citadel-645ffc4999-8j4v6            1/1     Running     0          5m45s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-cleanup-secrets-1.1.0-4c9pc         0/1     Completed   0          5m48s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-egressgateway-5c7fd57fdb-85g26      1/1     Running     0          5m46s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-galley-978f9447f-mj5xj              1/1     Running     0          5m46s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-grafana-post-install-1.1.0-g49gh    0/1     Completed   0          5m48s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-ingressgateway-8ccdc79bc-8mk4p      1/1     Running     0          5m46s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-pilot-649455846-klc8c               2/2     Running     0          5m45s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-policy-7b7d7f644b-sqsp8             2/2     Running     4          5m45s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-security-post-install-1.1.0-v4ffp   0/1     Completed   0          5m48s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-sidecar-injector-6dcc9d5c64-tklqz   1/1     Running     0          5m45s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-telemetry-6d494cd676-n6pkz          2/2     Running     4          5m45s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-tracing-656f9fc99c-nn9hd            1/1     Running     0          5m44s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kiali-69d6978b45-7q7ms                    1/1     Running     0          5m45s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;prometheus-66c9f5694-2xzpm                1/1     Running     0          5m45s&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;We&amp;#x27;ve only deployed half of the service mesh so far, the control plane. You may not have noticed service proxies prior to deploying the sample application, and thus the data plane, because we have not deployed any services (applications) to run on the mesh. You may believe that no proxies are running, but you would be overlooking the fact that two proxies are already running. Our service proxy is up and operating on both the ingress and egress gateways. Let&amp;#x27;s have a look.&lt;/p&gt;&lt;h4&gt;Deploy Sample Application&lt;/h4&gt;&lt;p&gt;Let&amp;#x27;s get started by deploying our first set of services (an application) to the service mesh. We&amp;#x27;ll utilise BookInfo, an Istio sample application that demonstrates many aspects of the value proposition of service meshes. The Kubernetes manifest files for BookInfo may be found in the &lt;code&gt;samples/bookinfo/&lt;/code&gt; subdirectory in your release distribution folder.  Let&amp;#x27;s take a moment to familiarise with this application.&lt;/p&gt;&lt;p&gt;To populate the page, users call the &lt;code&gt;productpage&lt;/code&gt; microservice, which then calls the &lt;code&gt;details&lt;/code&gt; and &lt;code&gt;reviews&lt;/code&gt; microservices. The book information can be found in the &lt;code&gt;details&lt;/code&gt; microservice. The &lt;code&gt;reviews&lt;/code&gt; microservice contains book reviews and subsequently calls the &lt;code&gt;ratings&lt;/code&gt; microservice to retrieve reviews. The &lt;code&gt;ratings&lt;/code&gt; microservice contains book ranking in the form of a 1 to 5 star book review.  There are three versions of the &lt;code&gt;reviews&lt;/code&gt; microservice: Each of the four application services are written in a different language - Python, Ruby, Java, Nodejs, which further demonstrates the value of a service mesh.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;reviews v1 has no ratings (does not call the ratings service).&lt;/li&gt;&lt;li&gt;reviews v2 has ratings of 1 to 5 black stars (calls the ratings service).&lt;/li&gt;&lt;li&gt;reviews v3 has ratings of 1 to 5 red stars (calls the ratings service).&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;The application does not need to be changed to run the sample using Istio. Instead, we&amp;#x27;ll configure and run the services in an Istio-enabled environment, with service proxies injected alongside each service as sidecars. Istio&amp;#x27;s service proxies can be injected as sidecars to application services either manually or automatically. As we deploy our sample application, let&amp;#x27;s have a look at how automated sidecar injection works.&lt;/p&gt;&lt;h4&gt;Deploying Sample App with Automatic Sidecar Injection&lt;/h4&gt;&lt;p&gt;Istio will deploy a sidecar injector in order to have Envoy deployed as sidecars to each of our services. Let&amp;#x27;s check for the presence of the sidecar injector deployment and its namespace label, which specifies that pods in a specific namespace will have sidecar injected automatically upon deployment (admission):&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl -n istio-system get deployment -l istio=sidecar-injector&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME                     READY   UP-TO-DATE   AVAILABLE   AGE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-sidecar-injector   1/1     1            1           82m&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Label the default namespace with &lt;code&gt;istio-injection=enabled&lt;/code&gt;&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl label namespace default istio-injection=enabled&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;And confirm which namespaces have the istio-injection label associated:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get namespace -L istio-injection&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME           STATUS    AGE       ISTIO-INJECTION&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;default        Active    1h        enabled&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Docker         Active    1h        enabled&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-system   Active    1h        disabled&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kube-public    Active    1h        &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kube-system    Active    1h&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;The &lt;code&gt;istio-demo.yaml&lt;/code&gt; deployment we ran has automatic injection configured.&lt;/p&gt;&lt;p&gt;We can now deploy the sample app after installing the sidecar injector with modifying admission webhook and the namespace designated for automatic sidecar injection.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;With sample application deployed, you can confirm that automatic sidecar injection is working in your environment by inspecting any one of the BookInfo pods and noting the istio-proxy container as a new addition to the application pod.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl describe po/productpage-v1-....&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-proxy:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    Container ID:  docker://f28abdf1f0acf92687711488f7fcca8cc5968e2ed39d8275bf57cc46b5ae2257&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    Image:         docker.io/istio/proxyv2:1.1.7&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    Image ID:      docker-pullable://istio/proxyv2@sha256:e6f039115c7d5ef9c8f6b049866fbf9b6f5e2255d3a733bb8756b36927749822&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    Port:          15090/TCP&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    Host Port:     0/TCP&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    Args:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      proxy&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      sidecar&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Networking with the Sample App&lt;/h4&gt;&lt;p&gt;After the Bookinfo services are up and running, you&amp;#x27;ll need to make the application accessible from outside your Kubernetes cluster, such as through a browser. This is accomplished through the usage of an Istio Gateway. You&amp;#x27;ll need to specify the application&amp;#x27;s ingress gateway:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Confirm the gateway has been created:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME               AGE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;bookinfo-gateway   7m&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Find where the &lt;code&gt;productpage&lt;/code&gt; has been exposed as a service available to handle requests from outside of the cluster to interact with the freshly deployed application.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ echo &amp;quot;http://$(kubectl get nodes -o template --template=&amp;#x27;{{range.items}}{{range.status.addresses}}{{if eq .type &amp;quot;InternalIP&amp;quot;}}{{.address}}{{end}}{{end}}{{end}}&amp;#x27;):$(kubectl get svc istio-ingressgateway -n istio-system -o jsonpath=&amp;#x27;{.spec.ports[0].nodePort}&amp;#x27;)/productpage&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;http://x.x.x.x:31380/productpage&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Uninstall Istio&lt;/h4&gt;&lt;p&gt;It&amp;#x27;s a common mistake to assume that deleting the istio-system namespace will uninstall Istio. Deleting the istio-system removes Istio’s control plane components, but leaves CRDs, sidecars and other artifacts resident in your cluster. Uninstalling Istio is as simple as executing this command from within your istio release folder:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl delete -f install/kubernetes/istio-demo.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;This will not delete all of the Istio custom resource definitions, mesh configuration and sample application, however. In order to delete these, run:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ for i in install/kubernetes/helm/istio-init/files/crd*yaml; do kubectl delete -f $i; done&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl delete -f samples/bookinfo/networking/bookinfo-gateway.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;You can verify the success of Istio and BookInfo’s removal by running:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get crds&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get pods&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Internship FAQs]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Internship FAQs",
  "thumbnail": "../../../assets/images/workshops/workshops.png",
  "category": "FAQ",
  "tags": ["Internship", "FAQ"],
  "type": "FAQ",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", null, mdx(FAQ, {
    category: ["internships"],
    mdxType: "FAQ"
  }))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/faq/internship-faqs</link><guid isPermaLink="false">https://layer5.io/resources/faq/internship-faqs</guid><enclosure url="https://layer5.io/static/19e6848a9ab1dd41f5e4afc0e48f629a/workshops.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div&gt;&lt;section id=&quot;faq&quot; class=&quot;faqSectionstyle__FaqSectionWrapper-sc-197kv4v-0 iPiXYd&quot;&gt;&lt;div class=&quot;Container__ContainerWrapper-sc-1i64mot-0 eZMKUd&quot;&gt;&lt;div class=&quot;SectionTitle__TitleWrap-sc-1r9bvfi-0 cfYUXe section-title&quot;&gt;&lt;h1&gt;&lt;span&gt;Frequently Asked Questions&lt;/span&gt;&lt;/h1&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;Accordion&quot; class=&quot;accordionstyle__AccordionWrapper-sc-zq6yo-0 wUaHE reusecore__accordion&quot;&gt;&lt;h2 class=&quot;category_name&quot;&gt;internships&lt;/h2&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-0&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-0&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;How do I land an internship with Layer5?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-0&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;To best position your candidancy for an internship with Layer5, engage in the community and its projects. Start contributing and keep contributing. Community members who consistently contribute are the first individuals to be awarded internships when new internship opportunities open up - particularly members who are making significantly impactful contributions.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Understand that internships are assigned as a recognition of work that you are already performing. They are not assigned in the hopes of you becoming a good contributor, but are awarded to support and reinforce efforts that you are already giving. Engage and make an impact on an area of a project. Show your passion for helping move the project forward, willingness to work hard, and capacity to learn.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Recognize that there are many hundreds of contributors and relatively few maintainers and MeshMates. If you don&amp;#x27;t get an immediate response, don&amp;#x27;t lose heart. Be tenacious and find a piece of one of the projects to be engaged with and advance.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;/community/meshmates&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Engage a MeshMate&quot;&gt; Engage a MeshMate&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-1&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;How often does Layer5 offer internships?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-1&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Continuously. Layer5 has internships starting and stopping frequently. Some internships rigidly start and stop on particular dates, while other internships offered start as a batch of candidates show collective readiness. We work with individuals to align the timings of the internship with other activities in their life.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;https://github.com/issues?q=is%3Aopen+is%3Aissue+archived%3Afalse+org%3Alayer5io+org%3Ameshery+org%3Aservice-mesh-performance+org%3Aservice-mesh-patterns+label%3A%22help+wanted%22+&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Grab a &amp;quot;Help Wanted&amp;quot; Issue&quot;&gt; Grab a &amp;quot;Help Wanted&amp;quot; Issue&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-2&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-2&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;What are characteristics of successful interns?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-2&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Interns that thrive at Layer5 are those that espouse the Layer5 culture of paying it forward. These interns freely help other contributors, understanding that 1) they learn as they teach and assist others, 2) their projects are futhered with more contributors engage, and 3) any contributors path to maintainership is one of enabling others.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Successful interns steward projects naturally as they become a resource to other contributors. These interns frequently become component and/or core maintainers.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Successful interns internalize the fact that the real value of engaging and contributing to projects is the experience gained. They understand that the experience is theirs for the taking and that project maintainers and Layer5 employees want you to seize the opportunity. We consider your success our success and embrace the concept that your meaningful engagement is to all our benefits.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;/blog/tag/community&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Hear from other interns&quot;&gt; Hear from other interns&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-3&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-3&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;What are accomplishments of successful interns?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-3&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Many Layer5 interns speak at large, public technology conferences like KubeCon, DockerCon, and so on. They write blog posts and share about their experience and learnings on social media. They engage with their whole self.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Many interns become open source maintainers, and have ongoing responsibility to steward Layer5 and CNCF projects.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;askus_section&quot;&gt;&lt;h2&gt;Didn&amp;#x27;t find an answer to your question?&lt;/h2&gt;&lt;div class=&quot;Contact-Modal__ContactFormModalWrapper-sc-1sqlxv4-0 TKQLf&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn open-modal-btn&quot; title=&quot;Just Ask&quot;&gt; Just Ask&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;discussstyle__DiscussWrapper-sc-pb6iu-0 fWjVwU&quot;&gt;&lt;div class=&quot;explain&quot;&gt;&lt;div class=&quot;cards&quot;&gt;&lt;div class=&quot;Col__ColWrapper-sc-ozrpdq-0 fPuLpy col&quot;&gt;&lt;a href=&quot;https://discuss.layer5.io/&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;parentcard&quot;&gt;&lt;div class=&quot;SectionTitle__TitleWrap-sc-1r9bvfi-0 jfQSCp section-title&quot;&gt;&lt;h2&gt;Join the Conversation&lt;/h2&gt;&lt;p&gt;Ask questions, find answers and share knowledge on our Discussion Forum&lt;/p&gt;&lt;button&gt;&lt;div data-gatsby-image-wrapper=&quot;&quot; class=&quot;gatsby-image-wrapper gatsby-image-wrapper-constrained logo&quot;&gt;&lt;div style=&quot;max-width:1986px;display:block&quot;&gt;&lt;img alt=&quot;&quot; role=&quot;presentation&quot; aria-hidden=&quot;true&quot; src=&quot;data:image/svg+xml;charset=utf-8,%3Csvg height=&amp;#x27;284&amp;#x27; width=&amp;#x27;1986&amp;#x27; xmlns=&amp;#x27;http://www.w3.org/2000/svg&amp;#x27; version=&amp;#x27;1.1&amp;#x27;%3E%3C/svg%3E&quot; style=&quot;max-width:100%;display:block;position:static&quot;/&gt;&lt;/div&gt;&lt;img aria-hidden=&quot;true&quot; data-placeholder-image=&quot;&quot; style=&quot;opacity:1;transition:opacity 500ms linear&quot; decoding=&quot;async&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVQI1wXBTStEURgH8HMZmqRIyWZKKbGwVCg75S3DemRSZOVT2GGhLFlpUmymLIyND2BFmb0sNGLG6Drvz7n/cx+/n/CexgCUYowCwFQGrAOYA1DOMuw4ojVmrr47uSFerreTxtXSbuOhn786vT9pOqS0Gc6AREqVfLQ+E+E9LeR5vs/MfUA8B+INgBMARwBqjuiQEetv+u9MNC6Pk8fa6eLTfYnbXPj+7c4Ya7eMtWXr3Lw2ZlNoY0ZDCHtEYZWIKhRCxVg74byfphAOjHPLHPPJZrczK+oXK8nrbXW8eTfCKfc8t1sFqVRRKjWgtC5KpQf/AY1Dr0qQjQfLAAAAAElFTkSuQmCC&quot; alt=&quot;&quot;/&gt;&lt;picture&gt;&lt;source type=&quot;image/webp&quot; data-srcset=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/1a28c/layer5-discuss-white.webp 497w,/static/0d33a588c7c7a10b957cb1686c03a222/c8e14/layer5-discuss-white.webp 993w,/static/0d33a588c7c7a10b957cb1686c03a222/b54e4/layer5-discuss-white.webp 1986w&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot;/&gt;&lt;img data-gatsby-image-ssr=&quot;&quot; data-main-image=&quot;&quot; style=&quot;opacity:0&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot; decoding=&quot;async&quot; loading=&quot;lazy&quot; data-src=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png&quot; data-srcset=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/eba7c/layer5-discuss-white.png 497w,/static/0d33a588c7c7a10b957cb1686c03a222/a3903/layer5-discuss-white.png 993w,/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png 1986w&quot; alt=&quot;Discuss&quot;/&gt;&lt;/picture&gt;&lt;noscript&gt;&lt;picture&gt;&lt;source type=&quot;image/webp&quot; srcSet=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/1a28c/layer5-discuss-white.webp 497w,/static/0d33a588c7c7a10b957cb1686c03a222/c8e14/layer5-discuss-white.webp 993w,/static/0d33a588c7c7a10b957cb1686c03a222/b54e4/layer5-discuss-white.webp 1986w&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot;/&gt;&lt;img data-gatsby-image-ssr=&quot;&quot; data-main-image=&quot;&quot; style=&quot;opacity:0&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot; decoding=&quot;async&quot; loading=&quot;lazy&quot; src=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png&quot; srcSet=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/eba7c/layer5-discuss-white.png 497w,/static/0d33a588c7c7a10b957cb1686c03a222/a3903/layer5-discuss-white.png 993w,/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png 1986w&quot; alt=&quot;Discuss&quot;/&gt;&lt;/picture&gt;&lt;/noscript&gt;&lt;script type=&quot;module&quot;&gt;const t=&quot;undefined&quot;!=typeof HTMLImageElement&amp;&amp;&quot;loading&quot;in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(&quot;img[data-main-image]&quot;);for(let e of t){e.dataset.src&amp;&amp;(e.setAttribute(&quot;src&quot;,e.dataset.src),e.removeAttribute(&quot;data-src&quot;)),e.dataset.srcset&amp;&amp;(e.setAttribute(&quot;srcset&quot;,e.dataset.srcset),e.removeAttribute(&quot;data-srcset&quot;));const t=e.parentNode.querySelectorAll(&quot;source[data-srcset]&quot;);for(let e of t)e.setAttribute(&quot;srcset&quot;,e.dataset.srcset),e.removeAttribute(&quot;data-srcset&quot;);e.complete&amp;&amp;(e.style.opacity=1)}}&lt;/script&gt;&lt;/div&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Layer5 FAQs]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Layer5 FAQs",
  "thumbnail": "../../../assets/images/layer5/layer5-tagline/png/layer5-tag-dark-bg.png",
  "category": "FAQ",
  "tags": ["Layer5", "FAQ"],
  "type": "FAQ",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", null, mdx(FAQ, {
    category: ["Layer5"],
    mdxType: "FAQ"
  }))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/faq/layer5-faqs</link><guid isPermaLink="false">https://layer5.io/resources/faq/layer5-faqs</guid><enclosure url="https://layer5.io/static/078ee5ca788507b492122ff452c54c25/layer5-tag-dark-bg.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div&gt;&lt;section id=&quot;faq&quot; class=&quot;faqSectionstyle__FaqSectionWrapper-sc-197kv4v-0 iPiXYd&quot;&gt;&lt;div class=&quot;Container__ContainerWrapper-sc-1i64mot-0 eZMKUd&quot;&gt;&lt;div class=&quot;SectionTitle__TitleWrap-sc-1r9bvfi-0 cfYUXe section-title&quot;&gt;&lt;h1&gt;&lt;span&gt;Frequently Asked Questions&lt;/span&gt;&lt;/h1&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;Accordion&quot; class=&quot;accordionstyle__AccordionWrapper-sc-zq6yo-0 wUaHE reusecore__accordion&quot;&gt;&lt;h2 class=&quot;category_name&quot;&gt;Layer5&lt;/h2&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-4&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-4&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;Are Layer5&amp;#x27;s solutions open source?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-4&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Yes, all of Layer5&amp;#x27;s projects are licensed under Apache v2.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Layer5 also offers extensions to the Meshery project in which Enterprise-centric functionality is commercially offered and supported.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-5&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-5&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;As a member of one of Layer5&amp;#x27;s GitHub organizations, What is expected of me?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-5&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;As a member of one of Layer5&amp;#x27;s GitHub organizations, your user account is entitled with triage level permissions across all repositories in the org. You are expected to engage where the topic strikes your interest, triaging (assigning, clarifying, labeling, qualifying) any issue you feel comfortable doing so. You are encouraged to review any open pull request and offer feedback to or ask questions to the author.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Layer5 has a number of GitHub organziations in which it&amp;#x27;s projects are advanced. See the repository overview below.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;https://docs.google.com/document/d/1brtiJhdzal_O6NBZU_JQXiBff2InNtmgL_G1JgAiZtk/edit&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Layer5 Repository Overview&quot;&gt; Layer5 Repository Overview&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-6&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-6&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;As a community member, what can I expect from Layer5? What does Layer5 expect of me?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-6&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;The Layer5 community expects you to get as much or more out of your time than you give to the projects. We expect earnest effort from its contributors. What “earnest effort” means is different for each community member as all have different circumstances. Suffice to say, the more you put into your efforts, the greater your reward will be. Most community contributors stay with the project for many months, if not indefinitely. Length of involvement is entirely up to the individual community member. You can expect to be challenged, to be assisted, to learn, to be recognized for your effort and to have your contributions appreciated.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;As a member of the Layer5 community, you are expected to be a good representative of Layer5&amp;#x27;s cultures and values of helping fellow members and paying it forward as we all learn together. You are expected to offer your ideas and skills to help advance our community and its projects. You are expected to share your experiences with others, to be curious, to be helpful, to ask questions, to challenge others and to be challenged yourself, to spread the word about what we collectively do here, to invite new members, to learn, to share, to make friends, to build a network, to write blog posts, to tweet, to become maintainers, to become MeshMates, to earn an internship, to get hired by Layer5 - - any and all of these things.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;https://layer5.io/community/meshmates&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Reach out to a MeshMate to find out more&quot;&gt; Reach out to a MeshMate to find out more&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-7&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-7&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;I see works of other contributors being highlighted. Will my contributions be highlighted, too?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-7&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;We might not get to everyone, but we try to elevate the works of all of our contributors. All of our community members are proud of their work and so are we! We want their work and names to be recognized across our collective technology industry. Make sure that you follow and engage with the Twitter, YouTube, and LinkedIn accounts.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;https://twitter.com/layer5&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Layer5 on Twitter&quot;&gt; Layer5 on Twitter&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-8&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-8&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;I am not a coder. Can I contribute, too?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-8&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Some community members join to contribute to open source projects, others jump in to put those projects to use, some are here to help cultivate and steward our community, while others are here just to hangout and absorb. All members are most welcome. Make sure that you introduce yourself in the Layer5 Slack and let other community members get acquainted with you and vice-versa.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;https://slack.layer5.io&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Layer5 Slack&quot;&gt; Layer5 Slack&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;askus_section&quot;&gt;&lt;h2&gt;Didn&amp;#x27;t find an answer to your question?&lt;/h2&gt;&lt;div class=&quot;Contact-Modal__ContactFormModalWrapper-sc-1sqlxv4-0 TKQLf&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn open-modal-btn&quot; title=&quot;Just Ask&quot;&gt; Just Ask&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;discussstyle__DiscussWrapper-sc-pb6iu-0 fWjVwU&quot;&gt;&lt;div class=&quot;explain&quot;&gt;&lt;div class=&quot;cards&quot;&gt;&lt;div class=&quot;Col__ColWrapper-sc-ozrpdq-0 fPuLpy col&quot;&gt;&lt;a href=&quot;https://discuss.layer5.io/&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;parentcard&quot;&gt;&lt;div class=&quot;SectionTitle__TitleWrap-sc-1r9bvfi-0 jfQSCp section-title&quot;&gt;&lt;h2&gt;Join the Conversation&lt;/h2&gt;&lt;p&gt;Ask questions, find answers and share knowledge on our Discussion Forum&lt;/p&gt;&lt;button&gt;&lt;div data-gatsby-image-wrapper=&quot;&quot; class=&quot;gatsby-image-wrapper gatsby-image-wrapper-constrained logo&quot;&gt;&lt;div style=&quot;max-width:1986px;display:block&quot;&gt;&lt;img alt=&quot;&quot; role=&quot;presentation&quot; aria-hidden=&quot;true&quot; src=&quot;data:image/svg+xml;charset=utf-8,%3Csvg height=&amp;#x27;284&amp;#x27; width=&amp;#x27;1986&amp;#x27; xmlns=&amp;#x27;http://www.w3.org/2000/svg&amp;#x27; version=&amp;#x27;1.1&amp;#x27;%3E%3C/svg%3E&quot; style=&quot;max-width:100%;display:block;position:static&quot;/&gt;&lt;/div&gt;&lt;img aria-hidden=&quot;true&quot; data-placeholder-image=&quot;&quot; style=&quot;opacity:1;transition:opacity 500ms linear&quot; decoding=&quot;async&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVQI1wXBTStEURgH8HMZmqRIyWZKKbGwVCg75S3DemRSZOVT2GGhLFlpUmymLIyND2BFmb0sNGLG6Drvz7n/cx+/n/CexgCUYowCwFQGrAOYA1DOMuw4ojVmrr47uSFerreTxtXSbuOhn786vT9pOqS0Gc6AREqVfLQ+E+E9LeR5vs/MfUA8B+INgBMARwBqjuiQEetv+u9MNC6Pk8fa6eLTfYnbXPj+7c4Ya7eMtWXr3Lw2ZlNoY0ZDCHtEYZWIKhRCxVg74byfphAOjHPLHPPJZrczK+oXK8nrbXW8eTfCKfc8t1sFqVRRKjWgtC5KpQf/AY1Dr0qQjQfLAAAAAElFTkSuQmCC&quot; alt=&quot;&quot;/&gt;&lt;picture&gt;&lt;source type=&quot;image/webp&quot; data-srcset=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/1a28c/layer5-discuss-white.webp 497w,/static/0d33a588c7c7a10b957cb1686c03a222/c8e14/layer5-discuss-white.webp 993w,/static/0d33a588c7c7a10b957cb1686c03a222/b54e4/layer5-discuss-white.webp 1986w&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot;/&gt;&lt;img data-gatsby-image-ssr=&quot;&quot; data-main-image=&quot;&quot; style=&quot;opacity:0&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot; decoding=&quot;async&quot; loading=&quot;lazy&quot; data-src=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png&quot; data-srcset=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/eba7c/layer5-discuss-white.png 497w,/static/0d33a588c7c7a10b957cb1686c03a222/a3903/layer5-discuss-white.png 993w,/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png 1986w&quot; alt=&quot;Discuss&quot;/&gt;&lt;/picture&gt;&lt;noscript&gt;&lt;picture&gt;&lt;source type=&quot;image/webp&quot; srcSet=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/1a28c/layer5-discuss-white.webp 497w,/static/0d33a588c7c7a10b957cb1686c03a222/c8e14/layer5-discuss-white.webp 993w,/static/0d33a588c7c7a10b957cb1686c03a222/b54e4/layer5-discuss-white.webp 1986w&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot;/&gt;&lt;img data-gatsby-image-ssr=&quot;&quot; data-main-image=&quot;&quot; style=&quot;opacity:0&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot; decoding=&quot;async&quot; loading=&quot;lazy&quot; src=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png&quot; srcSet=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/eba7c/layer5-discuss-white.png 497w,/static/0d33a588c7c7a10b957cb1686c03a222/a3903/layer5-discuss-white.png 993w,/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png 1986w&quot; alt=&quot;Discuss&quot;/&gt;&lt;/picture&gt;&lt;/noscript&gt;&lt;script type=&quot;module&quot;&gt;const t=&quot;undefined&quot;!=typeof HTMLImageElement&amp;&amp;&quot;loading&quot;in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(&quot;img[data-main-image]&quot;);for(let e of t){e.dataset.src&amp;&amp;(e.setAttribute(&quot;src&quot;,e.dataset.src),e.removeAttribute(&quot;data-src&quot;)),e.dataset.srcset&amp;&amp;(e.setAttribute(&quot;srcset&quot;,e.dataset.srcset),e.removeAttribute(&quot;data-srcset&quot;));const t=e.parentNode.querySelectorAll(&quot;source[data-srcset]&quot;);for(let e of t)e.setAttribute(&quot;srcset&quot;,e.dataset.srcset),e.removeAttribute(&quot;data-srcset&quot;);e.complete&amp;&amp;(e.style.opacity=1)}}&lt;/script&gt;&lt;/div&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Meshery FAQs]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Meshery FAQs",
  "thumbnail": "../../../assets/images/meshery/full-logo/meshery-logo-tag-dark-text-side.png",
  "category": "FAQ",
  "tags": ["Meshery", "FAQ"],
  "type": "FAQ",
  "product": "Meshery",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", null, mdx(FAQ, {
    category: ["Meshery"],
    mdxType: "FAQ"
  }))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/faq/meshery-faqs</link><guid isPermaLink="false">https://layer5.io/resources/faq/meshery-faqs</guid><enclosure url="https://layer5.io/static/eca348efb0259f2dcdd1cfa1dd19da69/meshery-logo-tag-dark-text-side.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div&gt;&lt;section id=&quot;faq&quot; class=&quot;faqSectionstyle__FaqSectionWrapper-sc-197kv4v-0 iPiXYd&quot;&gt;&lt;div class=&quot;Container__ContainerWrapper-sc-1i64mot-0 eZMKUd&quot;&gt;&lt;div class=&quot;SectionTitle__TitleWrap-sc-1r9bvfi-0 cfYUXe section-title&quot;&gt;&lt;h1&gt;&lt;span&gt;Frequently Asked Questions&lt;/span&gt;&lt;/h1&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;Accordion&quot; class=&quot;accordionstyle__AccordionWrapper-sc-zq6yo-0 wUaHE reusecore__accordion&quot;&gt;&lt;h2 class=&quot;category_name&quot;&gt;Meshery&lt;/h2&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-9&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-9&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;Does Meshery manage service meshes?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-9&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Yes, as the cloud native management plane, Meshery provisions and manages the lifecycle of service meshes.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;/service-mesh-management/meshery&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Run Meshery&quot;&gt; Run Meshery&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-10&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-10&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;Why do I need to authenticate my social account to use Meshery?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-10&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Create your account - avoid having to reconfigure Meshery each time you deploy it. When you use a social account to authenticate to Meshery, your environment configuration persists from session to session. Meshery sources from Mixer Prometheus adapter and uses Prometheus node-exporter.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Rank your deployment - results of performance tests are anonymously collected using the Service Mesh Performance, so that Meshery may provide the public service of ranking the speed of your deployment against that of the rest of the world&amp;#x27;s users.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-11&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-11&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;Why use Meshery?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-11&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Meshery is an open source, vendor neutral project that facilitates testing across meshes.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Other performance benchmark tools are not packaged into a mesh testing utility, but are only load-generators unto their own.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;/projects/service-mesh-performance&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Service Mesh Performance&quot;&gt; Service Mesh Performance&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-12&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-12&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;I have already selected and am operating a service mesh. Should I use Meshery?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-12&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;As a management plane, Meshery provides value in a number of ways post-adoption of a service mesh. For example, Meshery analyzes your deployments in evaluation of service mesh best practices and patterns, highlighting where you might be deviating. Meshery&amp;#x27;s Other ways can be articulated in its set of features spanning:&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Lifecycle Management&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Configuration Management&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Performance Management&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Workload Management&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;/service-mesh-management/meshery&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Meshery&quot;&gt; Meshery&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-13&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-13&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;Is Meshery open source?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-13&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Yes, all of Layer5&amp;#x27;s projects are licensed under Apache v2, including Meshery.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;As the cloud native management plane, Meshery is an extensible platform, offering multiple extension points within which users and partners can customize and extend Meshery&amp;#x27;s functionality.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;askus_section&quot;&gt;&lt;h2&gt;Didn&amp;#x27;t find an answer to your question?&lt;/h2&gt;&lt;div class=&quot;Contact-Modal__ContactFormModalWrapper-sc-1sqlxv4-0 TKQLf&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn open-modal-btn&quot; title=&quot;Just Ask&quot;&gt; Just Ask&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;discussstyle__DiscussWrapper-sc-pb6iu-0 fWjVwU&quot;&gt;&lt;div class=&quot;explain&quot;&gt;&lt;div class=&quot;cards&quot;&gt;&lt;div class=&quot;Col__ColWrapper-sc-ozrpdq-0 fPuLpy col&quot;&gt;&lt;a href=&quot;https://discuss.layer5.io/&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;parentcard&quot;&gt;&lt;div class=&quot;SectionTitle__TitleWrap-sc-1r9bvfi-0 jfQSCp section-title&quot;&gt;&lt;h2&gt;Join the Conversation&lt;/h2&gt;&lt;p&gt;Ask questions, find answers and share knowledge on our Discussion Forum&lt;/p&gt;&lt;button&gt;&lt;div data-gatsby-image-wrapper=&quot;&quot; class=&quot;gatsby-image-wrapper gatsby-image-wrapper-constrained logo&quot;&gt;&lt;div style=&quot;max-width:1986px;display:block&quot;&gt;&lt;img alt=&quot;&quot; role=&quot;presentation&quot; aria-hidden=&quot;true&quot; src=&quot;data:image/svg+xml;charset=utf-8,%3Csvg height=&amp;#x27;284&amp;#x27; width=&amp;#x27;1986&amp;#x27; xmlns=&amp;#x27;http://www.w3.org/2000/svg&amp;#x27; version=&amp;#x27;1.1&amp;#x27;%3E%3C/svg%3E&quot; style=&quot;max-width:100%;display:block;position:static&quot;/&gt;&lt;/div&gt;&lt;img aria-hidden=&quot;true&quot; data-placeholder-image=&quot;&quot; style=&quot;opacity:1;transition:opacity 500ms linear&quot; decoding=&quot;async&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVQI1wXBTStEURgH8HMZmqRIyWZKKbGwVCg75S3DemRSZOVT2GGhLFlpUmymLIyND2BFmb0sNGLG6Drvz7n/cx+/n/CexgCUYowCwFQGrAOYA1DOMuw4ojVmrr47uSFerreTxtXSbuOhn786vT9pOqS0Gc6AREqVfLQ+E+E9LeR5vs/MfUA8B+INgBMARwBqjuiQEetv+u9MNC6Pk8fa6eLTfYnbXPj+7c4Ya7eMtWXr3Lw2ZlNoY0ZDCHtEYZWIKhRCxVg74byfphAOjHPLHPPJZrczK+oXK8nrbXW8eTfCKfc8t1sFqVRRKjWgtC5KpQf/AY1Dr0qQjQfLAAAAAElFTkSuQmCC&quot; alt=&quot;&quot;/&gt;&lt;picture&gt;&lt;source type=&quot;image/webp&quot; data-srcset=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/1a28c/layer5-discuss-white.webp 497w,/static/0d33a588c7c7a10b957cb1686c03a222/c8e14/layer5-discuss-white.webp 993w,/static/0d33a588c7c7a10b957cb1686c03a222/b54e4/layer5-discuss-white.webp 1986w&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot;/&gt;&lt;img data-gatsby-image-ssr=&quot;&quot; data-main-image=&quot;&quot; style=&quot;opacity:0&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot; decoding=&quot;async&quot; loading=&quot;lazy&quot; data-src=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png&quot; data-srcset=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/eba7c/layer5-discuss-white.png 497w,/static/0d33a588c7c7a10b957cb1686c03a222/a3903/layer5-discuss-white.png 993w,/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png 1986w&quot; alt=&quot;Discuss&quot;/&gt;&lt;/picture&gt;&lt;noscript&gt;&lt;picture&gt;&lt;source type=&quot;image/webp&quot; srcSet=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/1a28c/layer5-discuss-white.webp 497w,/static/0d33a588c7c7a10b957cb1686c03a222/c8e14/layer5-discuss-white.webp 993w,/static/0d33a588c7c7a10b957cb1686c03a222/b54e4/layer5-discuss-white.webp 1986w&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot;/&gt;&lt;img data-gatsby-image-ssr=&quot;&quot; data-main-image=&quot;&quot; style=&quot;opacity:0&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot; decoding=&quot;async&quot; loading=&quot;lazy&quot; src=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png&quot; srcSet=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/eba7c/layer5-discuss-white.png 497w,/static/0d33a588c7c7a10b957cb1686c03a222/a3903/layer5-discuss-white.png 993w,/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png 1986w&quot; alt=&quot;Discuss&quot;/&gt;&lt;/picture&gt;&lt;/noscript&gt;&lt;script type=&quot;module&quot;&gt;const t=&quot;undefined&quot;!=typeof HTMLImageElement&amp;&amp;&quot;loading&quot;in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(&quot;img[data-main-image]&quot;);for(let e of t){e.dataset.src&amp;&amp;(e.setAttribute(&quot;src&quot;,e.dataset.src),e.removeAttribute(&quot;data-src&quot;)),e.dataset.srcset&amp;&amp;(e.setAttribute(&quot;srcset&quot;,e.dataset.srcset),e.removeAttribute(&quot;data-srcset&quot;));const t=e.parentNode.querySelectorAll(&quot;source[data-srcset]&quot;);for(let e of t)e.setAttribute(&quot;srcset&quot;,e.dataset.srcset),e.removeAttribute(&quot;data-srcset&quot;);e.complete&amp;&amp;(e.style.opacity=1)}}&lt;/script&gt;&lt;/div&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Service Mesh FAQs]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Service Mesh FAQs",
  "thumbnail": "../../../assets/images/service-mesh-icons/service-mesh.svg",
  "category": "FAQ",
  "tags": ["Service Mesh", "FAQ"],
  "type": "FAQ",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", null, mdx(FAQ, {
    category: ["Service Mesh"],
    mdxType: "FAQ"
  }))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/faq/service-mesh-faqs</link><guid isPermaLink="false">https://layer5.io/resources/faq/service-mesh-faqs</guid><enclosure url="https://layer5.io/static/cb310234b6631abcabb632a85974a3dd/service-mesh.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div&gt;&lt;section id=&quot;faq&quot; class=&quot;faqSectionstyle__FaqSectionWrapper-sc-197kv4v-0 iPiXYd&quot;&gt;&lt;div class=&quot;Container__ContainerWrapper-sc-1i64mot-0 eZMKUd&quot;&gt;&lt;div class=&quot;SectionTitle__TitleWrap-sc-1r9bvfi-0 cfYUXe section-title&quot;&gt;&lt;h1&gt;&lt;span&gt;Frequently Asked Questions&lt;/span&gt;&lt;/h1&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;Accordion&quot; class=&quot;accordionstyle__AccordionWrapper-sc-zq6yo-0 wUaHE reusecore__accordion&quot;&gt;&lt;h2 class=&quot;category_name&quot;&gt;Service Mesh&lt;/h2&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-14&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-14&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;What value does a service mesh provide?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-14&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Service meshes provide visibility, resiliency, traffic, and security control of distributed application services. Much value is promised here, particularly to the extent that much is given without the need to change your application code.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-15&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-15&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;What if I deploy one service mesh, like Istio, then need to switch to another service mesh?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-15&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Use of Meshery and the Service Mesh Interface specification help avoid switching costs between service meshes.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;The goal of Service Mesh Interface specifications are to provide an abstract, unified method of interacting with a service mesh.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;See if your service mesh adheres to SMI specifications at the link below.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;/projects/service-mesh-interface-conformance&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Service Mesh Interface&quot;&gt; Service Mesh Interface&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-16&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-16&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;What are service mesh standards and why do they matter?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-16&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Three service mesh abstractions have arisen given the high number of service meshes available (see the Service Mesh Landscape)&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Servcie Mesh Performance (SMP) - A standard for capturing and characterizing service mesh performance.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Service Mesh Interface (SMI) - A standard interface for using common service mesh functionality on Kubernetes.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Multi-Vendor Service Mesh Interoperation (Hamlet) - A set of API standards for enabling service mesh federation.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;https://calcotestudios.com/talks/decks/slides-open-infrastructure-summit-2020-its-a-multi-mesh-world.html&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;See Open Infrastructure Summit Presentation&quot;&gt; See Open Infrastructure Summit Presentation&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-17&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-17&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;How does a service mesh help me? in my role?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-17&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Operators don’t necessarily need to involve Developers to change how many times a service should retry before timing out or to run experiments (known as chaos engineering). They are empowered to affect service behavior independently.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Customer Success (support) teams can handle the revocation of client access without involving Operators.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Product Owners can use quota management to enforce price plan limitations for quantity-based consumption of particular services.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Developers can redirect their internal stakeholders to a canary with beta functionality without involving Operators.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Security Engineers can declaratively define authentication and authorization policies, enforced by the service mesh.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Network Engineers are empowered with an extraordinarily high degree of application-level control formerly simply unavailable to them.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-18&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-18&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;What is a service mesh?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-18&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Service meshes provide intent-based networking for microservices describing desired behavior of the network in the face of constantly changing conditions and network topology. At their core, service meshes provide:&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;A services-first network; A developer-driven network;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;A network that is primarily concerned with alleviating application developers from building infrastructure concerns into their application code; A network that empowers operators with the ability to declaratively define network behavior, node identity, and traffic flow through policy;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;A network that enables service owners to control application logic without engaging developers to change its code.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Value derived from the layer of tooling that service meshes provide is most evident in the land of microservices. The more services, the more value derived from the mesh. In subsequent chapters, I show how service meshes provide value outside of the use of microservices and containers and help modernize existing services (running on virtual or bare metal servers) as well.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItem&quot; class=&quot;accordionstyle__AccordionItemWrapper-sc-zq6yo-1 cwuCUo accordion__item&quot;&gt;&lt;div data-accordion-component=&quot;AccordionItemHeading&quot; class=&quot;accordionstyle__AccordionTitleWrapper-sc-zq6yo-4 euxeaJ accordion__header&quot; role=&quot;heading&quot; aria-level=&quot;3&quot;&gt;&lt;div class=&quot;accordionstyle__AccordionItemButtonWrapper-sc-zq6yo-5 ilNMiK&quot; id=&quot;accordion__heading-raa-19&quot; aria-disabled=&quot;false&quot; aria-expanded=&quot;false&quot; aria-controls=&quot;accordion__panel-raa-19&quot; role=&quot;button&quot; tabindex=&quot;0&quot; data-accordion-component=&quot;AccordionItemButton&quot;&gt;&lt;div class=&quot;accordionstyle__IconWrapper-sc-zq6yo-7 jCBZFW&quot;&gt;&lt;h5&gt;When should I adopt a service mesh?&lt;/h5&gt;&lt;div class=&quot;accordionstyle__OpenIcon-sc-zq6yo-2 eqQQKC&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div class=&quot;accordionstyle__CloseIcon-sc-zq6yo-3 fVIWdl&quot;&gt;&lt;svg stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; viewBox=&quot;0 0 512 512&quot; color=&quot;white&quot; style=&quot;color:white&quot; height=&quot;22&quot; width=&quot;22&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div data-accordion-component=&quot;AccordionItemPanel&quot; class=&quot;accordionstyle__AccordionBodyWrapper-sc-zq6yo-6 llPzmQ accordion__body&quot; aria-hidden=&quot;true&quot; id=&quot;accordion__panel-raa-19&quot; hidden=&quot;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;There are many service meshes to choose from as well as a variety of deployment models. Which is right for you and your organization depends on where you are in your maturity curve (Cloud Native skill set), number of services, underlying infrastructure, and how centric technology is to your business. &lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;So, should you deploy a service mesh? More and more the answer is “yes”. Service meshes are quickly becoming a ubiquitous layer in modern infrastructures.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;faqbutton&quot;&gt;&lt;a href=&quot;/deploy-service-mesh&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn faqbutton&quot; title=&quot;Factors When considering how strongly you need a service mesh&quot;&gt; Factors When considering how strongly you need a service mesh&lt;/button&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;askus_section&quot;&gt;&lt;h2&gt;Didn&amp;#x27;t find an answer to your question?&lt;/h2&gt;&lt;div class=&quot;Contact-Modal__ContactFormModalWrapper-sc-1sqlxv4-0 TKQLf&quot;&gt;&lt;button class=&quot;btnstyle__ButtonStyle-sc-mhxpaj-0 IBuPZ appion__btn open-modal-btn&quot; title=&quot;Just Ask&quot;&gt; Just Ask&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;discussstyle__DiscussWrapper-sc-pb6iu-0 fWjVwU&quot;&gt;&lt;div class=&quot;explain&quot;&gt;&lt;div class=&quot;cards&quot;&gt;&lt;div class=&quot;Col__ColWrapper-sc-ozrpdq-0 fPuLpy col&quot;&gt;&lt;a href=&quot;https://discuss.layer5.io/&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;parentcard&quot;&gt;&lt;div class=&quot;SectionTitle__TitleWrap-sc-1r9bvfi-0 jfQSCp section-title&quot;&gt;&lt;h2&gt;Join the Conversation&lt;/h2&gt;&lt;p&gt;Ask questions, find answers and share knowledge on our Discussion Forum&lt;/p&gt;&lt;button&gt;&lt;div data-gatsby-image-wrapper=&quot;&quot; class=&quot;gatsby-image-wrapper gatsby-image-wrapper-constrained logo&quot;&gt;&lt;div style=&quot;max-width:1986px;display:block&quot;&gt;&lt;img alt=&quot;&quot; role=&quot;presentation&quot; aria-hidden=&quot;true&quot; src=&quot;data:image/svg+xml;charset=utf-8,%3Csvg height=&amp;#x27;284&amp;#x27; width=&amp;#x27;1986&amp;#x27; xmlns=&amp;#x27;http://www.w3.org/2000/svg&amp;#x27; version=&amp;#x27;1.1&amp;#x27;%3E%3C/svg%3E&quot; style=&quot;max-width:100%;display:block;position:static&quot;/&gt;&lt;/div&gt;&lt;img aria-hidden=&quot;true&quot; data-placeholder-image=&quot;&quot; style=&quot;opacity:1;transition:opacity 500ms linear&quot; decoding=&quot;async&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVQI1wXBTStEURgH8HMZmqRIyWZKKbGwVCg75S3DemRSZOVT2GGhLFlpUmymLIyND2BFmb0sNGLG6Drvz7n/cx+/n/CexgCUYowCwFQGrAOYA1DOMuw4ojVmrr47uSFerreTxtXSbuOhn786vT9pOqS0Gc6AREqVfLQ+E+E9LeR5vs/MfUA8B+INgBMARwBqjuiQEetv+u9MNC6Pk8fa6eLTfYnbXPj+7c4Ya7eMtWXr3Lw2ZlNoY0ZDCHtEYZWIKhRCxVg74byfphAOjHPLHPPJZrczK+oXK8nrbXW8eTfCKfc8t1sFqVRRKjWgtC5KpQf/AY1Dr0qQjQfLAAAAAElFTkSuQmCC&quot; alt=&quot;&quot;/&gt;&lt;picture&gt;&lt;source type=&quot;image/webp&quot; data-srcset=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/1a28c/layer5-discuss-white.webp 497w,/static/0d33a588c7c7a10b957cb1686c03a222/c8e14/layer5-discuss-white.webp 993w,/static/0d33a588c7c7a10b957cb1686c03a222/b54e4/layer5-discuss-white.webp 1986w&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot;/&gt;&lt;img data-gatsby-image-ssr=&quot;&quot; data-main-image=&quot;&quot; style=&quot;opacity:0&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot; decoding=&quot;async&quot; loading=&quot;lazy&quot; data-src=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png&quot; data-srcset=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/eba7c/layer5-discuss-white.png 497w,/static/0d33a588c7c7a10b957cb1686c03a222/a3903/layer5-discuss-white.png 993w,/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png 1986w&quot; alt=&quot;Discuss&quot;/&gt;&lt;/picture&gt;&lt;noscript&gt;&lt;picture&gt;&lt;source type=&quot;image/webp&quot; srcSet=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/1a28c/layer5-discuss-white.webp 497w,/static/0d33a588c7c7a10b957cb1686c03a222/c8e14/layer5-discuss-white.webp 993w,/static/0d33a588c7c7a10b957cb1686c03a222/b54e4/layer5-discuss-white.webp 1986w&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot;/&gt;&lt;img data-gatsby-image-ssr=&quot;&quot; data-main-image=&quot;&quot; style=&quot;opacity:0&quot; sizes=&quot;(min-width: 1986px) 1986px, 100vw&quot; decoding=&quot;async&quot; loading=&quot;lazy&quot; src=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png&quot; srcSet=&quot;/static/0d33a588c7c7a10b957cb1686c03a222/eba7c/layer5-discuss-white.png 497w,/static/0d33a588c7c7a10b957cb1686c03a222/a3903/layer5-discuss-white.png 993w,/static/0d33a588c7c7a10b957cb1686c03a222/c6bb9/layer5-discuss-white.png 1986w&quot; alt=&quot;Discuss&quot;/&gt;&lt;/picture&gt;&lt;/noscript&gt;&lt;script type=&quot;module&quot;&gt;const t=&quot;undefined&quot;!=typeof HTMLImageElement&amp;&amp;&quot;loading&quot;in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll(&quot;img[data-main-image]&quot;);for(let e of t){e.dataset.src&amp;&amp;(e.setAttribute(&quot;src&quot;,e.dataset.src),e.removeAttribute(&quot;data-src&quot;)),e.dataset.srcset&amp;&amp;(e.setAttribute(&quot;srcset&quot;,e.dataset.srcset),e.removeAttribute(&quot;data-srcset&quot;));const t=e.parentNode.querySelectorAll(&quot;source[data-srcset]&quot;);for(let e of t)e.setAttribute(&quot;srcset&quot;,e.dataset.srcset),e.removeAttribute(&quot;data-srcset&quot;);e.complete&amp;&amp;(e.style.opacity=1)}}&lt;/script&gt;&lt;/div&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Istio v1.5 at a Glance]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Istio v1.5 at a Glance",
  "thumbnail": "../../../assets/images/service-mesh-icons/istio.svg",
  "category": "Service Mesh",
  "tags": ["Istio", "Network Planes"],
  "type": "Article",
  "mesh": "Istio",
  "technology": "Kubernetes",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("h2", null, "Planes"), mdx("p", null, "The ", mdx("strong", null, "data plane"), " in Istio intercepts each packet in the request and performs health checks, routing, load balancing, authorization, authentication,  and generation of observable signals. Service proxies are transparently placed in-band, and applications are oblivious of the data plane's presence when they conduct service-to-service calls. Intra-cluster communication and inbound (ingress), and outgoing (egress) cluster network traffic are handled by data planes. Application service traffic is directed first to the service proxy for processing, whether it is entering or leaving the mesh (ingressing or egressing). Istio's traffic is transparently intercepted and redirected to the service proxy using iptables rules."), mdx("p", null, "Istio's ", mdx("strong", null, "control plane"), " provides a single point of administration for service proxies, which require programmatic configuration due to the need to manage a large number of them efficiently and have their configuration updated in real-time as services are rescheduled around your environment (i.e., container cluster). Control planes offer policy and configuration for the mesh's services, transforming a collection of isolated, stateless proxies into a service mesh. The control planes do not directly touch any network packets in the mesh. They operate out-of-band. Control planes usually feature a command line interface and a user interface, both of which provide access to a centralized API for regulating proxy behavior holistically. Changes to control plane configuration can be automated using its APIs (for example, using a CI/CD pipeline), however configuration is usually version-controlled and updated in practise. To summarize, Istio's control plane:"), mdx("ul", null, mdx("li", null, "Provides policy and configuration for services in the mesh.", mdx("ul", null, mdx("li", null, "APIs for operators to specify desired routing/resilience behavior."))), mdx("li", null, "Takes a set of isolated stateless sidecar proxies and turns them into a service mesh.", mdx("ul", null, mdx("li", null, "APIs for the data plane to consume localized configuration."), mdx("li", null, "Service discovery abstraction for the data plane."))), mdx("li", null, "APIs for specifying usage policies", mdx("ul", null, mdx("li", null, "Quota and Usage restrictions"))), mdx("li", null, "Security", mdx("ul", null, mdx("li", null, "Certificate issuance and rotation"), mdx("li", null, "Assigning workload identity"))), mdx("li", null, "Routing configuration", mdx("ul", null, mdx("li", null, "Does not touch any packets/requests in the system."), mdx("li", null, "Specifying network boundaries and how to access them"))), mdx("li", null, "Unified telemetry collection")), mdx("h3", null, "Istio Control Plane Components"), "We'll go over the high-level functionality of each control plane component in this section.", mdx("h4", null, "Pilot"), mdx("p", null, "Pilot is the head of the ship in an Istio mesh. Pilot keeps in sync with the underlying platform (e.g., Kubernetes) by tracking and representing the state and location of running services to the data plane.\xA0Pilot communicates with the service discovery system in your environment and generates configuration for data plane service proxy."), mdx("p", null, "As Istio evolves, Pilot's focus will shift\xA0from interfacing with underlying platforms towards scalable serving of proxy configuration. It provides Envoy-compatible configuration by integrating configuration and endpoint information from multiple sources and translating it into xDS objects. Galley, another component, will eventually take responsibility for interfacing directly\xA0with underlying platforms."), mdx("h4", null, "Galley"), mdx("p", null, "Galley is Istio's configuration aggregation and dissemination component. As its role progresses, it will insulate the rest of Istio's components from the underlying platform and user-supplied configuration by ingesting and validating configuration. Galley uses the Mesh Configuration Protocol (MCP) as a mechanism for serving and distributing configuration."), mdx("h4", null, "Mixer"), mdx("p", null, "Mixer is a stand-alone control plane component that abstracts infrastructure backends from the rest of Istio. Infrastructure backends include things like Stackdriver and New Relic. Precondition checking, quota management, and telemetry reporting are all responsibilities of\xA0the\xA0Mixer."), mdx("ol", null, mdx("li", null, "Enables platform & environment mobility"), mdx("li", null, "Responsible for providing granular control over operational policies and telemetry for policy evaluation and telemetry reporting"), mdx("li", null, "Has a rich configuration model"), mdx("li", null, "Most infrastructure concerns are abstracted using intent-based configuration")), mdx("p", null, "Mixer is used by service proxies and gateways to execute precondition checks to assess whether a request should be allowed to proceed (check) or has exceeded quota depending on communication between the caller and the service, and to report telemetry once a request has completed (report). Mixer uses a set of native and third-party adapters to interface to infrastructure backends. Which telemetry is sent to which backend at what time is determined by adapter configuration. Mixer's adapters, which act as an attribute processing and routing engine, can be used by service mesh operators as a point of integration and intermediation with their infrastructure backends."), mdx("h4", null, "Citadel"), mdx("p", null, "Citadel gives Istio the ability to deliver strong service-to-service and end-user authentication via mutual TLS, as well as built-in identity and credential management. Citadel's certificate authority (CA) component\xA0handles key and certificate generation, deployment, rotation, revocation, and approving and signing certificate signing requests (CSRs) sent by Citadel agents. Citadel has the (optional) ability to interact with an Identity Directory during the certificate approval process."), mdx("p", null, "Citadel offers a pluggable architecture that allows alternative certificate authorities (CAs) to sign workload certificates instead of Citadel's self-generated, self-signed signing key and certificate. Istio's CA pluggability enables and facilitates:"), mdx("ul", null, mdx("li", null, "Integration with your organization\u2019s existing Public Key Infrastructure (PKI) system."), mdx("li", null, "Secure communication between Istio services and non-Istio legacy services (by sharing the same root of trust)"), mdx("li", null, "Protection of the CA signing key by storing it in a well-protected environment (e.g. Vault + HSM)")), mdx("h3", null, "Istio Data Plane Components"), mdx("p", null, "To mediate both inbound and outbound traffic for all services in the service mesh, Istio uses an extended version of Envoy, a high-performance proxy written in C++. Istio utilizes\xA0 Envoy's\xA0capabilities like dynamic service discovery, load balancing, TLS termination, HTTP/2 and gRPC proxying, circuit breakers, health checks, staged rollouts with %-based\xA0traffic split, fault injection, and rich metrics."), mdx("p", null, "Envoy is deployed as a sidecar to the relevant service in the same Kubernetes pod. This allows Istio to extract a multitude of signals about traffic behavior as attributes, which it can use in Mixer to enforce policy decisions and be sent to monitoring systems to provide information about the behavior of the entire mesh."), mdx("h4", null, "Injection"), mdx("img", {
    src: BookinfoWithout,
    className: "image-right",
    alt: "BookInfo without proxies"
  }), mdx("p", null, "You can easily add Istio capabilities to an existing deployment without having to re-architect or rewrite code using the sidecar proxy model. This is one of the most compelling reasons to use Istio. The promises of immediate view\xA0to top-level service metrics, detailed traffic control, and automated authentication and encryption across all services without having to do either:"), mdx("ol", null, mdx("li", null, "change your application code"), mdx("li", null, "change your deployment manifests")), mdx("p", null, "Using the canonical sample application BookInfo you can see how service proxies come into play and form a mesh."), mdx("img", {
    src: BookinfoWith,
    className: "image-left",
    alt: "BookInfo with proxies"
  }), mdx("p", null, "In Kubernetes, automatic proxy injection is implemented as a webhook using a Kubernetes API Server with the Mutating Webhook Admission Controller. It is stateless, relying solely on the injection template and mesh configuration configmaps and the to-be-injected pod object. It can be easily horizontally scaled, either manually via the deployment object or automatically via a Horizontal Pod Autoscaler."), mdx("p", null, "Istio addresses one of the most well-known distributed systems issues: the lack of homogeneous, reliable, and unchanging networks. It accomplishes this by using lightweight proxies\xA0 deployed between your application containers and the network."), mdx("h3", null, "Gateways"), mdx("p", null, "Ingress and egress gateways were first introduced in Istio 0.8. Ingress and egress gateways are symmetrically similar and serve as reverse and forward proxies for traffic entering and leaving the mesh, respectively. Istio Gateways' behavior, like that of other Istio components, is defined and controlled through configuration, allowing you to specify which traffic to let in and out of the service mesh, at what rate, and so on."), mdx("h4", null, "Ingress"), mdx("p", null, "Configuration of ingress gateways allow you to define traffic entryways into the service mesh for incoming traffic to flow through. Consider that ingressing traffic into the mesh is a reverse proxy situation - akin to traditional web server load balancing. The configuration for egressing traffic out of the mesh is a forward proxy situation (similar to traditional) in which you determine which traffic to allow out of the mesh and where it should be routed."), mdx("p", null, "For example, the following Gateway configuration sets up a proxy to act as a load balancer exposing port 80 and 9080 (http), 443 (https), and port 2379 (TCP) for ingress. The gateway will be applied to the proxy running on a pod with labels app: my-gateway-controller. While Istio will configure the proxy to listen on these ports, it is the responsibility of the user to ensure that external traffic to these ports are allowed into the mesh."), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "\napiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n  name: my-gateway\nspec:\n  selector:\n    app: my-gateway-controller\n  servers:\n  - port:\n      number: 80\n      name: http\n      protocol: HTTP\n    hosts:\n    - uk.bookinfo.com\n    - eu.bookinfo.com\n    tls:\n      httpsRedirect: true # sends 301 redirect for http requests\n  - port:\n      number: 443\n      name: https\n      protocol: HTTPS\n    hosts:\n    - uk.bookinfo.com\n    - eu.bookinfo.com\n    tls:\n      mode: SIMPLE #enables HTTPS on this port\n      serverCertificate: /etc/certs/servercert.pem\n      privateKey: /etc/certs/privatekey.pem\n  - port:\n      number: 9080\n      name: http-wildcard\n      protocol: HTTP\n    hosts:\n    - \"*\"\n  - port:\n      number: 2379 # to expose internal service via external port 2379\n      name: mongo\n      protocol: MONGO\n    hosts:\n    - \"*\"\n")), mdx("h4", null, "Egress"), mdx("p", null, "Traffic can exit an Istio service mesh in two ways - directly from the sidecar or funnelled through an egress gateway, where traffic policy may be applied."), mdx("div", {
    className: "fact"
  }, "By default, Istio-enabled applications are unable to access URLs external the cluster."), mdx("h4", null, "Direct from Service Proxy"), mdx("p", null, "You can configure the ConfigMap of the istio-sidecar-injector to allow traffic headed for an external source,\xA0bypassing\xA0the egress gateway. Set the following configuration in the sidecar injector, which will identify cluster-local networks and keep traffic destined locally within the mesh, while forwarding traffic for all other destinations externally."), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "--set global.proxy.includeIPRanges=\"10.0.0.1/24\"\n")), mdx("p", null, "External requests bypass the sidecar and route directly to the intended destination once this configuration is deployed and istio proxies are updated. Only internal requests within the cluster will be intercepted and managed by the Istio sidecar."), mdx("h4", null, "Route through an Egress Gateway"), mdx("p", null, "Istio monitoring and route rules can be applied to traffic leaving the mesh through an egress gateway. It also enables communication between applications running in a cluster where the nodes lack public IP addresses, preventing the mesh's applications from accessing the Internet. The nodes (and the applications running on them) can access external services in a regulated manner by defining an egress gateway, directing all egress traffic through it, and allocating public IPs to the egress gateway nodes.\xA0"), mdx("img", {
    src: IstioArchitecture,
    className: "image-center",
    alt: "Istio Architecture"
  }), mdx("div", {
    className: "intro",
    style: {
      "textAlign": "center"
    }
  }, mdx("p", null, mdx("b", null, "Why use Istio Gateways and not Kubernetes Ingresses?")), mdx("p", null, "In general, the Istio v1alpha3 APIs leverage Gateways for richer functionality as Kubernetes Ingress has proven insufficient for Istio applications. In comparison to Kubernetes Ingress, Istio Gateways can function as a pure L4 TCP proxy and support all protocols supported by Envoy."), mdx("p", null, "Another factor to examine is the division of trust domains between organizational teams. Kubernetes Ingress API combines specification for L4 to L7, which makes it challenging for different teams in organizations with separate trust domains (such as SecOps, NetOps, ClusterOps and Developers) to own Ingress traffic management."))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/istio-v15-at-a-glance</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/istio-v15-at-a-glance</guid><enclosure url="https://layer5.io/static/731763d720780a49c2ffdfede8c28f4b/istio.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;h2&gt;Planes&lt;/h2&gt;&lt;p&gt;The &lt;strong&gt;data plane&lt;/strong&gt; in Istio intercepts each packet in the request and performs health checks, routing, load balancing, authorization, authentication,  and generation of observable signals. Service proxies are transparently placed in-band, and applications are oblivious of the data plane&amp;#x27;s presence when they conduct service-to-service calls. Intra-cluster communication and inbound (ingress), and outgoing (egress) cluster network traffic are handled by data planes. Application service traffic is directed first to the service proxy for processing, whether it is entering or leaving the mesh (ingressing or egressing). Istio&amp;#x27;s traffic is transparently intercepted and redirected to the service proxy using iptables rules.&lt;/p&gt;&lt;p&gt;Istio&amp;#x27;s &lt;strong&gt;control plane&lt;/strong&gt; provides a single point of administration for service proxies, which require programmatic configuration due to the need to manage a large number of them efficiently and have their configuration updated in real-time as services are rescheduled around your environment (i.e., container cluster). Control planes offer policy and configuration for the mesh&amp;#x27;s services, transforming a collection of isolated, stateless proxies into a service mesh. The control planes do not directly touch any network packets in the mesh. They operate out-of-band. Control planes usually feature a command line interface and a user interface, both of which provide access to a centralized API for regulating proxy behavior holistically. Changes to control plane configuration can be automated using its APIs (for example, using a CI/CD pipeline), however configuration is usually version-controlled and updated in practise. To summarize, Istio&amp;#x27;s control plane:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Provides policy and configuration for services in the mesh.&lt;ul&gt;&lt;li&gt;APIs for operators to specify desired routing/resilience behavior.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Takes a set of isolated stateless sidecar proxies and turns them into a service mesh.&lt;ul&gt;&lt;li&gt;APIs for the data plane to consume localized configuration.&lt;/li&gt;&lt;li&gt;Service discovery abstraction for the data plane.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;APIs for specifying usage policies&lt;ul&gt;&lt;li&gt;Quota and Usage restrictions&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Security&lt;ul&gt;&lt;li&gt;Certificate issuance and rotation&lt;/li&gt;&lt;li&gt;Assigning workload identity&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Routing configuration&lt;ul&gt;&lt;li&gt;Does not touch any packets/requests in the system.&lt;/li&gt;&lt;li&gt;Specifying network boundaries and how to access them&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Unified telemetry collection&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;Istio Control Plane Components&lt;/h3&gt;We&amp;#x27;ll go over the high-level functionality of each control plane component in this section.&lt;h4&gt;Pilot&lt;/h4&gt;&lt;p&gt;Pilot is the head of the ship in an Istio mesh. Pilot keeps in sync with the underlying platform (e.g., Kubernetes) by tracking and representing the state and location of running services to the data plane. Pilot communicates with the service discovery system in your environment and generates configuration for data plane service proxy.&lt;/p&gt;&lt;p&gt;As Istio evolves, Pilot&amp;#x27;s focus will shift from interfacing with underlying platforms towards scalable serving of proxy configuration. It provides Envoy-compatible configuration by integrating configuration and endpoint information from multiple sources and translating it into xDS objects. Galley, another component, will eventually take responsibility for interfacing directly with underlying platforms.&lt;/p&gt;&lt;h4&gt;Galley&lt;/h4&gt;&lt;p&gt;Galley is Istio&amp;#x27;s configuration aggregation and dissemination component. As its role progresses, it will insulate the rest of Istio&amp;#x27;s components from the underlying platform and user-supplied configuration by ingesting and validating configuration. Galley uses the Mesh Configuration Protocol (MCP) as a mechanism for serving and distributing configuration.&lt;/p&gt;&lt;h4&gt;Mixer&lt;/h4&gt;&lt;p&gt;Mixer is a stand-alone control plane component that abstracts infrastructure backends from the rest of Istio. Infrastructure backends include things like Stackdriver and New Relic. Precondition checking, quota management, and telemetry reporting are all responsibilities of the Mixer.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Enables platform &amp;amp; environment mobility&lt;/li&gt;&lt;li&gt;Responsible for providing granular control over operational policies and telemetry for policy evaluation and telemetry reporting&lt;/li&gt;&lt;li&gt;Has a rich configuration model&lt;/li&gt;&lt;li&gt;Most infrastructure concerns are abstracted using intent-based configuration&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Mixer is used by service proxies and gateways to execute precondition checks to assess whether a request should be allowed to proceed (check) or has exceeded quota depending on communication between the caller and the service, and to report telemetry once a request has completed (report). Mixer uses a set of native and third-party adapters to interface to infrastructure backends. Which telemetry is sent to which backend at what time is determined by adapter configuration. Mixer&amp;#x27;s adapters, which act as an attribute processing and routing engine, can be used by service mesh operators as a point of integration and intermediation with their infrastructure backends.&lt;/p&gt;&lt;h4&gt;Citadel&lt;/h4&gt;&lt;p&gt;Citadel gives Istio the ability to deliver strong service-to-service and end-user authentication via mutual TLS, as well as built-in identity and credential management. Citadel&amp;#x27;s certificate authority (CA) component handles key and certificate generation, deployment, rotation, revocation, and approving and signing certificate signing requests (CSRs) sent by Citadel agents. Citadel has the (optional) ability to interact with an Identity Directory during the certificate approval process.&lt;/p&gt;&lt;p&gt;Citadel offers a pluggable architecture that allows alternative certificate authorities (CAs) to sign workload certificates instead of Citadel&amp;#x27;s self-generated, self-signed signing key and certificate. Istio&amp;#x27;s CA pluggability enables and facilitates:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Integration with your organization’s existing Public Key Infrastructure (PKI) system.&lt;/li&gt;&lt;li&gt;Secure communication between Istio services and non-Istio legacy services (by sharing the same root of trust)&lt;/li&gt;&lt;li&gt;Protection of the CA signing key by storing it in a well-protected environment (e.g. Vault + HSM)&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;Istio Data Plane Components&lt;/h3&gt;&lt;p&gt;To mediate both inbound and outbound traffic for all services in the service mesh, Istio uses an extended version of Envoy, a high-performance proxy written in C++. Istio utilizes  Envoy&amp;#x27;s capabilities like dynamic service discovery, load balancing, TLS termination, HTTP/2 and gRPC proxying, circuit breakers, health checks, staged rollouts with %-based traffic split, fault injection, and rich metrics.&lt;/p&gt;&lt;p&gt;Envoy is deployed as a sidecar to the relevant service in the same Kubernetes pod. This allows Istio to extract a multitude of signals about traffic behavior as attributes, which it can use in Mixer to enforce policy decisions and be sent to monitoring systems to provide information about the behavior of the entire mesh.&lt;/p&gt;&lt;h4&gt;Injection&lt;/h4&gt;&lt;img src=&quot;static/bookinfo-without-proxies-1f5b7e7a8d9c11f49ab9fc716b333925.svg&quot; class=&quot;image-right&quot; alt=&quot;BookInfo without proxies&quot;/&gt;&lt;p&gt;You can easily add Istio capabilities to an existing deployment without having to re-architect or rewrite code using the sidecar proxy model. This is one of the most compelling reasons to use Istio. The promises of immediate view to top-level service metrics, detailed traffic control, and automated authentication and encryption across all services without having to do either:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;change your application code&lt;/li&gt;&lt;li&gt;change your deployment manifests&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Using the canonical sample application BookInfo you can see how service proxies come into play and form a mesh.&lt;/p&gt;&lt;img src=&quot;static/bookinfo-with-proxies-d74c061a66b678cac53cb59ac1c6ad66.svg&quot; class=&quot;image-left&quot; alt=&quot;BookInfo with proxies&quot;/&gt;&lt;p&gt;In Kubernetes, automatic proxy injection is implemented as a webhook using a Kubernetes API Server with the Mutating Webhook Admission Controller. It is stateless, relying solely on the injection template and mesh configuration configmaps and the to-be-injected pod object. It can be easily horizontally scaled, either manually via the deployment object or automatically via a Horizontal Pod Autoscaler.&lt;/p&gt;&lt;p&gt;Istio addresses one of the most well-known distributed systems issues: the lack of homogeneous, reliable, and unchanging networks. It accomplishes this by using lightweight proxies  deployed between your application containers and the network.&lt;/p&gt;&lt;h3&gt;Gateways&lt;/h3&gt;&lt;p&gt;Ingress and egress gateways were first introduced in Istio 0.8. Ingress and egress gateways are symmetrically similar and serve as reverse and forward proxies for traffic entering and leaving the mesh, respectively. Istio Gateways&amp;#x27; behavior, like that of other Istio components, is defined and controlled through configuration, allowing you to specify which traffic to let in and out of the service mesh, at what rate, and so on.&lt;/p&gt;&lt;h4&gt;Ingress&lt;/h4&gt;&lt;p&gt;Configuration of ingress gateways allow you to define traffic entryways into the service mesh for incoming traffic to flow through. Consider that ingressing traffic into the mesh is a reverse proxy situation - akin to traditional web server load balancing. The configuration for egressing traffic out of the mesh is a forward proxy situation (similar to traditional) in which you determine which traffic to allow out of the mesh and where it should be routed.&lt;/p&gt;&lt;p&gt;For example, the following Gateway configuration sets up a proxy to act as a load balancer exposing port 80 and 9080 (http), 443 (https), and port 2379 (TCP) for ingress. The gateway will be applied to the proxy running on a pod with labels app: my-gateway-controller. While Istio will configure the proxy to listen on these ports, it is the responsibility of the user to ensure that external traffic to these ports are allowed into the mesh.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; Gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; my&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; my&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;gateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;controller&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;servers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; http&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; HTTP&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; uk.bookinfo.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; eu.bookinfo.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;tls&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;httpsRedirect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token boolean important&quot; style=&quot;color:rgb(255, 88, 116)&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# sends 301 redirect for http requests&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;443&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; https&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; HTTPS&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; uk.bookinfo.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; eu.bookinfo.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;tls&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; SIMPLE &lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;#enables HTTPS on this port&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;serverCertificate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; /etc/certs/servercert.pem&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;privateKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; /etc/certs/privatekey.pem&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;9080&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; http&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;wildcard&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; HTTP&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:rgb(173, 219, 103)&quot;&gt;&amp;quot;*&amp;quot;&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;2379&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# to expose internal service via external port 2379&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; mongo&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;38&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; MONGO&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:rgb(173, 219, 103)&quot;&gt;&amp;quot;*&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Egress&lt;/h4&gt;&lt;p&gt;Traffic can exit an Istio service mesh in two ways - directly from the sidecar or funnelled through an egress gateway, where traffic policy may be applied.&lt;/p&gt;&lt;div class=&quot;fact&quot;&gt;By default, Istio-enabled applications are unable to access URLs external the cluster.&lt;/div&gt;&lt;h4&gt;Direct from Service Proxy&lt;/h4&gt;&lt;p&gt;You can configure the ConfigMap of the istio-sidecar-injector to allow traffic headed for an external source, bypassing the egress gateway. Set the following configuration in the sidecar injector, which will identify cluster-local networks and keep traffic destined locally within the mesh, while forwarding traffic for all other destinations externally.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;set global.proxy.includeIPRanges=&amp;quot;10.0.0.1/24&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;External requests bypass the sidecar and route directly to the intended destination once this configuration is deployed and istio proxies are updated. Only internal requests within the cluster will be intercepted and managed by the Istio sidecar.&lt;/p&gt;&lt;h4&gt;Route through an Egress Gateway&lt;/h4&gt;&lt;p&gt;Istio monitoring and route rules can be applied to traffic leaving the mesh through an egress gateway. It also enables communication between applications running in a cluster where the nodes lack public IP addresses, preventing the mesh&amp;#x27;s applications from accessing the Internet. The nodes (and the applications running on them) can access external services in a regulated manner by defining an egress gateway, directing all egress traffic through it, and allocating public IPs to the egress gateway nodes. &lt;/p&gt;&lt;img src=&quot;static/istio-architecture-838f742c50872372913c7414557ffc7a.svg&quot; class=&quot;image-center&quot; alt=&quot;Istio Architecture&quot;/&gt;&lt;div class=&quot;intro&quot; style=&quot;text-align:center&quot;&gt;&lt;p&gt;&lt;b&gt;Why use Istio Gateways and not Kubernetes Ingresses?&lt;/b&gt;&lt;/p&gt;&lt;p&gt;In general, the Istio v1alpha3 APIs leverage Gateways for richer functionality as Kubernetes Ingress has proven insufficient for Istio applications. In comparison to Kubernetes Ingress, Istio Gateways can function as a pure L4 TCP proxy and support all protocols supported by Envoy.&lt;/p&gt;&lt;p&gt;Another factor to examine is the division of trust domains between organizational teams. Kubernetes Ingress API combines specification for L4 to L7, which makes it challenging for different teams in organizations with separate trust domains (such as SecOps, NetOps, ClusterOps and Developers) to own Ingress traffic management.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Istio Authorization Policy]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Istio Authorization Policy",
  "thumbnail": "../../../assets/images/service-mesh-icons/istio.svg",
  "type": "Article",
  "category": "Service Mesh",
  "mesh": "Istio",
  "technology": "Docker",
  "tags": ["Istio"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Istio is a massive project with a wide range of capabilities and deployment options. We will learn about the Istio\u2019s authorization policy with an example .")), mdx("p", null, mdx("h2", null, "Let\u2019s see Istio\u2019s Security Architecture ")), mdx("p", null, "Before we directly jump into Istio's Authorization policies let's have a glance at Istio's Security architecture. The below diagram is directly referenced from Istio documentation. From the control plane, users can create things like authorization policies authentication policies, and policies will get translated into envoy config and streamed bent the varied proxies that form up the service mesh, on the information plane side there is east-west traffic from service b to c and also the actual communication takes place through sidecar proxies. If the traffic is entering it moves to the Ingress gateway and if it\u2019s leaving it can attend the Egress gateway in between all this we will apply JWT enforcements."), mdx("p", null, mdx("img", {
    src: istiosecurityarch,
    align: "center",
    alt: "comparative spectrum"
  })), mdx("h2", null, " Istio includes a high-level architecture that involves multiple factors such as:"), mdx("p", null, mdx("ul", null, mdx("li", null, "  Certificate Authority for key and certificate management "), mdx("li", null, " Sidecar and perimeter proxies work as Policy Enforcement Points to secure communication between the clients and servers. "), mdx("li", null, " A set of Envoy proxy extensions is there to manage telemetry and auditing "))), mdx("h2", null, " Istio\u2019s Authorization policies"), mdx("p", null, mdx("ul", null, mdx("li", null, "  Workload-to-workload and end-user-to-workload authorization. "), mdx("li", null, " A Simple API includes one single Authorization Policy, which is easy to use and maintain."), mdx("li", null, "Flexible semantics: operators can define custom conditions on Istio attributes, and use DENY and permit actions. "), mdx("li", null, "  High performance: Istio authorization gets enforced natively on the Envoy. "), mdx("li", null, " High compatibility: supports gRPC, HTTP, HTTPS, and HTTP2 natively, additionaly as well as any plain TCP protocols. "))), mdx("h2", null, "Example Authorization Policy"), mdx("p", null, "In this example, we allow access to our service httpbin in namespace foo from any JWT (regardless of the principle) to use the GET method."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "apiVersion: \"security.istio.io/v1beta1\"\nkind: \"AuthorizationPolicy\"\nmetadata:\n  name: \"allow-reads\"\n  namespace: foo\nspec:\n  selector:\n    matchLabels:\n      app: httpbin\n  rules:\n  - from:\n    - source:\n        principals: [\"*\"]\n    to:\n    - operation:\n        methods: [\"GET\"]\n\n")), mdx("h2", null, "Access Flow with Auth Policies"), mdx("p", null, "There is some logic behind how authorization is set given defined AuthorizationPolicies. Below is that the flow as taken directly from the Istio documentation."), mdx("ul", null, mdx("li", null, "If there are any CUSTOM policies that match the request, evaluate and deny the request if the evaluation result's is deny."), mdx("li", null, "If there are any DENY policies that match with the request, deny the request."), mdx("li", null, "If there are not any ALLOW policies for the workload, allow the request."), mdx("li", null, "If any of the ALLOW policies gets match with the request, allow the request."), mdx("li", null, "Deny the request."))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/istio-authorization-policy</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/istio-authorization-policy</guid><enclosure url="https://layer5.io/static/731763d720780a49c2ffdfede8c28f4b/istio.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Istio is a massive project with a wide range of capabilities and deployment options. We will learn about the Istio’s authorization policy with an example .&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;h2&gt;Let’s see Istio’s Security Architecture &lt;/h2&gt;&lt;/p&gt;&lt;p&gt;Before we directly jump into Istio&amp;#x27;s Authorization policies let&amp;#x27;s have a glance at Istio&amp;#x27;s Security architecture. The below diagram is directly referenced from Istio documentation. From the control plane, users can create things like authorization policies authentication policies, and policies will get translated into envoy config and streamed bent the varied proxies that form up the service mesh, on the information plane side there is east-west traffic from service b to c and also the actual communication takes place through sidecar proxies. If the traffic is entering it moves to the Ingress gateway and if it’s leaving it can attend the Egress gateway in between all this we will apply JWT enforcements.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;static/istio-securityarch-48cc1d41d8816131a3bf66bd55fd78df.svg&quot; align=&quot;center&quot; alt=&quot;comparative spectrum&quot;/&gt;&lt;/p&gt;&lt;h2&gt; Istio includes a high-level architecture that involves multiple factors such as:&lt;/h2&gt;&lt;p&gt;&lt;ul&gt;&lt;li&gt;  Certificate Authority for key and certificate management &lt;/li&gt;&lt;li&gt; Sidecar and perimeter proxies work as Policy Enforcement Points to secure communication between the clients and servers. &lt;/li&gt;&lt;li&gt; A set of Envoy proxy extensions is there to manage telemetry and auditing &lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;&lt;h2&gt; Istio’s Authorization policies&lt;/h2&gt;&lt;p&gt;&lt;ul&gt;&lt;li&gt;  Workload-to-workload and end-user-to-workload authorization. &lt;/li&gt;&lt;li&gt; A Simple API includes one single Authorization Policy, which is easy to use and maintain.&lt;/li&gt;&lt;li&gt;Flexible semantics: operators can define custom conditions on Istio attributes, and use DENY and permit actions. &lt;/li&gt;&lt;li&gt;  High performance: Istio authorization gets enforced natively on the Envoy. &lt;/li&gt;&lt;li&gt; High compatibility: supports gRPC, HTTP, HTTPS, and HTTP2 natively, additionaly as well as any plain TCP protocols. &lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;&lt;h2&gt;Example Authorization Policy&lt;/h2&gt;&lt;p&gt;In this example, we allow access to our service httpbin in namespace foo from any JWT (regardless of the principle) to use the GET method.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: &amp;quot;security.istio.io/v1beta1&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: &amp;quot;AuthorizationPolicy&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  name: &amp;quot;allow-reads&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  namespace: foo&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  selector:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    matchLabels:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      app: httpbin&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  rules:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - from:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - source:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        principals: [&amp;quot;*&amp;quot;]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    to:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - operation:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        methods: [&amp;quot;GET&amp;quot;]&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h2&gt;Access Flow with Auth Policies&lt;/h2&gt;&lt;p&gt;There is some logic behind how authorization is set given defined AuthorizationPolicies. Below is that the flow as taken directly from the Istio documentation.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;If there are any CUSTOM policies that match the request, evaluate and deny the request if the evaluation result&amp;#x27;s is deny.&lt;/li&gt;&lt;li&gt;If there are any DENY policies that match with the request, deny the request.&lt;/li&gt;&lt;li&gt;If there are not any ALLOW policies for the workload, allow the request.&lt;/li&gt;&lt;li&gt;If any of the ALLOW policies gets match with the request, allow the request.&lt;/li&gt;&lt;li&gt;Deny the request.&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Istio Ingress Gateway in Kubernetes]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Istio Ingress Gateway in Kubernetes",
  "thumbnail": "./Istio Ingress Gateway.png",
  "category": "Service Mesh",
  "tags": ["Gateway"],
  "type": "Article",
  "product": "Meshery",
  "technology": "Kubernetes",
  "mesh": "Istio",
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("p", null, "Predominantly, Kubernetes has used an Ingress controller to handle the traffic that enters the cluster from the outside. Istio has replaced all the familiar Ingress resource with new Gateway and VirtualServices resources. They work in sync to route all the traffic into the mesh. Inside the mesh there is no requirement for Gateways since the services can access each other by a cluster local service name."), mdx("h3", null, "Let\u2019s understand the working with a representation"), mdx("p", null, mdx("img", {
    src: Rep,
    align: "center",
    alt: "Istio Ingress Gateway in Kubernetes No Title"
  })), mdx("p", null, mdx("ul", null, mdx("li", null, "Firstly A request is made by a client on a specific port"), mdx("li", null, "Then a load balancer on this port listens and forwards the request to one of the workers in theh cluster on same or a new port"), mdx("li", null, "Inside the cluster the request is routed to the Istio Ingress Gateway which is listened on the port of the load balancer"), mdx("li", null, "The Service forwards the requestto an Istio Ingress Gateway Pod which is managed by a deployment"), mdx("li", null, "The Ingress Gateway Pod is configured by a Gateway and a VirtualService."), mdx("li", null, "The Gateway configures all the ports, protocol, and certificates."), mdx("li", null, "The Virtual Service configures all the routing information to find the correct Servicein it."), mdx("li", null, "The Istio Ingress Gateway Pod routes the request to the application Service."), mdx("li", null, "And lastly, the application Service routes the request to an application Pod which is managed by a deployment."))), mdx("ul", null), mdx("h2", null, "Ingress Gateway Service"), mdx("p", null, "The Ingress Gateway Service must listen to all the ports to be able to forward the traffic to the Ingress Gateway pods. Here we will be using routing to bring all the port numbers back to their initial state."), mdx("p", null, "Note that a Kubernetes Service is not a real service, but, since we are using type: \"NodePort\", all the request will be handled by the kube-proxy provided by Kubernetes and forwarded to a node with a current running pod. Once on the node, an IP-tables is configured a request will be forwarded to the appropriate pod."), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "\n# From the istio-ingressgateway service\n  ports:\n  - name: http2\n    nodePort: 30000\n    port: 80\n    protocol: TCP\n  - name: https\n    nodePort: 30443\n    port: 443\n    protocol: TCP\n  - name: mysql\n    nodePort: 30306\n    port: 3306\n    protocol: TCP\n")), mdx("p", null, "If we inspect the service, we will see that it defines more ports than we have describe above. So these ports will be used for all the internal Istio communication."), mdx("h2", null, "Ingress Gateway Deployment"), mdx("p", null, "It's a wrapper around the Envoy proxy and it is configured as the sidecars used inside the service mesh. When a Gateway or VirtualService gets changed, they are detected by the Istio Pilot controller and converts this information to an Envoy configuration and sends it to all the proxies, including the Envoy inside the IngressGateway."), mdx("p", null, "Since container ports are not supposed to be declared in Kubernetes pods, we don't have to declare the ports in the Ingress Gateway Deployment. If we look inside the deployment we can see that there are a number of ports that are already declared anyway. We have to take care about the Ingress Gateway Deployment in SSL certificates. To access the certificates inside the Gateway resources, make sure that we have mounted all the required certificates properly."), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "\n# Example represents volume mounts\nvolumeMounts:\n- mountPath: /etc/istio/ingressgateway-certs\n  name: ingressgateway-certs\n  readOnly: true\n- mountPath: /etc/istio/ingressgateway-ca-certs\n  name: ingressgateway-ca-certs\n  readOnly: true\n\n# Example represents volumes\nvolumes:\n- name: ingressgateway-certs\n  secret:\n    defaultMode: 420\n    optional: true\n    secretName: istio-ingressgateway-certs\n- name: ingressgateway-ca-certs\n  secret:\n    defaultMode: 420\n    optional: true\n    secretName: istio-ingressgateway-ca-certs\n")), mdx("h2", null, "The Gateway"), mdx("p", null, "The Gateway resources are used to configure the ports for Envoy and also support for the Kubernetes Ingress. Since all the three ports are exposed with the servies, we need these ports to be handled by the Envoy. It can be handled by declaring one or more Gateways."), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "\napiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n  name: default-gateway\n  namespace: istio-system\nspec:\n  selector:\n    istio: ingressgateway\n  servers:\n\n  - hosts:\n    - '*'\n    port:\n      name: http\n      number: 80\n      protocol: HTTP\n\n  - hosts:\n    - '*'\n    port:\n      name: https\n      number: 443\n      protocol: HTTPS\n    tls:\n      mode: SIMPLE\n      privateKey: /etc/istio/ingressgateway-certs/tls.key\n      serverCertificate: /etc/istio/ingressgateway-certs/tls.crt\n\n  - hosts: # For all the TCP routing this fields will be ignored, but it will be matched\n    - '*'  # with the VirtualService, We use * since it will match anything.\n    port:\n      name: mysql\n      number: 3306\n      protocol: TCP\n")), mdx("h2", null, "VirtualService"), mdx("p", null, "The last interesting resource we have is the VirtualService, it used in concert with the Gateway to configure Envoy."), mdx("p", null, "A general configuration for an HTTP(s) service"), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: counter\nspec:\n  gateways:\n  - default-gateway.istio-system.svc.cluster.local\n  hosts:\n  - counter.lab.example.com\n  http:\n  - match:\n    - uri:\n      prefix: /\n    route:\n    - destination:\n        host: counter\n        port:\n          number: 80\n\n")), mdx("h2", null, "Application Service and Deployment"), mdx("p", null, "The request have now reached the application service and deployment. These are normal Kubernetes resources."), mdx("h2", null, "Extras:"), mdx("h3", null, "Debugging Istio Gateway"), mdx("p", null, "First we will use istioctl to check the configuration status of Istio Ingress Gateway:"), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "\n# istioctl proxy-status istio-ingressgateway-5586f47659-r64lb.istio-system\nClusters Match\nListeners Match\nRoutes Match\n\n")), mdx("p", null, "If anything does not get synced with it, try restarting the ingress gateway pod once - it may be possible that it somehow an update got missed. If RDS looked good, we can check access logs of it."), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "\n#kubectl get configmap istio -n istio-system -o yaml | grep \"accessLogFile: \"\ndisable access log.\\naccessLogFile: \\\"/dev/stdout\\\"\\n\\n# If accessLogEncoding\n\n")), mdx("p", null, "Once all the access logs are enabled, we can try torequest a few more times and check the logs on the Ingress Gateway:"), mdx("pre", null, mdx("code", {
    parentName: "pre",
    "className": "language-yaml"
  }, "\n# kubectl logs -n istio-system istio-ingressgateway-5586f47659-r64lb | grep -v deprecated\n\n"))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/istio-ingress-gateway-in-kubernetes</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/istio-ingress-gateway-in-kubernetes</guid><enclosure url="https://layer5.io/static/7d817888386c321cf1d1e87dfbce798b/Istio Ingress Gateway.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;p&gt;Predominantly, Kubernetes has used an Ingress controller to handle the traffic that enters the cluster from the outside. Istio has replaced all the familiar Ingress resource with new Gateway and VirtualServices resources. They work in sync to route all the traffic into the mesh. Inside the mesh there is no requirement for Gateways since the services can access each other by a cluster local service name.&lt;/p&gt;&lt;h3&gt;Let’s understand the working with a representation&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;static/Istio Ingress Gateway No Title-080918fabe90005624619773f1cde554.png&quot; align=&quot;center&quot; alt=&quot;Istio Ingress Gateway in Kubernetes No Title&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;ul&gt;&lt;li&gt;Firstly A request is made by a client on a specific port&lt;/li&gt;&lt;li&gt;Then a load balancer on this port listens and forwards the request to one of the workers in theh cluster on same or a new port&lt;/li&gt;&lt;li&gt;Inside the cluster the request is routed to the Istio Ingress Gateway which is listened on the port of the load balancer&lt;/li&gt;&lt;li&gt;The Service forwards the requestto an Istio Ingress Gateway Pod which is managed by a deployment&lt;/li&gt;&lt;li&gt;The Ingress Gateway Pod is configured by a Gateway and a VirtualService.&lt;/li&gt;&lt;li&gt;The Gateway configures all the ports, protocol, and certificates.&lt;/li&gt;&lt;li&gt;The Virtual Service configures all the routing information to find the correct Servicein it.&lt;/li&gt;&lt;li&gt;The Istio Ingress Gateway Pod routes the request to the application Service.&lt;/li&gt;&lt;li&gt;And lastly, the application Service routes the request to an application Pod which is managed by a deployment.&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;&lt;ul&gt;&lt;/ul&gt;&lt;h2&gt;Ingress Gateway Service&lt;/h2&gt;&lt;p&gt;The Ingress Gateway Service must listen to all the ports to be able to forward the traffic to the Ingress Gateway pods. Here we will be using routing to bring all the port numbers back to their initial state.&lt;/p&gt;&lt;p&gt;Note that a Kubernetes Service is not a real service, but, since we are using type: &amp;quot;NodePort&amp;quot;, all the request will be handled by the kube-proxy provided by Kubernetes and forwarded to a node with a current running pod. Once on the node, an IP-tables is configured a request will be forwarded to the appropriate pod.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# From the istio-ingressgateway service&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; http2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;nodePort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;30000&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; TCP&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; https&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;nodePort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;30443&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;443&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; TCP&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; mysql&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;nodePort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;30306&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;3306&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; TCP&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;If we inspect the service, we will see that it defines more ports than we have describe above. So these ports will be used for all the internal Istio communication.&lt;/p&gt;&lt;h2&gt;Ingress Gateway Deployment&lt;/h2&gt;&lt;p&gt;It&amp;#x27;s a wrapper around the Envoy proxy and it is configured as the sidecars used inside the service mesh. When a Gateway or VirtualService gets changed, they are detected by the Istio Pilot controller and converts this information to an Envoy configuration and sends it to all the proxies, including the Envoy inside the IngressGateway.&lt;/p&gt;&lt;p&gt;Since container ports are not supposed to be declared in Kubernetes pods, we don&amp;#x27;t have to declare the ports in the Ingress Gateway Deployment. If we look inside the deployment we can see that there are a number of ports that are already declared anyway. We have to take care about the Ingress Gateway Deployment in SSL certificates. To access the certificates inside the Gateway resources, make sure that we have mounted all the required certificates properly.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# Example represents volume mounts&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;volumeMounts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;mountPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; /etc/istio/ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;readOnly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token boolean important&quot; style=&quot;color:rgb(255, 88, 116)&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;mountPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; /etc/istio/ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ca&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ca&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;readOnly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token boolean important&quot; style=&quot;color:rgb(255, 88, 116)&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# Example represents volumes&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;secret&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;defaultMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;420&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token boolean important&quot; style=&quot;color:rgb(255, 88, 116)&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;secretName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; istio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ca&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;secret&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;defaultMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;420&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;optional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token boolean important&quot; style=&quot;color:rgb(255, 88, 116)&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;secretName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; istio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ca&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h2&gt;The Gateway&lt;/h2&gt;&lt;p&gt;The Gateway resources are used to configure the ports for Envoy and also support for the Kubernetes Ingress. Since all the three ports are exposed with the servies, we need these ports to be handled by the Envoy. It can be handled by declaring one or more Gateways.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; Gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; istio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;system&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;istio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; ingressgateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;servers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:rgb(173, 219, 103)&quot;&gt;&amp;#x27;*&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; http&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; HTTP&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:rgb(173, 219, 103)&quot;&gt;&amp;#x27;*&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; https&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;443&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; HTTPS&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;tls&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; SIMPLE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;privateKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; /etc/istio/ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs/tls.key&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;serverCertificate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; /etc/istio/ingressgateway&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;certs/tls.crt&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# For all the TCP routing this fields will be ignored, but it will be matched&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token string&quot; style=&quot;color:rgb(173, 219, 103)&quot;&gt;&amp;#x27;*&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# with the VirtualService, We use * since it will match anything.&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; mysql&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;3306&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; TCP&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h2&gt;VirtualService&lt;/h2&gt;&lt;p&gt;The last interesting resource we have is the VirtualService, it used in concert with the Gateway to configure Envoy.&lt;/p&gt;&lt;p&gt;A general configuration for an HTTP(s) service&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; VirtualService&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; counter&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;gateways&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;gateway.istio&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;system.svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;hosts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; counter.lab.example.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; /&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;destination&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; counter&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token number&quot; style=&quot;color:rgb(247, 140, 108)&quot;&gt;80&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h2&gt;Application Service and Deployment&lt;/h2&gt;&lt;p&gt;The request have now reached the application service and deployment. These are normal Kubernetes resources.&lt;/p&gt;&lt;h2&gt;Extras:&lt;/h2&gt;&lt;h3&gt;Debugging Istio Gateway&lt;/h3&gt;&lt;p&gt;First we will use istioctl to check the configuration status of Istio Ingress Gateway:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# istioctl proxy-status istio-ingressgateway-5586f47659-r64lb.istio-system&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Clusters Match&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Listeners Match&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Routes Match&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;If anything does not get synced with it, try restarting the ingress gateway pod once - it may be possible that it somehow an update got missed. If RDS looked good, we can check access logs of it.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;#kubectl get configmap istio -n istio-system -o yaml | grep &amp;quot;accessLogFile: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token key atrule&quot;&gt;disable access log.\naccessLogFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot; style=&quot;color:rgb(199, 146, 234)&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; \&amp;quot;/dev/stdout\&amp;quot;\n\n&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# If accessLogEncoding&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Once all the access logs are enabled, we can try torequest a few more times and check the logs on the Ingress Gateway:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-yaml&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token comment&quot; style=&quot;color:rgb(99, 119, 119);font-style:italic&quot;&gt;# kubectl logs -n istio-system istio-ingressgateway-5586f47659-r64lb | grep -v deprecated&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Istio Pilot]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Istio Pilot",
  "thumbnail": "../../../assets/images/service-mesh-icons/istio.svg",
  "type": "Article",
  "category": "Service Mesh",
  "mesh": "Istio",
  "technology": "Kubernetes",
  "tags": ["Istio"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("p", null, "This article covers Istio's Pilot, its basic model, the sources of configuration it consumes to produce a model of the mesh, how it uses that model of the mesh to push configuration to Envoys, how to debug it, and how to understand the transformation Pilot performs from Istio configuration to Envoy's. With this knowledge, you should be able to debug\xA0and resolve the vast majority of issues that new and intermediate Istio users encounter."), mdx("p", null, "In an Istio deployment, Pilot is in charge of programming the data plane, ingress and egress gateways, and service proxies. Pilot models a deployment\xA0environment by combining Istio configuration from Galley\xA0\xA0with service information from a service registry, such as the Kubernetes API server or Consul. Pilot utilises this model to produce data plane configuration and pushes it out to the fleet of service proxies that are connected to it."), mdx("h3", null, "Configuring Pilot"), mdx("p", null, "Let's look at the surface area of Pilot's configuration to understand better all aspects of the mesh that concerns it. As we process this, keep in mind that Pilot's dependency on Galley for the underlying platform and environment information will grow as the Istio project progresses. Pilot has three primary sources of configuration:"), mdx("h4", null, "Mesh Configuration"), mdx("p", null, "Mesh configuration is a set of global configuration that is static for the installation of the mesh. Mesh configuration is split over three API objects:"), mdx("ol", null, mdx("li", null, "MeshConfig (", mdx("code", null, "mesh.istio.io/v1alpha1.MeshConfig"), ") - MeshConfig allows you to configure how Istio components communicate with one another, where configuration sources are located, etc."), mdx("li", null, "ProxyConfig (", mdx("code", null, "mesh.istio.io/v1alpha1.ProxyConfig"), ") - ProxyConfig tracks where Envoy's bootstrap configuration is located, which ports to bind to, and other options concerned with initialising Envoy."), mdx("li", null, "MeshNetworks (", mdx("code", null, "mesh.istio.io/v1alpha1.MeshNetworks"), ") - MeshNetworks is a collection of networks across which the mesh is deployed, together with the addresses of each network's ingress gateways.")), mdx("p", null, "MeshConfig is generally used to define whether policy and/or telemetry are enabled, where to load configuration and locality-based load balancing settings. The exhaustive set of concerns that MeshConfig contains is listed below:"), mdx("ul", null, mdx("li", null, "How to user Mixer?", mdx("ul", null, mdx("li", null, "The addresses of the policy and telemetry servers"), mdx("li", null, "Whether policy checks are enabled at runtime"), mdx("li", null, "Whether to fail open or closed when Mixer Policy is inaccessible or returns an error"), mdx("li", null, "Whether to perform policy checks on the client side."), mdx("li", null, "Whether to use session affinity to target the same Mixer Telemetry instance. Session affinity is always enabled for Mixer Policy (performance of the system relies on it!)"))), mdx("li", null, "How to configure service proxies for listening?", mdx("ul", null, mdx("li", null, "The ports to bind to to accept traffic (i.e. the port IPTables redirects to) and to accept HTTP PROXY requests"), mdx("li", null, "TCP connection timeout and keepalive settings"), mdx("li", null, "Access log format, output file, and encoding (JSON or text)"), mdx("li", null, "Whether to allow all outbound traffic, or restrict outbound traffic to only services Pilot knows about"), mdx("li", null, "Where to listen for secrets from Citadel (the SDS API), and how to bootstrap trust (in environments with local machine tokens)"))), mdx("li", null, "Whether to support Kubernetes Ingress resources"), mdx("li", null, "The set of configuration sources for all Istio components (e.g. the local file system, or Galley), and how to communicate with them (the address, whether to use TLS or not, which secrets, etc)"), mdx("li", null, "Locality-based load balancing settings\u2014configuration about failover and traffic splits between zones and regions.")), mdx("p", null, "ProxyConfig is mostly used for customising\xA0bootstrap settings for Envoy. The exhaustive set of concerns that ProxyConfig contains is the following:"), mdx("ul", null, mdx("li", null, "The location of the file with Envoy\u2019s bootstrap configuration, as well as the location of the Envoy binary itself"), mdx("li", null, "The location of the trace collector (i.e. where to send trace data)"), mdx("li", null, "Shutdown settings (both connection draining and hot restart)"), mdx("li", null, "The location of Envoy\u2019s xDS server (Pilot) and how to communicate with it"), mdx("li", null, "Envoy\u2019s service cluster, meaning the name of the service this Envoy is sidecar for"), mdx("li", null, "Which ports to host the proxy\u2019s admin server and statsd listener"), mdx("li", null, "Envoy\u2019s concurrency (number of worker threads)"), mdx("li", null, "Connection timeout settings"), mdx("li", null, "How Envoy binds the socket to intercept traffic (either via IPTables REDIRECT or TPROXY)")), mdx("p", null, "MeshNetworks defines a collection of named networks, the method for sending traffic into those networks (ingress), and their\xA0locality. A CIDR range or a set of endpoints returned by a service registry define each network (e.g. the Kubernetes API server). The API object ServiceEntry, which is used to define services in Istio, has\xA0a set of endpoints. A ServiceEntry can represent a service that is deployed across multiple networks(or clusters)\xA0by labelling each endpoint with a network."), mdx("p", null, "Most values in MeshConfig cannot be updated dynamically, therefore the control plane must be restarted for them to take effect. Similarly, updates to values in ProxyConfig only occur when Envoy is redeployed (e.g., in Kubernetes, when the pod is rescheduled). MeshNetworks can be dynamically upgraded at runtime without requiring any control plane components to be restarted."), mdx("p", null, "On Kubernetes, the majority of MeshConfig and ProxyConfig configuration is concealed behind options in the Helm installation, although not all of it is exposed via Helm. To have complete control over the installation, you'll need to post-process the file output by Helm."), mdx("h4", null, "Networking Configuration"), mdx("p", null, "Networking configuration is Istio\u2019s bread and butter\u2014the configuration to manage how traffic flows through the mesh."), mdx("p", null, "Istio's networking APIs revolve around ServiceEntry. ServiceEntry defines a service by its names\u2014the set of hostnames clients use to call the service. DestinationRules define how clients communicate with a service: what load balancing, outlier detection, circuit breaking, and connection pooling strategies to use, which TLS settings to use, etc. VirtualServices configure how traffic flows to a service: L7 and L4 routing, traffic shaping, retries, timeouts, etc. Gateways configure how services are exposed outside of the mesh: what hostnames are routed to which services, how to serve certs for those hostnames, etc. Service proxies configure how services are exposed inside of the mesh, which services are available to which clients."), mdx("h4", null, "Service Discovery"), mdx("p", null, "Pilot integrates with different service discovery systems, such as the Kubernetes API server, Consul, and Eureka, to discover service and endpoint information about the local environment. Adapters in Pilot consume service discovery data from their source and synthesize ServiceEntry objects. For example, the integration with Kubernetes uses the Kubernetes SDK to watch the API server for service creation and service endpoint update events. The registry adapter in Pilot creates a ServiceEntry object based on this data. That ServiceEntry is used to update Pilot\u2019s internal model and generate an updated configuration for the data plane."), mdx("p", null, "Pilot registry adapters were previously implemented\xA0in Golang.\xA0 These adapters can now be detached from Pilot with the introduction of Galley. A service discovery adapter reads an existing service registry and produces a set of ServiceEntry objects as a separate job (or an offline process done by a continuous integration system). Those ServiceEntries can then be supplied to Galley as files and uploaded to the Kubernetes API server. Alternatively, you can create your own Mesh Config Protocol server and feed Galley the ServiceEntries. Static ServiceEntries can be useful to enable Istio in largely static environments (e.g., legacy VM-based deployments with rarely-changing IP addresses)."), mdx("p", null, "ServiceEntries bind a set of hostnames to endpoints to construct a Service. IP addresses or DNS names can be those\xA0endpoints. A network, locality, and weight can be assigned to each endpoint individually. ServiceEntries can define complex network topologies as a result of this. A service deployed across separate clusters (with different networks) that are geographically disparate (have different localities) can be created and have traffic split amongst its members by percentage (weights)\u2014or in fact, by nearly any feature of the request. \xA0Since Istio knows where distant networks' ingress points are, when a service endpoint in a remote network is selected, the service proxy will route traffic to the remote network's ingress. We can even write policies to prefer local endpoints over endpoints in other localities but automatically failover to other localities if local endpoints are unhealthy.\xA0"), mdx("h3", null, "Config Serving"), mdx("p", null, "Pilot constructs a model of the environment and state of a deployment using these three config sources\u2014mesh config, networking config, and service discovery. As service proxy instances are deployed into the cluster, they connect to Pilot asynchronously. Pilot groups the service proxies based on their labels and the service to which they are sidecarred. Pilot creates Discovery Service (xDS) responses for each group of connected service proxies using this paradigm. Pilot transmits the current state of the environment and the configuration that reflects the environment when a service proxy connects. The model is updated regularly due to the generally dynamic nature of the underlying platform(s). Updates to the model mean updating the current set of xDS configurations. When the Discovery Service config is changed, Pilot computes the groups of affected service proxies and pushes the updated configuration to them."), mdx("p", null, "Service proxy (Envoy) configuration can be divided into two main groups: "), mdx("ul", null, mdx("li", null, "Listeners and Routes"), mdx("li", null, "Clusters and Endpoints")), mdx("p", null, "Listeners define a set of filters (for example, an HTTP filter delivers Envoy's HTTP functionality) and how Envoy connects those filters to a port. These are of\xA0two types: physical and virtual. A physical listener is one where Envoy binds to the specified port.\xA0A virtual listener accepts traffic from a physical listener without binding to a port (instead, some physical listener must direct traffic to it). Listeners and Routes work together to configure how a Listener routes traffic to a specified Cluster (e.g., by matching on HTTP path or SNI name). A cluster is a collection of endpoints that includes information on how to contact them (TLS settings, load balancing strategy, connection pool settings, etc.).\xA0 A Cluster is analogous to a \"service.\" Finally, Endpoints are individual network hosts (IP addresses or DNS names) that Envoy will forward traffic to.\xA0"), mdx("h3", null, "Troubleshooting Pilot"), mdx("p", null, "To examine the state of service proxies connected to Pilot, see these endpoints:"), mdx("ul", null, mdx("li", null, mdx("code", null, "/debug/edsz"), " - prints all of Pilot\u2019s set of pre-computed EDS responses; i.e. the endpoints it sends to each connected service proxy"), mdx("li", null, mdx("code", null, "/debug/adsz"), " - prints the set of listeners, routes, and clusters pushed to each service proxy connected to Pilot"), mdx("li", null, mdx("code", null, "/debug/cdsz"), " - prints the set of clusters pushed to each service proxy connected to Pilot"), mdx("li", null, mdx("code", null, "/debug/synz"), " - print the status of ADS, CDS, and EDS connections of all service proxies connected to pilot. In particular this shows the last nonce Pilot is working with vs the last nonce Envoy has ACK\u2019d, showing which Envoys are not accepting configuration updates")), mdx("p", null, "To examine Pilot\u2019s understanding of the state of the world (its service registries), see these endpoints:"), mdx("ul", null, mdx("li", null, mdx("code", null, "/debug/registryz"), " - print the set of services Pilot knows about across all registries"), mdx("li", null, mdx("code", null, "/debug/endpointz[?brief=1]"), " - print the endpoints for every service Pilot knows about, including their ports, protocols, service accounts, labels, etc. If you provide the brief flag, the output will be a human-readable table (as opposed to a JSON blob for the normal version). This is a legacy endpoint and ", mdx("code", null, "/debug/endpointShardz"), " provides strictly more information."), mdx("li", null, mdx("code", null, "/debug/endpointShardz"), " - print the endpoints for every service Pilot knows about, grouped by the registry that provided the endpoint. For example, if the same service exists in both Consul and Kubernetes, endpoints for the service will be grouped into two shards, one each for Consul and Kubernetes. This endpoint provides everything from ", mdx("code", null, "/debug/endpoint"), " and more, including data like the endpoint\u2019s network, locality, load balancer weight, representation in Envoy xDS config, etc."), mdx("li", null, mdx("code", null, "/debug/workloadz"), " - print the set of endpoints (\u201Cworkloads\u201D) connected to Pilot, and their metadata (like labels)"), mdx("li", null, mdx("code", null, "/debug/configz"), " - print the entire set of Istio configuration Pilot knows about. Only validated config that Pilot is using to construct its model will be returned; useful for understanding situations where Pilot is not processing new config itself.")), mdx("p", null, "You can also find miscellaneous endpoints with higher level debug information, be wading through these endpoints:"), mdx("ul", null, mdx("li", null, mdx("code", null, "/debug/authenticationz[?proxyID=pod_name.namespace]"), " - prints the Istio authentication policy status of the target proxy for each host and port it\u2019s serving, including: the name of the authentication policy affecting it, the name of the DestinationRule affecting it, whether the port expects mTLS, standard TLS, or plain text, and if settings across configuration cause a conflict for this port."), mdx("li", null, mdx("code", null, "/debug/config_dump[?proxyID=pod_name.namespace]"), " - prints the listeners, routes, and clusters for the given node; this can be diff\u2019d directly against the output of ", mdx("code", null, "istioctl proxy-config")), mdx("li", null, mdx("code", null, "/debug/push_status"), " - prints the status of each connected endpoint as of Pilot\u2019s last push period; includes the status of each connected proxy, when the push period began (and ended), and the identities assigned to each port of each host.")), mdx("h3", null, "Tracing Configuration"), mdx("p", null, "In this section, we\u2019ll use some tools to understand the before-and-after of Istio configuration and the resultant xDS configuration pushed to service proxies."), mdx("h4", null, "Listeners"), mdx("p", null, "Gateways and VirtualServices results in Listeners for Envoy. Gateways result in physical listeners (listeners that bind to a port on the network), while VirtualServices result in virtual listeners (listeners that do not bind to a port, but instead receive traffic from physical listeners). Demonstration of how Istio configuration manifests into xDS configuration by creating a Gateway:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "apiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n  name: foo-com-gateway\nspec:\n  selector:\n    istio: ingressgateway\n  servers:\n  - hosts:\n    - \u201C*.foo.com\u201D\n    port:\n      number: 80\n      name: http\n      protocol: HTTP\n")), mdx("p", null, "Creation of this Istio Gateway results in a single HTTP listener on port 80 on our Ingress Gateway."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl proxy-config listener istio-ingressgateway_PODNAME -o json -n istio-system\n[\n    {\n        \"name\": \"0.0.0.0_80\",\n        \"address\": {\n            \"socketAddress\": {\n                \"address\": \"0.0.0.0\",\n                \"portValue\": 80\n            }\n        },\n        \"filterChains\": [\n            {\n                \"filters\": [\n                    {\n                        \"name\": \"envoy.http_connection_manager\",\n...\n                            \"rds\": {\n                                \"config_source\": {\n                                    \"ads\": {}\n                                },\n                                \"route_config_name\": \"http.80\"\n                            },\n...\n")), mdx("p", null, "It's worth noting that the newly created filter is listening on address 0.0.0.0. This is the listener for all HTTP traffic on port 80, regardless of the host to which it is addressed. If we enable TLS termination for this Gateway, we'll see a new listener created just for the hosts we\u2019re terminating TLS for, while the rest would fall into this catch-all listener."), mdx("p", null, "Let\u2019s bind a VirtualService to this Gateway"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "apiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n name: foo-default\nspec:\n hosts:\n - bar.foo.com\n gateways:\n - foo-com-gateway\n http:\n - route:\n   - destination:\n       host: bar.foo.svc.cluster.local\n")), mdx("p", null, "See how it manifests as virtual listener."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl proxy-config listener istio-ingressgateway_PODNAME -o json\n\n\n[\n    {\n        \"name\": \"0.0.0.0_80\",\n        \"address\": {\n            \"socketAddress\": {\n                \"address\": \"0.0.0.0\",\n                \"portValue\": 80\n            }\n        },\n        \"filterChains\": [\n            {\n                \"filters\": [\n                    {\n                        \"name\": \"envoy.http_connection_manager\",\n...\n                            \"rds\": {\n                                \"config_source\": {\n                                    \"ads\": {}\n                                },\n                                \"route_config_name\": \"http.80\"\n                            },\n...\n")), mdx("p", null, "We\xA0encourage that you try different protocols for the ports (or list a single Gateway with many ports with various protocols) to see how this results in different filters. Configuring different TLS settings within the Gateway also changes the generated Listener configuration. For each protocol you use, you'll notice a protocol-specific filter configured in the Listener (for HTTP, this is the http connection manager and its router, for MongoDB another, for TCP another, and so on). To explore how different combinations of hosts in the Gateway and VirtualService interact, we also recommend exploring different combinations of hosts in the Gateway and VirtualService."), mdx("h4", null, "Routes"), mdx("p", null, "We've seen how VirtualServices cause Listeners to be created. In Envoy, the majority of the configuration you specify in VirtualServices manifests as Routes. Routes exist in a variety of flavors, with a set of routes for each protocol supported by Envoy."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl proxy-config route istio-ingressgateway_PODNAME -o json\n\n$ istioctl proxy-config route istio-ingressgateway_PODNAME -o json\n[\n    {\n        \"name\": \"0.0.0.0_80\",\n        \"virtualHosts\": [\n            {\n                \"name\": \"bar.foo.com:80\",\n                \"domains\": [\n                    \"bar.foo.com\",\n                    \"bar.foo.com:80\"\n                ],\n                \"routes\": [\n                    {\n                        \"match\": {\n                            \"prefix\": \"/\"\n                        },\n                        \"route\": {\n                            \"cluster\": \"outbound|8000||bar.foo.svc.cluster.local\",\n                            \"timeout\": \"0s\",\n                            \"retryPolicy\": {\n                                \"retryOn\": \"connect-failure,refused-stream,unavailable,cancelled,resource-exhausted,retriable-status-codes\",\n                                \"numRetries\": 2,\n                                \"retryHostPredicate\": [\n                                    {\n                                        \"name\": \"envoy.retry_host_predicates.previous_hosts\"\n                                    }\n                                ],\n                                \"hostSelectionRetryMaxAttempts\": \"3\",\n                                \"retriableStatusCodes\": [\n                                    503\n                                ]\n                            },\n...\n\n\nExample 7.5 -  Envoy Route (RDS) configuration for the VirtualService in Example 7.3. Notice the default Retry Policy and the embedded Mixer configuration (which is used for reporting telemetry back to Mixer).\n\nWe can update our Route to include some match conditions to see how this results in different Routes for Envoy (Example 7-6):\n\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n name: foo-default\nspec:\n  hosts:\n  - bar.foo.com\n  gateways:\n  - foo-com-gateway\n  http:\n  - match:\n    - uri:\n        prefix: /whiz\n    route:\n    - destination:\n        host: whiz.foo.svc.cluster.local\n  - route:\n    - destination:\n        host: bar.foo.svc.cluster.local\n\n")), mdx("p", null, "We can update our Route to include some match conditions to see how this results in different Routes for Envoy"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "apiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n name: foo-default\nspec:\n  hosts:\n  - bar.foo.com\n  gateways:\n  - foo-com-gateway\n  http:\n  - match:\n    - uri:\n        prefix: /whiz\n    route:\n    - destination:\n        host: whiz.foo.svc.cluster.local\n  - route:\n    - destination:\n        host: bar.foo.svc.cluster.local\n\n")), mdx("p", null, "Similarly we can add retries, split traffic amongst several destinations, inject faults, and more. All of these options in VirtualServices manifest as Routes in Envoy."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl proxy-config route istio-ingressgateway_PODNAME -o json\n\n\n[\n    {\n        \"name\": \"http.80\",\n        \"virtualHosts\": [\n            {\n                \"name\": \"bar.foo.com:80\",\n                \"domains\": [\n                    \"bar.foo.com\",\n                    \"bar.foo.com:80\"\n                ],\n                \"routes\": [\n                    {\n                        \"match\": {\n                            \"prefix\": \"/whiz\"\n                        },\n                        \"route\": {\n                            \"cluster\": \"outbound|80||whiz.foo.svc.cluster.local\",\n...\n                    {\n                        \"match\": {\n                            \"prefix\": \"/\"\n                        },\n                        \"route\": {\n                            \"cluster\": \"outbound|80||bar.foo.svc.cluster.local\",\n...\n")), mdx("h4", null, "Clusters"), mdx("p", null, "We can see that Istio creates a cluster for each service and port in the mesh if we use ", mdx("code", null, "istioctl"), "\xA0to look at clusters. To see a new Cluster emerge in Envoy, we can construct a new ServiceEntry:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "apiVersion: networking.istio.io/v1alpha3\nkind: ServiceEntry\nmetadata:\n  name: http-server\nspec:\n  hosts:\n  - some.domain.com\n  ports:\n  - number: 80\n    name: http\n    protocol: http\n  resolution: STATIC\n  endpoints:\n  - address: 2.2.2.2\n")), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl proxy-config cluster istio-ingressgateway_PODNAME -o json\n\n\n[\n...\n    {\n        \"name\": \"outbound|80||some.domain.com\",\n        \"type\": \"EDS\",\n        \"edsClusterConfig\": {\n            \"edsConfig\": {\n                \"ads\": {}\n            },\n            \"serviceName\": \"outbound|80||some.domain.com\"\n        },\n        \"connectTimeout\": \"10s\",\n        \"circuitBreakers\": {\n            \"thresholds\": [\n                {\n                    \"maxRetries\": 1024\n                }\n            ]\n        }\n    },\n...\n\n")), mdx("p", null, "We can experiment with adding new ports (with different protocols) to the ServiceEntry to see how this affects the generation of new Clusters. A DestinationRule is another tool that may be used to generate and update Clusters in Istio. We establish new Clusters by creating Subsets, and we impact the configuration inside the Cluster by modifying load balancing and TLS settings."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "apiVersion: networking.istio.io/v1alpha3\nkind: DestinationRule\nmetadata:\n  name: some-domain-com\nspec:\n  host: some.domain.com\n  subsets:\n  - name: v1\n    labels:\n      version: v1\n  - name: v2\n    labels:\n      version: v2\n")), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl proxy-config cluster istio-ingressgateway_PODNAME -o json\n\n\n[\n...\n    {\n        \"name\": \"outbound|80||some.domain.com\",\n...\n    },\n    {\n        \"name\": \"outbound|80|v1|some.domain.com\",\n...\n        \"metadata\": {\n            \"filterMetadata\": {\n                \"istio\": {\n                    \"config\": \"/apis/networking/v1alpha3/namespaces/default/destination-rule/some-domain-com\"\n                }\n            }\n        }\n    },\n    {\n        \"name\": \"outbound|80|v2|some.domain.com\",\n...\n    },\n...\n\n")), mdx("p", null, "Notice that we still have our original cluster, outbound|80||some.domain.com, but that we got a new cluster for each Subset we defined as well. Istio annotates the Envoy configuration with the rule that resulted in it being created to help debug.")));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/istio-pilot</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/istio-pilot</guid><enclosure url="https://layer5.io/static/731763d720780a49c2ffdfede8c28f4b/istio.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;p&gt;This article covers Istio&amp;#x27;s Pilot, its basic model, the sources of configuration it consumes to produce a model of the mesh, how it uses that model of the mesh to push configuration to Envoys, how to debug it, and how to understand the transformation Pilot performs from Istio configuration to Envoy&amp;#x27;s. With this knowledge, you should be able to debug and resolve the vast majority of issues that new and intermediate Istio users encounter.&lt;/p&gt;&lt;p&gt;In an Istio deployment, Pilot is in charge of programming the data plane, ingress and egress gateways, and service proxies. Pilot models a deployment environment by combining Istio configuration from Galley  with service information from a service registry, such as the Kubernetes API server or Consul. Pilot utilises this model to produce data plane configuration and pushes it out to the fleet of service proxies that are connected to it.&lt;/p&gt;&lt;h3&gt;Configuring Pilot&lt;/h3&gt;&lt;p&gt;Let&amp;#x27;s look at the surface area of Pilot&amp;#x27;s configuration to understand better all aspects of the mesh that concerns it. As we process this, keep in mind that Pilot&amp;#x27;s dependency on Galley for the underlying platform and environment information will grow as the Istio project progresses. Pilot has three primary sources of configuration:&lt;/p&gt;&lt;h4&gt;Mesh Configuration&lt;/h4&gt;&lt;p&gt;Mesh configuration is a set of global configuration that is static for the installation of the mesh. Mesh configuration is split over three API objects:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;MeshConfig (&lt;code&gt;mesh.istio.io/v1alpha1.MeshConfig&lt;/code&gt;) - MeshConfig allows you to configure how Istio components communicate with one another, where configuration sources are located, etc.&lt;/li&gt;&lt;li&gt;ProxyConfig (&lt;code&gt;mesh.istio.io/v1alpha1.ProxyConfig&lt;/code&gt;) - ProxyConfig tracks where Envoy&amp;#x27;s bootstrap configuration is located, which ports to bind to, and other options concerned with initialising Envoy.&lt;/li&gt;&lt;li&gt;MeshNetworks (&lt;code&gt;mesh.istio.io/v1alpha1.MeshNetworks&lt;/code&gt;) - MeshNetworks is a collection of networks across which the mesh is deployed, together with the addresses of each network&amp;#x27;s ingress gateways.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;MeshConfig is generally used to define whether policy and/or telemetry are enabled, where to load configuration and locality-based load balancing settings. The exhaustive set of concerns that MeshConfig contains is listed below:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;How to user Mixer?&lt;ul&gt;&lt;li&gt;The addresses of the policy and telemetry servers&lt;/li&gt;&lt;li&gt;Whether policy checks are enabled at runtime&lt;/li&gt;&lt;li&gt;Whether to fail open or closed when Mixer Policy is inaccessible or returns an error&lt;/li&gt;&lt;li&gt;Whether to perform policy checks on the client side.&lt;/li&gt;&lt;li&gt;Whether to use session affinity to target the same Mixer Telemetry instance. Session affinity is always enabled for Mixer Policy (performance of the system relies on it!)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;How to configure service proxies for listening?&lt;ul&gt;&lt;li&gt;The ports to bind to to accept traffic (i.e. the port IPTables redirects to) and to accept HTTP PROXY requests&lt;/li&gt;&lt;li&gt;TCP connection timeout and keepalive settings&lt;/li&gt;&lt;li&gt;Access log format, output file, and encoding (JSON or text)&lt;/li&gt;&lt;li&gt;Whether to allow all outbound traffic, or restrict outbound traffic to only services Pilot knows about&lt;/li&gt;&lt;li&gt;Where to listen for secrets from Citadel (the SDS API), and how to bootstrap trust (in environments with local machine tokens)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Whether to support Kubernetes Ingress resources&lt;/li&gt;&lt;li&gt;The set of configuration sources for all Istio components (e.g. the local file system, or Galley), and how to communicate with them (the address, whether to use TLS or not, which secrets, etc)&lt;/li&gt;&lt;li&gt;Locality-based load balancing settings—configuration about failover and traffic splits between zones and regions.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ProxyConfig is mostly used for customising bootstrap settings for Envoy. The exhaustive set of concerns that ProxyConfig contains is the following:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;The location of the file with Envoy’s bootstrap configuration, as well as the location of the Envoy binary itself&lt;/li&gt;&lt;li&gt;The location of the trace collector (i.e. where to send trace data)&lt;/li&gt;&lt;li&gt;Shutdown settings (both connection draining and hot restart)&lt;/li&gt;&lt;li&gt;The location of Envoy’s xDS server (Pilot) and how to communicate with it&lt;/li&gt;&lt;li&gt;Envoy’s service cluster, meaning the name of the service this Envoy is sidecar for&lt;/li&gt;&lt;li&gt;Which ports to host the proxy’s admin server and statsd listener&lt;/li&gt;&lt;li&gt;Envoy’s concurrency (number of worker threads)&lt;/li&gt;&lt;li&gt;Connection timeout settings&lt;/li&gt;&lt;li&gt;How Envoy binds the socket to intercept traffic (either via IPTables REDIRECT or TPROXY)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;MeshNetworks defines a collection of named networks, the method for sending traffic into those networks (ingress), and their locality. A CIDR range or a set of endpoints returned by a service registry define each network (e.g. the Kubernetes API server). The API object ServiceEntry, which is used to define services in Istio, has a set of endpoints. A ServiceEntry can represent a service that is deployed across multiple networks(or clusters) by labelling each endpoint with a network.&lt;/p&gt;&lt;p&gt;Most values in MeshConfig cannot be updated dynamically, therefore the control plane must be restarted for them to take effect. Similarly, updates to values in ProxyConfig only occur when Envoy is redeployed (e.g., in Kubernetes, when the pod is rescheduled). MeshNetworks can be dynamically upgraded at runtime without requiring any control plane components to be restarted.&lt;/p&gt;&lt;p&gt;On Kubernetes, the majority of MeshConfig and ProxyConfig configuration is concealed behind options in the Helm installation, although not all of it is exposed via Helm. To have complete control over the installation, you&amp;#x27;ll need to post-process the file output by Helm.&lt;/p&gt;&lt;h4&gt;Networking Configuration&lt;/h4&gt;&lt;p&gt;Networking configuration is Istio’s bread and butter—the configuration to manage how traffic flows through the mesh.&lt;/p&gt;&lt;p&gt;Istio&amp;#x27;s networking APIs revolve around ServiceEntry. ServiceEntry defines a service by its names—the set of hostnames clients use to call the service. DestinationRules define how clients communicate with a service: what load balancing, outlier detection, circuit breaking, and connection pooling strategies to use, which TLS settings to use, etc. VirtualServices configure how traffic flows to a service: L7 and L4 routing, traffic shaping, retries, timeouts, etc. Gateways configure how services are exposed outside of the mesh: what hostnames are routed to which services, how to serve certs for those hostnames, etc. Service proxies configure how services are exposed inside of the mesh, which services are available to which clients.&lt;/p&gt;&lt;h4&gt;Service Discovery&lt;/h4&gt;&lt;p&gt;Pilot integrates with different service discovery systems, such as the Kubernetes API server, Consul, and Eureka, to discover service and endpoint information about the local environment. Adapters in Pilot consume service discovery data from their source and synthesize ServiceEntry objects. For example, the integration with Kubernetes uses the Kubernetes SDK to watch the API server for service creation and service endpoint update events. The registry adapter in Pilot creates a ServiceEntry object based on this data. That ServiceEntry is used to update Pilot’s internal model and generate an updated configuration for the data plane.&lt;/p&gt;&lt;p&gt;Pilot registry adapters were previously implemented in Golang.  These adapters can now be detached from Pilot with the introduction of Galley. A service discovery adapter reads an existing service registry and produces a set of ServiceEntry objects as a separate job (or an offline process done by a continuous integration system). Those ServiceEntries can then be supplied to Galley as files and uploaded to the Kubernetes API server. Alternatively, you can create your own Mesh Config Protocol server and feed Galley the ServiceEntries. Static ServiceEntries can be useful to enable Istio in largely static environments (e.g., legacy VM-based deployments with rarely-changing IP addresses).&lt;/p&gt;&lt;p&gt;ServiceEntries bind a set of hostnames to endpoints to construct a Service. IP addresses or DNS names can be those endpoints. A network, locality, and weight can be assigned to each endpoint individually. ServiceEntries can define complex network topologies as a result of this. A service deployed across separate clusters (with different networks) that are geographically disparate (have different localities) can be created and have traffic split amongst its members by percentage (weights)—or in fact, by nearly any feature of the request.  Since Istio knows where distant networks&amp;#x27; ingress points are, when a service endpoint in a remote network is selected, the service proxy will route traffic to the remote network&amp;#x27;s ingress. We can even write policies to prefer local endpoints over endpoints in other localities but automatically failover to other localities if local endpoints are unhealthy. &lt;/p&gt;&lt;h3&gt;Config Serving&lt;/h3&gt;&lt;p&gt;Pilot constructs a model of the environment and state of a deployment using these three config sources—mesh config, networking config, and service discovery. As service proxy instances are deployed into the cluster, they connect to Pilot asynchronously. Pilot groups the service proxies based on their labels and the service to which they are sidecarred. Pilot creates Discovery Service (xDS) responses for each group of connected service proxies using this paradigm. Pilot transmits the current state of the environment and the configuration that reflects the environment when a service proxy connects. The model is updated regularly due to the generally dynamic nature of the underlying platform(s). Updates to the model mean updating the current set of xDS configurations. When the Discovery Service config is changed, Pilot computes the groups of affected service proxies and pushes the updated configuration to them.&lt;/p&gt;&lt;p&gt;Service proxy (Envoy) configuration can be divided into two main groups: &lt;/p&gt;&lt;ul&gt;&lt;li&gt;Listeners and Routes&lt;/li&gt;&lt;li&gt;Clusters and Endpoints&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Listeners define a set of filters (for example, an HTTP filter delivers Envoy&amp;#x27;s HTTP functionality) and how Envoy connects those filters to a port. These are of two types: physical and virtual. A physical listener is one where Envoy binds to the specified port. A virtual listener accepts traffic from a physical listener without binding to a port (instead, some physical listener must direct traffic to it). Listeners and Routes work together to configure how a Listener routes traffic to a specified Cluster (e.g., by matching on HTTP path or SNI name). A cluster is a collection of endpoints that includes information on how to contact them (TLS settings, load balancing strategy, connection pool settings, etc.).  A Cluster is analogous to a &amp;quot;service.&amp;quot; Finally, Endpoints are individual network hosts (IP addresses or DNS names) that Envoy will forward traffic to. &lt;/p&gt;&lt;h3&gt;Troubleshooting Pilot&lt;/h3&gt;&lt;p&gt;To examine the state of service proxies connected to Pilot, see these endpoints:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;/debug/edsz&lt;/code&gt; - prints all of Pilot’s set of pre-computed EDS responses; i.e. the endpoints it sends to each connected service proxy&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/adsz&lt;/code&gt; - prints the set of listeners, routes, and clusters pushed to each service proxy connected to Pilot&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/cdsz&lt;/code&gt; - prints the set of clusters pushed to each service proxy connected to Pilot&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/synz&lt;/code&gt; - print the status of ADS, CDS, and EDS connections of all service proxies connected to pilot. In particular this shows the last nonce Pilot is working with vs the last nonce Envoy has ACK’d, showing which Envoys are not accepting configuration updates&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;To examine Pilot’s understanding of the state of the world (its service registries), see these endpoints:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;/debug/registryz&lt;/code&gt; - print the set of services Pilot knows about across all registries&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/endpointz[?brief=1]&lt;/code&gt; - print the endpoints for every service Pilot knows about, including their ports, protocols, service accounts, labels, etc. If you provide the brief flag, the output will be a human-readable table (as opposed to a JSON blob for the normal version). This is a legacy endpoint and &lt;code&gt;/debug/endpointShardz&lt;/code&gt; provides strictly more information.&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/endpointShardz&lt;/code&gt; - print the endpoints for every service Pilot knows about, grouped by the registry that provided the endpoint. For example, if the same service exists in both Consul and Kubernetes, endpoints for the service will be grouped into two shards, one each for Consul and Kubernetes. This endpoint provides everything from &lt;code&gt;/debug/endpoint&lt;/code&gt; and more, including data like the endpoint’s network, locality, load balancer weight, representation in Envoy xDS config, etc.&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/workloadz&lt;/code&gt; - print the set of endpoints (“workloads”) connected to Pilot, and their metadata (like labels)&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/configz&lt;/code&gt; - print the entire set of Istio configuration Pilot knows about. Only validated config that Pilot is using to construct its model will be returned; useful for understanding situations where Pilot is not processing new config itself.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;You can also find miscellaneous endpoints with higher level debug information, be wading through these endpoints:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;/debug/authenticationz[?proxyID=pod_name.namespace]&lt;/code&gt; - prints the Istio authentication policy status of the target proxy for each host and port it’s serving, including: the name of the authentication policy affecting it, the name of the DestinationRule affecting it, whether the port expects mTLS, standard TLS, or plain text, and if settings across configuration cause a conflict for this port.&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/config_dump[?proxyID=pod_name.namespace]&lt;/code&gt; - prints the listeners, routes, and clusters for the given node; this can be diff’d directly against the output of &lt;code&gt;istioctl proxy-config&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;/debug/push_status&lt;/code&gt; - prints the status of each connected endpoint as of Pilot’s last push period; includes the status of each connected proxy, when the push period began (and ended), and the identities assigned to each port of each host.&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;Tracing Configuration&lt;/h3&gt;&lt;p&gt;In this section, we’ll use some tools to understand the before-and-after of Istio configuration and the resultant xDS configuration pushed to service proxies.&lt;/p&gt;&lt;h4&gt;Listeners&lt;/h4&gt;&lt;p&gt;Gateways and VirtualServices results in Listeners for Envoy. Gateways result in physical listeners (listeners that bind to a port on the network), while VirtualServices result in virtual listeners (listeners that do not bind to a port, but instead receive traffic from physical listeners). Demonstration of how Istio configuration manifests into xDS configuration by creating a Gateway:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: Gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  name: foo-com-gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  selector:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    istio: ingressgateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  servers:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - hosts:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - “*.foo.com”&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    port:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      number: 80&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      name: http&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      protocol: HTTP&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Creation of this Istio Gateway results in a single HTTP listener on port 80 on our Ingress Gateway.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl proxy-config listener istio-ingressgateway_PODNAME -o json -n istio-system&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;[&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;name&amp;quot;: &amp;quot;0.0.0.0_80&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;address&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            &amp;quot;socketAddress&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;address&amp;quot;: &amp;quot;0.0.0.0&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;portValue&amp;quot;: 80&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            }&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;filterChains&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;filters&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        &amp;quot;name&amp;quot;: &amp;quot;envoy.http_connection_manager&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;rds&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;config_source&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                    &amp;quot;ads&amp;quot;: {}&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;route_config_name&amp;quot;: &amp;quot;http.80&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;It&amp;#x27;s worth noting that the newly created filter is listening on address 0.0.0.0. This is the listener for all HTTP traffic on port 80, regardless of the host to which it is addressed. If we enable TLS termination for this Gateway, we&amp;#x27;ll see a new listener created just for the hosts we’re terminating TLS for, while the rest would fall into this catch-all listener.&lt;/p&gt;&lt;p&gt;Let’s bind a VirtualService to this Gateway&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: VirtualService&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; name: foo-default&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; hosts:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; - bar.foo.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; gateways:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; - foo-com-gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; http:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; - route:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;   - destination:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;       host: bar.foo.svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;See how it manifests as virtual listener.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl proxy-config listener istio-ingressgateway_PODNAME -o json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;[&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;name&amp;quot;: &amp;quot;0.0.0.0_80&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;address&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            &amp;quot;socketAddress&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;address&amp;quot;: &amp;quot;0.0.0.0&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;portValue&amp;quot;: 80&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            }&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;filterChains&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;filters&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        &amp;quot;name&amp;quot;: &amp;quot;envoy.http_connection_manager&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;rds&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;config_source&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                    &amp;quot;ads&amp;quot;: {}&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;route_config_name&amp;quot;: &amp;quot;http.80&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;We encourage that you try different protocols for the ports (or list a single Gateway with many ports with various protocols) to see how this results in different filters. Configuring different TLS settings within the Gateway also changes the generated Listener configuration. For each protocol you use, you&amp;#x27;ll notice a protocol-specific filter configured in the Listener (for HTTP, this is the http connection manager and its router, for MongoDB another, for TCP another, and so on). To explore how different combinations of hosts in the Gateway and VirtualService interact, we also recommend exploring different combinations of hosts in the Gateway and VirtualService.&lt;/p&gt;&lt;h4&gt;Routes&lt;/h4&gt;&lt;p&gt;We&amp;#x27;ve seen how VirtualServices cause Listeners to be created. In Envoy, the majority of the configuration you specify in VirtualServices manifests as Routes. Routes exist in a variety of flavors, with a set of routes for each protocol supported by Envoy.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl proxy-config route istio-ingressgateway_PODNAME -o json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl proxy-config route istio-ingressgateway_PODNAME -o json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;[&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;name&amp;quot;: &amp;quot;0.0.0.0_80&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;virtualHosts&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;name&amp;quot;: &amp;quot;bar.foo.com:80&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;domains&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    &amp;quot;bar.foo.com&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    &amp;quot;bar.foo.com:80&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                ],&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;routes&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        &amp;quot;match&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;prefix&amp;quot;: &amp;quot;/&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        &amp;quot;route&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;cluster&amp;quot;: &amp;quot;outbound|8000||bar.foo.svc.cluster.local&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;timeout&amp;quot;: &amp;quot;0s&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;retryPolicy&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;retryOn&amp;quot;: &amp;quot;connect-failure,refused-stream,unavailable,cancelled,resource-exhausted,retriable-status-codes&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;numRetries&amp;quot;: 2,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;retryHostPredicate&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                        &amp;quot;name&amp;quot;: &amp;quot;envoy.retry_host_predicates.previous_hosts&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                    }&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                ],&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;hostSelectionRetryMaxAttempts&amp;quot;: &amp;quot;3&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                &amp;quot;retriableStatusCodes&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                    503&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                                ]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;38&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Example 7.5 -  Envoy Route (RDS) configuration for the VirtualService in Example 7.3. Notice the default Retry Policy and the embedded Mixer configuration (which is used for reporting telemetry back to Mixer).&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;We can update our Route to include some match conditions to see how this results in different Routes for Envoy (Example 7-6):&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: VirtualService&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;44&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; name: foo-default&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;46&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;47&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  hosts:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - bar.foo.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;49&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  gateways:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - foo-com-gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  http:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;52&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - match:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;53&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - uri:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;54&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        prefix: /whiz&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;55&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    route:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;56&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - destination:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;57&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        host: whiz.foo.svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;58&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - route:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;59&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - destination:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        host: bar.foo.svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;We can update our Route to include some match conditions to see how this results in different Routes for Envoy&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: VirtualService&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt; name: foo-default&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  hosts:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - bar.foo.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  gateways:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - foo-com-gateway&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  http:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - match:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - uri:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        prefix: /whiz&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    route:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - destination:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        host: whiz.foo.svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - route:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - destination:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        host: bar.foo.svc.cluster.local&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Similarly we can add retries, split traffic amongst several destinations, inject faults, and more. All of these options in VirtualServices manifest as Routes in Envoy.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl proxy-config route istio-ingressgateway_PODNAME -o json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;[&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;name&amp;quot;: &amp;quot;http.80&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;virtualHosts&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;name&amp;quot;: &amp;quot;bar.foo.com:80&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;domains&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    &amp;quot;bar.foo.com&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    &amp;quot;bar.foo.com:80&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                ],&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;routes&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        &amp;quot;match&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;prefix&amp;quot;: &amp;quot;/whiz&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        &amp;quot;route&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;cluster&amp;quot;: &amp;quot;outbound|80||whiz.foo.svc.cluster.local&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        &amp;quot;match&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;prefix&amp;quot;: &amp;quot;/&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                        &amp;quot;route&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                            &amp;quot;cluster&amp;quot;: &amp;quot;outbound|80||bar.foo.svc.cluster.local&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Clusters&lt;/h4&gt;&lt;p&gt;We can see that Istio creates a cluster for each service and port in the mesh if we use &lt;code&gt;istioctl&lt;/code&gt; to look at clusters. To see a new Cluster emerge in Envoy, we can construct a new ServiceEntry:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: ServiceEntry&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  name: http-server&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  hosts:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - some.domain.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  ports:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - number: 80&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    name: http&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    protocol: http&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  resolution: STATIC&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  endpoints:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - address: 2.2.2.2&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl proxy-config cluster istio-ingressgateway_PODNAME -o json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;[&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;name&amp;quot;: &amp;quot;outbound|80||some.domain.com&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;type&amp;quot;: &amp;quot;EDS&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;edsClusterConfig&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            &amp;quot;edsConfig&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;ads&amp;quot;: {}&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            &amp;quot;serviceName&amp;quot;: &amp;quot;outbound|80||some.domain.com&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;connectTimeout&amp;quot;: &amp;quot;10s&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;circuitBreakers&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            &amp;quot;thresholds&amp;quot;: [&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    &amp;quot;maxRetries&amp;quot;: 1024&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                }&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            ]&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        }&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;We can experiment with adding new ports (with different protocols) to the ServiceEntry to see how this affects the generation of new Clusters. A DestinationRule is another tool that may be used to generate and update Clusters in Istio. We establish new Clusters by creating Subsets, and we impact the configuration inside the Cluster by modifying load balancing and TLS settings.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: networking.istio.io/v1alpha3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: DestinationRule&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  name: some-domain-com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  host: some.domain.com&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  subsets:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - name: v1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    labels:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      version: v1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - name: v2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    labels:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      version: v2&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl proxy-config cluster istio-ingressgateway_PODNAME -o json&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;[&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;name&amp;quot;: &amp;quot;outbound|80||some.domain.com&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;name&amp;quot;: &amp;quot;outbound|80|v1|some.domain.com&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;metadata&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            &amp;quot;filterMetadata&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                &amp;quot;istio&amp;quot;: {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                    &amp;quot;config&amp;quot;: &amp;quot;/apis/networking/v1alpha3/namespaces/default/destination-rule/some-domain-com&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;                }&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;            }&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        }&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    {&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;        &amp;quot;name&amp;quot;: &amp;quot;outbound|80|v2|some.domain.com&amp;quot;,&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    },&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Notice that we still have our original cluster, outbound|80||some.domain.com, but that we got a new cluster for each Subset we defined as well. Istio annotates the Envoy configuration with the rule that resulted in it being created to help debug.&lt;/p&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Service Proxy]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Service Proxy",
  "thumbnail": "../../../assets/images/service-mesh-icons/envoy/icon/color/envoy-icon-color.svg",
  "type": "Article",
  "category": "Service Mesh",
  "mesh": "Istio",
  "technology": "Kubernetes",
  "tags": ["Istio", "Envoy"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("h3", null, "What Is a Service Proxy?"), mdx("p", null, "A service proxy is a client-side mediator that handles requests for a service. The service proxy allows applications to send and receive messages as method calls via a channel. Service proxy connections can be created as needed or persist open connections to facilitate pooling. Applications are oblivious to the data plane's existence. As applications conduct service-to-service calls, service proxies are transparently inserted. Inbound (ingress) and outbound (egress) cluster network traffic are handled by data planes. Whether traffic is entering the mesh (ingressing) or leaving the mesh (egressing), application service traffic is directed first to the service proxy for handling. In Istio, traffic is transparently intercepted using iptables rules and redirected to the service proxy."), mdx("p", null, "Remember that Pilot configures traffic policy and service proxies implement it. The data plane is a collection of service proxies. Service proxies are responsible for health checks, routing, load balancing, authentication, authorization, and the production of observable signals by intercepting every packet in the request. As the service may change from location to location, proxies provide indirection so that clients may point to the same location (e.g., proxy.example.com), representing a permanent reference. They add resilience to distributed systems."), mdx("h3", null, "Envoy Proxy Overview"), mdx("p", null, "The versatile and performant Envoy has evolved as an open source, application-level service proxy, living up to its tagline as the universal data plane API. Lyft developed Envoy in order to solve major distributed systems problems. Envoy has had broad reuse\xA0and has been integrated into the cloud native ecosystem."), mdx("h4", null, "Why Envoy?"), mdx("p", null, "Envoy was originally intended to be used as an edge proxy rather than a sidecar. Envoy transitioned to the sidecar pattern over time. The concept of hot reloads vs. hot restarts was at the center of the decision for the Istio project to leverage Envoy. Envoy's runtime configuration has always been API-driven, allowing it to drain and hot reload its own process with an old configuration with a new process and new configuration (displacing itself). Envoy achieves hot reloading of its processes by shared memory and communication through a Unix Domain Socket (UDS), in a manner that resembles GitHub's tool for zero-downtime HAProxy reloads. Additionally, and uniquely, Envoy offers an Aggregated Discovery Service (ADS) for delivering the data for each xDS API."), mdx("h4", null, "HTTP/2 and gRPC"), mdx("p", null, "Envoy stood apart from other proxies at the time because of its early support for HTTP/2 and gRPC. HTTP/2 significantly improves on HTTP/1.1 in that HTTP/2 enables request multiplexing over a single TCP connection. Proxies that support HTTP/2 benefit from the reduced overhead of combining several connections into a single one. HTTP/2 allows clients to send numerous parallel requests and load resources preemptively using server-push."), mdx("p", null, "Envoy is HTTP/1.1 and HTTP/2 compatible, including proxying compatibility for both downstream and upstream protocols. This means Envoy can accept incoming HTTP/2 connections and proxy them to upstream HTTP/2 clusters, but it can also take HTTP/1.1 connections and proxy them to HTTP/2 clusters (and vice-versa)."), mdx("p", null, "gRPC is an RPC protocol that uses protocol buffers on top of HTTP/2. Envoy supports gRPC natively (over HTTP/2) and can also bridge an HTTP/1.1 client to gRPC. Envoy has the ability to operate as a gRPC-JSON transcoder. The gRPC-JSON transcoder functionality allows a client to send HTTP/1.1 requests with a JSON payload to Envoy, which translates the request into the corresponding gRPC call and subsequently translates the response message back into JSON. These are powerful capabilities (and challenging to execute correctly), which set Envoy apart from other service proxies."), mdx("h3", null, "Envoy in Istio"), mdx("p", null, "As an out of process proxy, Envoy transparently forms the base unit of the mesh. Akin to proxies in other service meshes, it is the workhorse of Istio. Istio deploys Envoy sidecarred to application services. Identified as ", mdx("code", null, "istio-proxy"), " in deployment files, Envoy does not require root privileges to run, but runs as user 1337 (non root)."), mdx("h3", null, "Sidecar Injection (or Sidecarring)"), mdx("p", null, "There are two steps to adding a service proxy: sidecar injection and network capture. Sidecar injection is the method of adding a proxy to a given application. Network capture is the method of directing inbound traffic to the proxy (instead of the application) and outbound traffic to the proxy (instead of directly back to the client or directly to subsequent upstream application services)."), mdx("h4", null, "Manual Sidecar Injection"), mdx("p", null, mdx("code", null, "Istioctl"), " can be used to manually inject\xA0the Envoy sidecar definition into Kubernetes manifests manually. Use ", mdx("code", null, "istioctl"), "\u2019s ", mdx("code", null, "kube-inject"), " capability to manually inject the sidecar into deployment manifests by manipulating yaml."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl kube-inject -f samples/sleep/sleep.yaml | kubectl apply -f -\n")), mdx("p", null, "You can update Kubernetes specifications on-the-fly at the time of applying them to Kubernetes for scheduling. Alternatively, you might use the ", mdx("code", null, "istioctl kube-inject"), " utility like so:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl apply -f <(istioctl kube-inject -f <resource.yaml>)\n")), mdx("p", null, "If you don\u2019t have the source manifests available, you can update an existing Kubernetes deployment to bring its services onto the mesh:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get deployment -o yaml | istioctl kube-inject -f - | kubectl apply -f -\n")), mdx("p", null, "Let's look at an example of an existing application being onboarded onto the mesh. Let's use a freshly installed copy of BookInfo as an example of a Kubernetes application that isn't\xA0deployed on\xA0the service mesh yet. We'll start with\xA0exploring BookInfo's pods."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get pods\nNAME                              READY   STATUS    RESTARTS   AGE\ndetails-v1-69658dcf78-nghss       1/1     Running   0          43m\nproductpage-v1-6b6798cb84-nzfhd   1/1     Running   0          43m\nratings-v1-6f97d68b6-v6wj6        1/1     Running   0          43m\nreviews-v1-7c98dcd6dc-b974c       1/1     Running   0          43m\nreviews-v2-6677766d47-2qz2g       1/1     Running   0          43m\nreviews-v3-79f9bcc54c-sjndp       1/1     Running   0          43m\n")), mdx("p", null, "The atomic unit of deployment in Kubernetes is a Pod.\xA0 Since a Pod is a collection of containers, it can be one or more containers deployed atomically together. In our example, we can see that each of BookInfo's pods is only executing one container. When ", mdx("code", null, "istioctl kube-inject"), "\xA0is run against\xA0\xA0on BookInfo's manifests, it adds another container to the Pod specification but does not deploy anything yet."), mdx("p", null, mdx("code", null, "istioctl kube-inject"), " supports modification of Pod-based Kubernetes objects (Job, DaemonSet, ReplicaSet, Pod and Deployment) that may be embedded into long yaml files containing other Kubernetes objects. ", mdx("code", null, "Istioctl kube-inject"), " will parse the other Kubernetes objects without modification. Unsupported resources are left unmodified so it is safe to run kube-inject over a single file that contains multiple Service, ConfigMap, Deployment, etc. definitions for a complex application. It is best to do this when the resource is initially created."), mdx("p", null, "In order to onboard this existing application, we can execute ", mdx("code", null, "istioctl kube-inject"), " against each Deployment and have a rolling update of that Deployment initiated by Kubernetes as shown below. Let\u2019s start with the ", mdx("code", null, "productpage"), " service."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get deployment productpage-v1 -o yaml | istioctl kube-inject -f - | kubectl apply -f -\ndeployment.extensions/productpage-v1 configured\n")), mdx("p", null, "We now notice that the productpage pod has grown to two containers when we look at the BookInfo pods again. Istio\u2019s sidecar has been successfully injected. The rest of BookInfo\u2019s application services need to be onboarded in order for BookInfo as an application to work."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get pods\nNAME                              READY   STATUS    RESTARTS   AGE\ndetails-v1-69658dcf78-nghss       1/1     Running   0          45m\nproductpage-v1-64647d4c5f-z95dl   2/2     Running   0          64s\nratings-v1-6f97d68b6-v6wj6        1/1     Running   0          45m\nreviews-v1-7c98dcd6dc-b974c       1/1     Running   0          45m\nreviews-v2-6677766d47-2qz2g       1/1     Running   0          45m\nreviews-v3-79f9bcc54c-sjndp       1/1     Running   0          45m\n")), mdx("p", null, "You may choose to do this manual injection operation once and persist the new manifest file with istio-proxy (Envoy) inserted instead of ad-hoc onboarding of a running application. You can create a persistent version of the sidecar injected deployment outputting the results of ", mdx("code", null, "istioctl kube-inject"), " to a file. As Istio evolves the default sidecar configuration is subject to change."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl kube-inject -f deployment.yaml -o deployment-injected.yaml\n")), mdx("p", null, "Or like so:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ istioctl kube-inject -f deployment.yaml > deployment-injected.yaml\n")), mdx("h4", null, "Ad-hoc Sidecarring"), mdx("p", null, "Sidecar injection is responsible for configuring network capture. Injection and network capture can be selectively applied to enable incremental adoption of Istio. Using the BookInfo sample application as an example, let\u2019s take the ", mdx("code", null, "productpage"), " service as the external-facing service and selectively remove this service (and just this service out of the set of four) from the service mesh. Let's start by checking for the presence of its sidecarred service proxy."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get pods productpage-8459b4f9cf-tfblj -o jsonpath=\"{.spec.containers[*].image}\"\nlayer5/istio-bookinfo-productpage:v1 docker.io/istio/proxyv2:1.0.5\n")), mdx("p", null, "As you can see, productpage container is our application container, while the istio/proxy is the service proxy (Envoy) that Istio injected into the pod. To manually onboard and offboard a deployment onto and off of the service mesh, you can manipulate annotation within its Kubernetes Deployment specification."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl patch deployment nginx --type=json --patch='[{\"op\": \"add\", \"path\": \"/spec/template/metadata/annotations\", \"value\": {\"sidecar.istio.io/inject\": \"false\"}}]'\ndeployment.extensions/productpage-v1 patched\n")), mdx("p", null, "On opening your browser to the ", mdx("code", null, "productpage"), " application, and you\u2019ll find that it is still being served through Istio\u2019s Ingress Gateway, but that its pods no longer have sidecars. Hence, the productpage app has been removed from the mesh."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "UNAVAILABLE:upstream connect error or disconnect/reset before headers\n")), mdx("h4", null, "Automatic Sidecar Injection"), mdx("p", null, "No code change to receive much more visibility into how your services are behaving and how they are being interacted gives Istio a magical feeling once your services are on the mesh. Automatic sidecar injection is the magical feeling you get as you go to onramp your services.Not only does automatic sidecar injection eliminate the need to alter your code, but it also eliminates the need to change your Kubernetes manifests. Automatic sidecar injection in Kubernetes relies on mutating admission webhooks. The ", mdx("code", null, "istio-sidecar-injector"), " is added as a mutating webhook configuration resource when Istio is installed on Kubernetes."), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get mutatingwebhookconfigurations\nNAME                                    CREATED AT\nistio-sidecar-injector                  2019-04-18T16:35:03Z\nlinkerd-proxy-injector-webhook-config   2019-04-18T16:48:49Z\n")), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get mutatingwebhookconfigurations istio-sidecar-injector -o yaml\n\napiVersion: admissionregistration.k8s.io/v1beta1\nkind: MutatingWebhookConfiguration\nmetadata:\n  creationTimestamp: \"2019-04-18T16:35:03Z\"\n  generation: 2\n  labels:\n    app: sidecarInjectorWebhook\n    chart: sidecarInjectorWebhook\n    heritage: Tiller\n    release: istio\n  name: istio-sidecar-injector\n  resourceVersion: \"192908\"\n  selfLink: /apis/admissionregistration.k8s.io/v1beta1/mutatingwebhookconfigurations/istio-sidecar-injector\n  uid: eaa85688-61f7-11e9-a968-00505698ee31\nwebhooks:\n- admissionReviewVersions:\n  - v1beta1\n  clientConfig:\n    caBundle: <redacted>\n    service:\n      name: istio-sidecar-injector\n      namespace: istio-system\n      path: /inject\n  failurePolicy: Fail\n  name: sidecar-injector.istio.io\n  namespaceSelector:\n    matchLabels:\n      istio-injection: enabled\n  rules:\n  - apiGroups:\n    - \"\"\n    apiVersions:\n    - v1\n    operations:\n    - CREATE\n    resources:\n    - pods\n    scope: '*'\n  sideEffects: Unknown\n  timeoutSeconds: 30\n")), mdx("p", null, "If the namespace contains the ", mdx("code", null, "istio-injection=enabled"), "\xA0label, Kubernetes will transmit all Pod creation events to the ", mdx("code", null, "istio-sidecar-injector"), "\xA0service (in the istio-system namespace) if this mutating\xA0webhook is registered. The injector service will then modify the PodSpec to include two more containers, one for the init-container to configure traffic rules and the other for istio-proxy (Envoy) to perform proxying.\xA0 The sidecar injector service uses a template to add these two additional containers; the template may be found in the ", mdx("code", null, "istio-sidecar-injector configmap"), "."), mdx("p", null, "Kubernetes lifecycle allows customization of resources before they are committed to the etcd store, the \u2018source of truth\u2019 for Kubernetes configuration. When an individual Pod is created (either via kubectl or a Deployment resource), it goes through this same lifecycle, hitting mutating admission webhooks which modify the pod before it actually gets applied."), mdx("h4", null, "Kubernetes Labels"), mdx("p", null, "Automatic sidecar injection relies on labels to identify which pods to inject Istio\u2019s service proxy and initialize as pod on the data plane. Kubernetes objects, like pods and namespaces, can have user-defined labels attached to them. Labels are essentially ", mdx("code", null, "key:value"), " pairs like you finding in other systems that support the concept of tags. Webhook Admission controller relies on labels to select the namespaces they apply to. Istio-injection is the specific label that Istio uses. Familiarize by labeling the default namespace with ", mdx("code", null, "istio-injection=enabled"), ":"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl label namespace default istio-injection=enabled\n")), mdx("p", null, "Confirm which namespaces have the istio-injection label associated:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "$ kubectl get namespace -L istio-injection\nNAME           STATUS    AGE       ISTIO-INJECTION\ndefault        Active    1h        enabled\nDocker         Active    1h        enabled\nistio-system   Active    1h        disabled\nkube-public    Active    1h        \nkube-system    Active    1h\n")), mdx("p", null, "Notice that only the ", mdx("code", null, "istio-system"), " namespace has the ", mdx("code", null, "istio-injection"), " label assigned. By virtue of having the ", mdx("code", null, "istio-injection"), " label and its value set to disabled, the ", mdx("code", null, "istio-system"), " namespace will not have service proxies automatically injected into their pods upon deployment. This does not mean that pods in this namespace cannot have service proxies. It just means that service proxies won\u2019t be automatically injected."), mdx("p", null, "One caveat to watch out for, when using the ", mdx("code", null, "namespaceSelector"), ", make sure that the namespace(s) you are selecting really has the label you are using. Keep in mind that the built-in namespaces like default and ", mdx("code", null, "kube-system"), " don\u2019t have labels out of the box."), mdx("p", null, "Conversely, the namespace in the metadata section is the actual name of the namespace, not a label:"), mdx("pre", null, mdx("code", {
    parentName: "pre"
  }, "apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: test-network-policy\n  namespace: default\nspec:\n...\n")), mdx("h4", null, "Kubernetes Init Containers"), mdx("p", null, "Very similar to cloud-init for those familiar with VM provisioning, init containers in Kubernetes allows you to run temporary containers to perform a task before engaging your primary container(s). Init containers are Init containers in Kubernetes allow you to run temporary containers to execute a task before activating your principal container, comparable to cloud-init for people acquainted with VM provisioning (s). Init containers are frequently used for provisioning operations such as asset bundling, database migration, and cloning a git repository onto a volume. In the instance of Istio, init containers are used to set up network filters - iptables - that control traffic flow. used to perform provisioning tasks like bundling assets, performing database migration, or clone a git repository into a volume. In Istio\u2019s case, init containers are used to setup network filters - iptables to control the flow of traffic.")));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/service-proxy</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/service-proxy</guid><enclosure url="https://layer5.io/static/ef8ca37dab5018498438c17e69966940/envoy-icon-color.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;h3&gt;What Is a Service Proxy?&lt;/h3&gt;&lt;p&gt;A service proxy is a client-side mediator that handles requests for a service. The service proxy allows applications to send and receive messages as method calls via a channel. Service proxy connections can be created as needed or persist open connections to facilitate pooling. Applications are oblivious to the data plane&amp;#x27;s existence. As applications conduct service-to-service calls, service proxies are transparently inserted. Inbound (ingress) and outbound (egress) cluster network traffic are handled by data planes. Whether traffic is entering the mesh (ingressing) or leaving the mesh (egressing), application service traffic is directed first to the service proxy for handling. In Istio, traffic is transparently intercepted using iptables rules and redirected to the service proxy.&lt;/p&gt;&lt;p&gt;Remember that Pilot configures traffic policy and service proxies implement it. The data plane is a collection of service proxies. Service proxies are responsible for health checks, routing, load balancing, authentication, authorization, and the production of observable signals by intercepting every packet in the request. As the service may change from location to location, proxies provide indirection so that clients may point to the same location (e.g., proxy.example.com), representing a permanent reference. They add resilience to distributed systems.&lt;/p&gt;&lt;h3&gt;Envoy Proxy Overview&lt;/h3&gt;&lt;p&gt;The versatile and performant Envoy has evolved as an open source, application-level service proxy, living up to its tagline as the universal data plane API. Lyft developed Envoy in order to solve major distributed systems problems. Envoy has had broad reuse and has been integrated into the cloud native ecosystem.&lt;/p&gt;&lt;h4&gt;Why Envoy?&lt;/h4&gt;&lt;p&gt;Envoy was originally intended to be used as an edge proxy rather than a sidecar. Envoy transitioned to the sidecar pattern over time. The concept of hot reloads vs. hot restarts was at the center of the decision for the Istio project to leverage Envoy. Envoy&amp;#x27;s runtime configuration has always been API-driven, allowing it to drain and hot reload its own process with an old configuration with a new process and new configuration (displacing itself). Envoy achieves hot reloading of its processes by shared memory and communication through a Unix Domain Socket (UDS), in a manner that resembles GitHub&amp;#x27;s tool for zero-downtime HAProxy reloads. Additionally, and uniquely, Envoy offers an Aggregated Discovery Service (ADS) for delivering the data for each xDS API.&lt;/p&gt;&lt;h4&gt;HTTP/2 and gRPC&lt;/h4&gt;&lt;p&gt;Envoy stood apart from other proxies at the time because of its early support for HTTP/2 and gRPC. HTTP/2 significantly improves on HTTP/1.1 in that HTTP/2 enables request multiplexing over a single TCP connection. Proxies that support HTTP/2 benefit from the reduced overhead of combining several connections into a single one. HTTP/2 allows clients to send numerous parallel requests and load resources preemptively using server-push.&lt;/p&gt;&lt;p&gt;Envoy is HTTP/1.1 and HTTP/2 compatible, including proxying compatibility for both downstream and upstream protocols. This means Envoy can accept incoming HTTP/2 connections and proxy them to upstream HTTP/2 clusters, but it can also take HTTP/1.1 connections and proxy them to HTTP/2 clusters (and vice-versa).&lt;/p&gt;&lt;p&gt;gRPC is an RPC protocol that uses protocol buffers on top of HTTP/2. Envoy supports gRPC natively (over HTTP/2) and can also bridge an HTTP/1.1 client to gRPC. Envoy has the ability to operate as a gRPC-JSON transcoder. The gRPC-JSON transcoder functionality allows a client to send HTTP/1.1 requests with a JSON payload to Envoy, which translates the request into the corresponding gRPC call and subsequently translates the response message back into JSON. These are powerful capabilities (and challenging to execute correctly), which set Envoy apart from other service proxies.&lt;/p&gt;&lt;h3&gt;Envoy in Istio&lt;/h3&gt;&lt;p&gt;As an out of process proxy, Envoy transparently forms the base unit of the mesh. Akin to proxies in other service meshes, it is the workhorse of Istio. Istio deploys Envoy sidecarred to application services. Identified as &lt;code&gt;istio-proxy&lt;/code&gt; in deployment files, Envoy does not require root privileges to run, but runs as user 1337 (non root).&lt;/p&gt;&lt;h3&gt;Sidecar Injection (or Sidecarring)&lt;/h3&gt;&lt;p&gt;There are two steps to adding a service proxy: sidecar injection and network capture. Sidecar injection is the method of adding a proxy to a given application. Network capture is the method of directing inbound traffic to the proxy (instead of the application) and outbound traffic to the proxy (instead of directly back to the client or directly to subsequent upstream application services).&lt;/p&gt;&lt;h4&gt;Manual Sidecar Injection&lt;/h4&gt;&lt;p&gt;&lt;code&gt;Istioctl&lt;/code&gt; can be used to manually inject the Envoy sidecar definition into Kubernetes manifests manually. Use &lt;code&gt;istioctl&lt;/code&gt;’s &lt;code&gt;kube-inject&lt;/code&gt; capability to manually inject the sidecar into deployment manifests by manipulating yaml.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl kube-inject -f samples/sleep/sleep.yaml | kubectl apply -f -&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;You can update Kubernetes specifications on-the-fly at the time of applying them to Kubernetes for scheduling. Alternatively, you might use the &lt;code&gt;istioctl kube-inject&lt;/code&gt; utility like so:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl apply -f &amp;lt;(istioctl kube-inject -f &amp;lt;resource.yaml&amp;gt;)&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;If you don’t have the source manifests available, you can update an existing Kubernetes deployment to bring its services onto the mesh:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get deployment -o yaml | istioctl kube-inject -f - | kubectl apply -f -&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Let&amp;#x27;s look at an example of an existing application being onboarded onto the mesh. Let&amp;#x27;s use a freshly installed copy of BookInfo as an example of a Kubernetes application that isn&amp;#x27;t deployed on the service mesh yet. We&amp;#x27;ll start with exploring BookInfo&amp;#x27;s pods.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get pods&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME                              READY   STATUS    RESTARTS   AGE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;details-v1-69658dcf78-nghss       1/1     Running   0          43m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;productpage-v1-6b6798cb84-nzfhd   1/1     Running   0          43m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ratings-v1-6f97d68b6-v6wj6        1/1     Running   0          43m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;reviews-v1-7c98dcd6dc-b974c       1/1     Running   0          43m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;reviews-v2-6677766d47-2qz2g       1/1     Running   0          43m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;reviews-v3-79f9bcc54c-sjndp       1/1     Running   0          43m&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;The atomic unit of deployment in Kubernetes is a Pod.  Since a Pod is a collection of containers, it can be one or more containers deployed atomically together. In our example, we can see that each of BookInfo&amp;#x27;s pods is only executing one container. When &lt;code&gt;istioctl kube-inject&lt;/code&gt; is run against  on BookInfo&amp;#x27;s manifests, it adds another container to the Pod specification but does not deploy anything yet.&lt;/p&gt;&lt;p&gt;&lt;code&gt;istioctl kube-inject&lt;/code&gt; supports modification of Pod-based Kubernetes objects (Job, DaemonSet, ReplicaSet, Pod and Deployment) that may be embedded into long yaml files containing other Kubernetes objects. &lt;code&gt;Istioctl kube-inject&lt;/code&gt; will parse the other Kubernetes objects without modification. Unsupported resources are left unmodified so it is safe to run kube-inject over a single file that contains multiple Service, ConfigMap, Deployment, etc. definitions for a complex application. It is best to do this when the resource is initially created.&lt;/p&gt;&lt;p&gt;In order to onboard this existing application, we can execute &lt;code&gt;istioctl kube-inject&lt;/code&gt; against each Deployment and have a rolling update of that Deployment initiated by Kubernetes as shown below. Let’s start with the &lt;code&gt;productpage&lt;/code&gt; service.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get deployment productpage-v1 -o yaml | istioctl kube-inject -f - | kubectl apply -f -&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;deployment.extensions/productpage-v1 configured&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;We now notice that the productpage pod has grown to two containers when we look at the BookInfo pods again. Istio’s sidecar has been successfully injected. The rest of BookInfo’s application services need to be onboarded in order for BookInfo as an application to work.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get pods&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME                              READY   STATUS    RESTARTS   AGE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;details-v1-69658dcf78-nghss       1/1     Running   0          45m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;productpage-v1-64647d4c5f-z95dl   2/2     Running   0          64s&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;ratings-v1-6f97d68b6-v6wj6        1/1     Running   0          45m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;reviews-v1-7c98dcd6dc-b974c       1/1     Running   0          45m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;reviews-v2-6677766d47-2qz2g       1/1     Running   0          45m&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;reviews-v3-79f9bcc54c-sjndp       1/1     Running   0          45m&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;You may choose to do this manual injection operation once and persist the new manifest file with istio-proxy (Envoy) inserted instead of ad-hoc onboarding of a running application. You can create a persistent version of the sidecar injected deployment outputting the results of &lt;code&gt;istioctl kube-inject&lt;/code&gt; to a file. As Istio evolves the default sidecar configuration is subject to change.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl kube-inject -f deployment.yaml -o deployment-injected.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Or like so:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ istioctl kube-inject -f deployment.yaml &amp;gt; deployment-injected.yaml&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Ad-hoc Sidecarring&lt;/h4&gt;&lt;p&gt;Sidecar injection is responsible for configuring network capture. Injection and network capture can be selectively applied to enable incremental adoption of Istio. Using the BookInfo sample application as an example, let’s take the &lt;code&gt;productpage&lt;/code&gt; service as the external-facing service and selectively remove this service (and just this service out of the set of four) from the service mesh. Let&amp;#x27;s start by checking for the presence of its sidecarred service proxy.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get pods productpage-8459b4f9cf-tfblj -o jsonpath=&amp;quot;{.spec.containers[*].image}&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;layer5/istio-bookinfo-productpage:v1 docker.io/istio/proxyv2:1.0.5&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;As you can see, productpage container is our application container, while the istio/proxy is the service proxy (Envoy) that Istio injected into the pod. To manually onboard and offboard a deployment onto and off of the service mesh, you can manipulate annotation within its Kubernetes Deployment specification.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl patch deployment nginx --type=json --patch=&amp;#x27;[{&amp;quot;op&amp;quot;: &amp;quot;add&amp;quot;, &amp;quot;path&amp;quot;: &amp;quot;/spec/template/metadata/annotations&amp;quot;, &amp;quot;value&amp;quot;: {&amp;quot;sidecar.istio.io/inject&amp;quot;: &amp;quot;false&amp;quot;}}]&amp;#x27;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;deployment.extensions/productpage-v1 patched&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;On opening your browser to the &lt;code&gt;productpage&lt;/code&gt; application, and you’ll find that it is still being served through Istio’s Ingress Gateway, but that its pods no longer have sidecars. Hence, the productpage app has been removed from the mesh.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;UNAVAILABLE:upstream connect error or disconnect/reset before headers&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Automatic Sidecar Injection&lt;/h4&gt;&lt;p&gt;No code change to receive much more visibility into how your services are behaving and how they are being interacted gives Istio a magical feeling once your services are on the mesh. Automatic sidecar injection is the magical feeling you get as you go to onramp your services.Not only does automatic sidecar injection eliminate the need to alter your code, but it also eliminates the need to change your Kubernetes manifests. Automatic sidecar injection in Kubernetes relies on mutating admission webhooks. The &lt;code&gt;istio-sidecar-injector&lt;/code&gt; is added as a mutating webhook configuration resource when Istio is installed on Kubernetes.&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get mutatingwebhookconfigurations&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME                                    CREATED AT&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-sidecar-injector                  2019-04-18T16:35:03Z&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;linkerd-proxy-injector-webhook-config   2019-04-18T16:48:49Z&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get mutatingwebhookconfigurations istio-sidecar-injector -o yaml&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot; style=&quot;display:inline-block&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: admissionregistration.k8s.io/v1beta1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: MutatingWebhookConfiguration&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  creationTimestamp: &amp;quot;2019-04-18T16:35:03Z&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  generation: 2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  labels:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    app: sidecarInjectorWebhook&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    chart: sidecarInjectorWebhook&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    heritage: Tiller&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    release: istio&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  name: istio-sidecar-injector&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  resourceVersion: &amp;quot;192908&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  selfLink: /apis/admissionregistration.k8s.io/v1beta1/mutatingwebhookconfigurations/istio-sidecar-injector&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  uid: eaa85688-61f7-11e9-a968-00505698ee31&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;webhooks:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;- admissionReviewVersions:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - v1beta1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  clientConfig:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    caBundle: &amp;lt;redacted&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    service:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      name: istio-sidecar-injector&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      namespace: istio-system&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      path: /inject&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;26&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  failurePolicy: Fail&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  name: sidecar-injector.istio.io&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  namespaceSelector:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    matchLabels:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;      istio-injection: enabled&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  rules:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  - apiGroups:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - &amp;quot;&amp;quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    apiVersions:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - v1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    operations:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - CREATE&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;38&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    resources:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    - pods&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;    scope: &amp;#x27;*&amp;#x27;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  sideEffects: Unknown&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  timeoutSeconds: 30&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;If the namespace contains the &lt;code&gt;istio-injection=enabled&lt;/code&gt; label, Kubernetes will transmit all Pod creation events to the &lt;code&gt;istio-sidecar-injector&lt;/code&gt; service (in the istio-system namespace) if this mutating webhook is registered. The injector service will then modify the PodSpec to include two more containers, one for the init-container to configure traffic rules and the other for istio-proxy (Envoy) to perform proxying.  The sidecar injector service uses a template to add these two additional containers; the template may be found in the &lt;code&gt;istio-sidecar-injector configmap&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;Kubernetes lifecycle allows customization of resources before they are committed to the etcd store, the ‘source of truth’ for Kubernetes configuration. When an individual Pod is created (either via kubectl or a Deployment resource), it goes through this same lifecycle, hitting mutating admission webhooks which modify the pod before it actually gets applied.&lt;/p&gt;&lt;h4&gt;Kubernetes Labels&lt;/h4&gt;&lt;p&gt;Automatic sidecar injection relies on labels to identify which pods to inject Istio’s service proxy and initialize as pod on the data plane. Kubernetes objects, like pods and namespaces, can have user-defined labels attached to them. Labels are essentially &lt;code&gt;key:value&lt;/code&gt; pairs like you finding in other systems that support the concept of tags. Webhook Admission controller relies on labels to select the namespaces they apply to. Istio-injection is the specific label that Istio uses. Familiarize by labeling the default namespace with &lt;code&gt;istio-injection=enabled&lt;/code&gt;:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl label namespace default istio-injection=enabled&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Confirm which namespaces have the istio-injection label associated:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;$ kubectl get namespace -L istio-injection&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;NAME           STATUS    AGE       ISTIO-INJECTION&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;default        Active    1h        enabled&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;Docker         Active    1h        enabled&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;istio-system   Active    1h        disabled&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kube-public    Active    1h        &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kube-system    Active    1h&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;p&gt;Notice that only the &lt;code&gt;istio-system&lt;/code&gt; namespace has the &lt;code&gt;istio-injection&lt;/code&gt; label assigned. By virtue of having the &lt;code&gt;istio-injection&lt;/code&gt; label and its value set to disabled, the &lt;code&gt;istio-system&lt;/code&gt; namespace will not have service proxies automatically injected into their pods upon deployment. This does not mean that pods in this namespace cannot have service proxies. It just means that service proxies won’t be automatically injected.&lt;/p&gt;&lt;p&gt;One caveat to watch out for, when using the &lt;code&gt;namespaceSelector&lt;/code&gt;, make sure that the namespace(s) you are selecting really has the label you are using. Keep in mind that the built-in namespaces like default and &lt;code&gt;kube-system&lt;/code&gt; don’t have labels out of the box.&lt;/p&gt;&lt;p&gt;Conversely, the namespace in the metadata section is the actual name of the namespace, not a label:&lt;/p&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax&quot;&gt;&lt;button class=&quot;CodeBlock__CopyCode-sc-4qx7vm-2 dmwFhm&quot;&gt;Copy&lt;/button&gt;&lt;pre class=&quot;CodeBlock__Pre-sc-4qx7vm-0 eJDaax prism-code language-undefined&quot; style=&quot;color:#d6deeb;background-color:#011627&quot;&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;apiVersion: networking.k8s.io/v1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;kind: NetworkPolicy&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;metadata:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  name: test-network-policy&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;  namespace: default&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;spec:&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;token-line&quot; style=&quot;color:#d6deeb&quot;&gt;&lt;span class=&quot;CodeBlock__LineNo-sc-4qx7vm-1 bFANTz&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token plain&quot;&gt;...&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;h4&gt;Kubernetes Init Containers&lt;/h4&gt;&lt;p&gt;Very similar to cloud-init for those familiar with VM provisioning, init containers in Kubernetes allows you to run temporary containers to perform a task before engaging your primary container(s). Init containers are Init containers in Kubernetes allow you to run temporary containers to execute a task before activating your principal container, comparable to cloud-init for people acquainted with VM provisioning (s). Init containers are frequently used for provisioning operations such as asset bundling, database migration, and cloning a git repository onto a volume. In the instance of Istio, init containers are used to set up network filters - iptables - that control traffic flow. used to perform provisioning tasks like bundling assets, performing database migration, or clone a git repository into a volume. In Istio’s case, init containers are used to setup network filters - iptables to control the flow of traffic.&lt;/p&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[7 Key Considerations for Microservices-Based Application Delivery]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "7 Key Considerations for Microservices-Based Application Delivery",
  "subtitle": "Ensuring the Success of Your Cloud Native Journey",
  "thumbnail": "./citrix-path-to-cloud-native.svg",
  "category": "Service Mesh",
  "type": "Article",
  "tags": ["Microservices"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("h2", null, "The Role of Application Delivery in Your Cloud Native Journey"), mdx("p", null, "As digital transformation is changing how your organization conducts business, so is it changing how your products and services are delivered. The infrastructure and practices by which your software is continuously deployed and operated \u2014 your application delivery \u2014 is the fulcrum of your organization\u2019s digital transformation. Likely you are progressing on your cloud native journey \u2014 that is, transitioning from monolithic to container-based microservices architectures with the goal of achieving agility, portability, and on-demand scalability. Kubernetes is the platform of choice for many, providing the automation and control necessary to manage microservices-based applications at scale and with high velocity."), mdx("p", null, "With the network part and parcel to each and every service request in your microservices-based application, it may come as no surprise that at the core of application delivery is your application delivery controller, an intelligent proxy that accelerates and manages application delivery. With no standard definition of what an application delivery controller does, the capabilities of intelligent proxies vary broadly. And so in this white paper, we\u2019ll explore application delivery controllers as they relate to your architecture choices, your use of Kubernetes platforms, and open source tools."), mdx("h2", null, "7 Key Considerations for Microservices-Based Application Delivery"), mdx("p", null, "Before embarking on your cloud native journey, it is essential to critically assess your organization\u2019s readiness with regard to skill set so that you can choose the solutions that best fit the business objective you are seeking to meet in context of your ability to do so. There are seven key considerations to address when planning your microservices-based application delivery design:"), mdx("ol", null, mdx("li", null, "Architecting your foundation the right way "), mdx("li", null, "Openly integrating with the cloud native ecosystem"), mdx("li", null, "Choosing the perfect proxy"), mdx("li", null, "Securing your applications and APIs"), mdx("li", null, "Enabling CI/CD and canary deployment with advanced traffic steering "), mdx("li", null, "Achieving holistic observability"), mdx("li", null, "Managing monoliths and microservices")), mdx("p", null, "A thorough evaluation of these seven considerations is best done with specific tasks and goals in mind. Depending on the size and diversity of your organization, you may need to account for a variety of stakeholders\u2019 needs \u2014 that is, tasks and goals that differ based on role and responsibility. In context of application delivery, let\u2019s survey the most common roles with a generalized view of their responsibilities and needs as stakeholders. To help facilitate a general understanding, we\u2019ve grouped some roles when responsibilities overlap across multiple teams:"), mdx("ul", null, mdx("li", null, mdx("h3", null, "Platform"), mdx("p", null, "Platform teams are responsible for deploying and managing their Kubernetes infrastructure. They are responsible for platform governance, operational efficiency, and developer agility. The platform team is the connective tissue among various teams like DevOps, SREs, developers, and network operations teams and therefore must address and balance the unique needs of a diverse group of stakeholders, or influencers, when choosing cloud native solutions.")), mdx("li", null, mdx("h3", null, "DevOps"), mdx("p", null, "DevOps teams are responsible for continuously deploying applications. They care about faster development and release cycles, CI/CD and automation, and canary and progressive rollout.")), mdx("li", null, mdx("h3", null, "SREs"), mdx("p", null, "Site reliability engineers must ensure application availability. They care about observability, incident response, and postmortems. SREs often act as architects for DevOps team and as such are often extensions of or directly belong to DevOps teams.")), mdx("li", null, mdx("h3", null, "Developers"), mdx("p", null, "Development teams are responsible for application performance and are focused on ensuring a seamless end-user experience, including troubleshooting and microservices discovery and routing. Application performance and troubleshooting is shared responsibility among multiple teams.")), mdx("li", null, mdx("h3", null, "NetOps "), mdx("p", null, "Network operations teams are responsible for ensuring stable, high-performing network connectivity, resiliency, security (e.g. web application firewalls and TLS), and are commonly focused on north-south traffic. They care about establishing networking policies and enforcing compliance; achieving management, control, and monitoring of the network; and gaining visibility for the purpose of resources and capacity planning.")), mdx("li", null, mdx("h3", null, "DevSecOps"), mdx("p", null, "DevSecOps teams care about ensuring a strong security posture and rely on automated tools to orchestrate security for infrastructure, applications, containers, and API gateways. DevSecOps works very closley with NetOps team for holistic secure posture."))), mdx("div", {
    className: "center"
  }, mdx("img", {
    src: Stakeholders,
    align: "center",
    alt: "Diverse Stakeholders have different needs"
  })), mdx("p", null, "Each role has nuanced responsibilities. Whether you have a single person or teams of people assigned to these roles, each role\u2019s function needs to be accounted for."), mdx("p", null, "It\u2019s important to note that these stakeholders are undergoing a transformation in their responsibilities \u2014 or at least a transformation in the way in which they perform their responsibilities. Depending upon your organization\u2019s size and structure, your stakeholders may have clearly defined lines of accountability or not among roles. As you adopt a cloud native approach to application deployment and delivery, you may find that the once-defined lines have blurred or that they are being redrawn. Be aware that the individuals who fill these roles typically go through a period of adjustment that can be unsettling until they adapt to their own and their teams\u2019 new identities."), mdx("p", null, "Your cloud native infrastructure should be as accommodating as possible to you, your team, and your collective responsibilities and process, so we encourage you to seek solutions that address the needs of all your stakeholders. Significantly, this includes evaluating different architectural models for as best fit for purpose. While every organization doesn\u2019t travel the same road to cloud native, every journey starts with initial architectural decisions \u2013 decisions which have substantial bearing on your path to cloud native."), mdx("h2", null, "Architecting Your Foundation the Right Way"), mdx("p", null, "Cloud native novices and experts alike find that designing their application delivery architectures is the most challenging part of building microservices. Your architectural choices will have a significant impact on your cloud native journey. Some architectures will provide greater or fewer benefits while others will prove less or more difficult to implement."), mdx("p", null, "Whether you are a cloud native pro or a novice, your selection of the right application delivery architecture will be one that balances the tradeoff between the greatest benefits and the simplicity needed to match your team\u2019s skill set. Figure 1 highlights four common application delivery architecture deployment models:"), mdx("div", {
    className: "center"
  }, mdx("img", {
    src: Graph,
    align: "center",
    alt: "Graph"
  })), mdx("div", {
    className: "intro"
  }, mdx("h3", {
    align: "center"
  }, "Tip: Traffic Directions"), mdx("p", null, "North-south (N-S) traffic refers to traffic between clients outside the Kubernetes cluster and services inside the cluster, while east-west (E-W) traffic refers to traffic between services inside the Kubernetes cluster.")), mdx("p", null, "Each of the deployment models in Figure 1 come with their list of pros and cons and are typically the point of focus of different teams. So how do you choose the right architecture for your deployment? Given the needs of your stakeholders and the many specifics involved in managing both north-south (N-S) and east-west (E-W) traffic, it is critical to assess the four different architectures with respect to the following areas:"), mdx("ul", null, mdx("li", null, "Application security "), mdx("li", null, "Observability "), mdx("li", null, "Continuous deployment "), mdx("li", null, "Scalability and performance "), mdx("li", null, "Open source tools integration "), mdx("li", null, "Service mesh & Istio  integration "), mdx("li", null, "IT skill set required ")), mdx("p", null, "Let\u2019s examine each of the four deployment models."), mdx("h3", null, "Two-Tier Ingress"), mdx("div", {
    className: "right"
  }, mdx("img", {
    src: TwoTier,
    align: "centre",
    alt: "Two Tier Ingress"
  })), mdx("p", null, "Two-tier ingress is the simplest architectural model to deploy to get teams up and running quickly. In this deployment model, Tthere are two layers of ADCs for N-S traffic ingress. The external ADC (at Tier 1), shown in green in Figure 2, provides L4 traffic management. Frequently, additional services are assigned to this ADC and can include web application firewall (WAF) and, secure sockets layer/transport layer security offload (SSL/TLS) functionality and authentication. A two-tier ingress deployment model is often managed by the existing network team (which is familiar with internet-facing traffic), and it can also be used as an ADC for other existing applications simultaneously."), mdx("p", null, "The second ADC (Tier 2), shown in yellow in Figure 2, handles L7 load balancing for N-S traffic. It is managed by the platform team and is used within the Kubernetes cluster to direct traffic to the correct node. Layer 7 attributes, like information in the URL and HTTP headers, can be used for traffic load-balancing decisions. The yellow ADC continuously receives updates about the availability and respective IP addresses of the microservices pods within the Kubernetes cluster and can make decisions about which pod is best able to handle the request. Deployed as a container inside the Kubernetes cluster, the yellow ADC can be deployed as a container with Citrix CPX or with another similar product."), mdx("p", null, "The E-W traffic between microservices pods is managed by kube-proxy, an open source, basic L4 load balancer with simple IP address-based round robin or least connection algorithm. kube-proxy lacks advanced features like Layer 7 load balancing, security, and observability, making it a blind spot for E-W traffic."), mdx("b", null, "Pros of Two-Tier Ingress"), mdx("p", null, "With the right proxy, SSL termination can be done at the edge, and traffic can be inspected easily. This enables N-S traffic to be comprehensively secured across L3-7. ADC collects and reports telemetry on the N-S application traffic it sees, which means that this architecture provides robust observability for N-S traffic. ADC can also also integrate with CI/CD tools like Spinnaker to provide traffic management to N-S traffic for excellent continuous deployment capabilities."), mdx("p", null, "Two-tier ingress scales very well for N-S traffic, as an example Citrix ADC reach hundreds of Gbps or even Tbps throughput through active-active clustering of ADCs if required. Integration with third-party tools like Prometheus, Grafana and Zipkin are supported out of the box with ADC, so you can continue to use the tools with which you are familiar to collect data and manage your systems for N-S traffic."), mdx("p", null, "The bifurcated design of two-tier ingress makes it relatively simple to implement demarcation points for control. The network team can own and manage the green ADC, and the platform team can work inside the Kubernetes environment. Neither the network team nor the platform team needs extensive retraining, which makes this architecture quick to implement."), mdx("b", null, "Cons of Two-Tier Ingress"), mdx("p", null, "The limitations of kube-proxy have made the use of third-party tools like Project Calico necessary to provide network policies, segmentation, and security support for inter-microservices communication. Similarly, kube-proxy's lack of detailed telemetry capabilities provides very little observability for E-W traffic. kube-proxy does not have the extensive APIs to integrate with continuous deployment tools, and its basic round-robin load balancing does not provide the granular load balancing needed to incorporate a CI/CD strategy inside the cluster. In general so you lack advanced load balancing tool set required to manage your inter-pod traffic. And kube-proxy does not currently integrate with service meshes, so there is no open source control plane integration for your E-W traffic management."), mdx("p", null, "Overall, two-tier ingress provides excellent services for N-S traffic but lacks control for E-W traffic. It is a popular architecture because it is simple to implement and is frequently a starting point for enterprises on their cloud native journey to microservices adoption."), mdx("div", {
    className: "note"
  }, "By default, kube-proxy uses iptables (x_tables kernel modules), so it does not perform as well as other proxies. You can configure kube-proxy to run in different modes by setting the --proxy-mode flag. Setting this flag to ipvs enables IPVS mode (netfilter kernel modules), which provides a much improved performance and also enables choice of load balancing algorithm through the --ipvs-scheduler parameter beyond the default round robin algorithm."), mdx("h3", null, "Unified Ingress"), mdx("div", {
    className: "right"
  }, mdx("img", {
    src: Unified,
    align: "centre",
    height: "50%",
    alt: "Unified Ingress"
  })), mdx("p", null, "Unified ingress is very similar to the two-tier ingress architecture, except that it unifies two tiers of application delivery controllers (ADCs) for N-S traffic into one. Reducing an ADC tier effectively removes one hop of latency for N-S traffic."), mdx("p", null, "Unified ingress has the same benefits and drawbacks as the two-tier ingress proxy architecture for security, observability, continuous deployment, scale and performance, open source tools support, and service mesh integration. Where it differs is in the skill sets required for implementation. With unified ingress, both the ADCs for N-S traffic and kube-proxy for the E-W traffic are managed by the platform team, who must be very network savvy to implement and manage this architecture."), mdx("p", null, "A unified ingress proxy architecture is capable of participating in the Kubernetes cluster\u2019s overlay network. This allows it to communicate directly with the microservices pods. Therefore, the platform team has to be knowledgeable about layers 3-7 of the network stack to take full advantage of this architecture."), mdx("p", null, "In summary, unified ingress proxy architecture is moderately simple to deploy compared to service mesh (which we will cover next), and it offers robust capabilities for N-S traffic, but has very limited functionality for E-W traffic due to the limitations of kube-proxy. A network-savvy platform team is key for implementing this architecture."), mdx("h3", null, "Service Mesh"), mdx("p", null, "A service mesh is a dedicated infrastructure layer to control how different parts of an application communicate with one another with one another. The service mesh landscape has exploded because service meshes offer the best observability, security, and fine-grained management for traffic among microservices \u2014 that is, for E-W traffic. As an additional layer of infrastructure, service meshes do bear additional complexity as a tradeoff to the value they provide."), mdx("div", {
    className: "left"
  }, mdx("img", {
    src: Servicemesh,
    align: "centre",
    alt: "Service Mesh"
  })), mdx("p", null, "A typical service mesh architecture is similar to the two-tier ingress proxy architecture for N-S traffic and offers the same rich benefits for N-S traffic. The key difference between service mesh and two-tier ingress, and where most of the value lies, is that service mesh employs a lightweight proxy as a sidecar to each microservice pod for E-W traffic. Microservices do not communicate directly: Communication among microservices happens via the sidecar, which enables inter-pod traffic to be inspected and managed as it enters and leaves the pods."), mdx("p", null, "By using proxy sidecars, service mesh offers the highest levels of observability, security, and fine-grained traffic management and control among microservices. Additionally, select repetitive microservice functions like retries and encryption can be offloaded to the sidecars. Despite each sidecar\u2019s being assigned its own memory and CPU resources, sidecars are typically lightweight."), mdx("p", null, "You have the option to use Citrix CPX as a sidecar. Sidecars, which are managed by the platform team and attached to each pod, create a highly scalable, distributed architecture, but they also add complexity because they result in more moving parts."), mdx("strong", null, "Pros of Service Mesh"), mdx("p", null, "The advantages of service mesh for N-S traffic are similar to those for two-tier ingress. Service mesh, however, brings added advantages for E-W traffic.The presence of sidecars enables you to set security policies and control communication among your microservices. You can mandate things like authentication, encryption, and rate limiting for APIs among microservices if required."), mdx("p", null, "Because E-W traffic is seen by the sidecars, there is much more telemetry to provide holistic observability for better insights and improved troubleshooting. Furthermore, Citrix CPX as a sidecar has well-defined APIs that integrate with myriad open source tools, so that you can use the observability tools you're used to. Sidecar APIs allow integration with CI/CD tools like Spinnaker."), mdx("p", null, "Similarly, sidecars will integrate with a service mesh control plane like Istio for E-W traffic. Additionally, repetitive functions like retries and encryption can be offloaded to the sidecars. The distributed nature of the sidecar means that the solution is scalable for such features as observability and security."), mdx("strong", null, "Cons of Service Mesh"), mdx("p", null, "The biggest drawback of a service mesh architecture is the complexity of implementation (managing hundreds or thousands of sidecars is not trivial). The learning curve can be steep for the platform team because there are so many moving parts. A sidecar for every pod adds to CPU and memory needs. Similarly, sidecars add latency. Latency, which may affect application performance, varies with proxy implementation and can be easily measured by the open source tool, Meshery. Citrix CPX as a sidecar offers latency as low as 1ms, whereas other solutions can add much more."), mdx("p", null, "Overall, a service mesh architecture provides excellent security, observability, and fine-grained traffic management for all traffic flows. The major downside is that it is complex to implement and manage."), mdx("h3", null, "Service Mesh Lite"), mdx("div", {
    className: "right"
  }, mdx("img", {
    src: Servicemeshlite,
    align: "centre",
    alt: "Service Mesh Lite"
  })), mdx("p", null, "What if you want service mesh-like benefits with much less complexity?  The answer is service mesh lite, which is a variant of service mesh."), mdx("p", null, "With a service mesh lite architecture, the ADC shown in green in Figure 5 is responsible for Layer 4-7 load balancing for N-S traffic to handle inbound requests and load balance to the right Kubernetes cluster. The green ADC may carry out SSL termination, web application firewalling, authentication, or other network services. It is managed by the networking team."), mdx("p", null, "Depending on isolation and scale requirements, service mesh lite proxy architecture uses a single or several ADCs (shown in yellow in Figure 5) that proxy communications among microservices pods to manage inter-pod (E-W) traffic rather than using individual sidecars attached to each pod. Proxies can be deployed per node or per namespace and are managed by platform teams."), mdx("strong", null, "Pros of Service Mesh Lite"), mdx("p", null, "Service mesh lite provides many of the same benefits as service mesh but reduces the overall complexity by only having a small set of proxy instances per cluster to manage the inter-pod traffic. Passing all E-W traffic through a small set of proxies provides the same advanced policy control, security, and fine-grained traffic management of a service mesh proxy architecture without all the complexity."), mdx("p", null, "Another advantage of service mesh lite is reduced latency as compared to service mesh because end user request goes through fewer  proxies. The main advantage is reduced complexity and the lower skill set required to implement compared to service mesh. Similar to two-tier ingress, the networking team can manage the green ADC, and the platform team can manage the yellow ADC. With service mesh lite, both teams can work in familiar environments and develop at their own speed."), mdx("strong", null, "Cons of Service Mesh Lite"), mdx("p", null, "Service mesh lite removes the implementation and management associated with service mesh, but the absence of a proxy per pod means that you sacrifice some functionality offload. For example, encryption for E-W must be implemented in each microservice, itself, if required."), mdx("p", null, "Overall, service mesh lite provides most of the service mesh features but with reduced complexity and a lower IT skill set requirement. Many organizations who started with the two-tier ingress architecture find it an easy transition to service mesh lite for the added benefits it brings to their E-W traffic including better observability, enhanced security, better integration with open source tools, and support for continuous deployment."), mdx("p", null, "So after reviewing the four architecture choices, you\u2019re probably wondering: What \u2018s the right architecture choice for my organization? There are no right or wrong answers. Like other architectural choices, proxy deployment models should be selected based on, in part, your application needs and your team structure and your team\u2019s skill set."), mdx("p", null, "Your model of proxy deployment is an important consideration, but just one of many when planning for your application delivery infrastructure. Ensuring that the application delivery components in your deployment are well-integrated into the cloud native ecosystem is your next consideration."), mdx("h2", null, "Openly Integrating with the Cloud Native Ecosystem "), mdx("p", null, "It\u2019s imperative that your various application delivery tools and processes, including your proxy, be well-integrated into commonplace cloud native infrastructure. It\u2019s no secret that much of today\u2019s innovation happens in open source software. And clouds, both public and private, are built upon open source software. So in most cases, your infrastructure will be comprised of popular open source infrastructure and tools that you have picked up on your journey to cloud native. To the extent this is the case, you\u2019ll find common integrations by categories in Figure below:"), mdx("div", {
    className: "center"
  }, mdx("img", {
    src: Comparison,
    align: "center",
    alt: ""
  }), mdx("p", null, "Figure - Key categories of consideration for proxy integration with Kubernetes platforms and open source tools")), mdx("p", null, "Cloud native environments make liberal use of open source software projects. Irrespective of which projects you use, suffice it to say that cloud native application delivery can\u2019t be done with just containers. The combination of containers, container orchestration, and a service mesh will get you very far. And alongside a CI/CD system, these components are the most significant and ubiquitously used components of cloud native infrastructure. Integration with each of these categories of cloud native infrastructure is critical so that developers and operators can design and run systems that communicate and inter-operate as a whole. The fact that these bedrocks of cloud native infrastructure are open source unlocks their ability to be integrated."), mdx("p", null, "At the heart of the cloud native ecosystem is the extensible and scalable orchestration infrastructure that is Kubernetes. The cloud native ecosystem (both open source and closed source) extends Kubernetes by writing custom resource definitions (CRDs) and associated controllers. The controllers and CRDs give operators a Kubernetes-native way to manage all parts of their platforms \u2014 both open source and closed source. This integration affords tool unification and powerful composable intent-based primitives that truly enable a software-defined platform."), mdx("p", null, "Critical to the speed of delivery is an early investment in continuous integration/continuous delivery (CI/CD). It\u2019s likely you have already wrangled continuous integration. Continuous deployment pipelines are your next step in seeing that changes to your source code automatically result in a new container being built and a new version of your microservice being tested and deployed to staging and eventually to production."), mdx("p", null, "For many, the notion that CI/CD is an area of early investment is counterintuitive, and they find it hard to swallow the upfront engineering effort required to get a solid pipeline in place. The sooner CI/CD basics are implemented, however, the sooner the dividends start paying out. We will cover advanced continuous delivery considerations later in this white paper."), mdx("p", null, "With cloud native infrastructure\u2019s being inherently dynamic (in contrast to infrastructure not driven by APIs,) the ability to observe cloud native infrastructure and its workloads is also necessary. Software is written with functionality and debugging in mind. Most often, developers use logging as the primary method for debugging their applications. Integration with Elasticsearch and Kibana is key here."), mdx("p", null, "Performance counters are another way to track application behavior and performance. Akin to SNMP for physical and virtual network monitoring, the equivalent cloud native \u201Cstandard\u201D is the use of Prometheus and Grafana, so it\u2019s important that your application delivery solution integrate with these tools. Currently there is no recognized standard for cloud native application performance monitoring metrics."), mdx("div", {
    className: "intro"
  }, mdx("h3", {
    align: "center"
  }, "OpenMetrics"), mdx("p", null, "The cloud native ecosystem needs a common format for the exchange of metrics. Observability pains grow with the release of each newly instrumented service that presents its own metric format. OpenMetrics is an effort to create an open standard for transmitting metrics at scale, with support for both text representation and protocolbBuffers. OpenMetrics builds on Prometheus\u2019s exposition format, popular telemetry formats, and protocols used in infrastructure and application monitoring.")), mdx("p", null, "Irrespective of the metrics format, there are a few metrics that have been identified as key indicators of the health of a cloud native application (that is, the health of a service): latency, traffic, errors, and saturation. Your application delivery solution should assist in producing these signals as well as provide support for the tracing of your distributed, cloud native workloads."), mdx("p", null, "The aforementioned integrations with open source tools enable loosely coupled systems that are resilient, manageable, and observable. Citrix ADC also embodies these characteristics. All of the infrastructure integrations detailed here depend upon APIs for interchange and interoperability. Cloud native applications, too, are centered around declarative APIs to interface with the infrastructure and serve user-facing workloads."), mdx("p", null, "The endpoints that your APIs expose are now being managed by open source service meshes. Service meshes deliver the next generation of networking designed for cloud native applications. At the core of a service mesh is its data plane (its collection of proxies). Proxy selection criteria and deployment model tradeoffs are our next area of consideration."), mdx("p", null, mdx("em", {
    parentName: "p"
  }, mdx("strong", {
    parentName: "em"
  }, " Check out the topic ", mdx(Link, {
    to: "/resources/service-mesh/choosing-the-perfect-proxy",
    mdxType: "Link"
  }, "Choosing the Perfect Proxy"), " to learn more! ")))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/7-key-considerations-for-microservices-based-application-delivery</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/7-key-considerations-for-microservices-based-application-delivery</guid><enclosure url="https://layer5.io/static/d933a542c39e21f591328eb08d0ce2b2/citrix-path-to-cloud-native.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;h2&gt;The Role of Application Delivery in Your Cloud Native Journey&lt;/h2&gt;&lt;p&gt;As digital transformation is changing how your organization conducts business, so is it changing how your products and services are delivered. The infrastructure and practices by which your software is continuously deployed and operated — your application delivery — is the fulcrum of your organization’s digital transformation. Likely you are progressing on your cloud native journey — that is, transitioning from monolithic to container-based microservices architectures with the goal of achieving agility, portability, and on-demand scalability. Kubernetes is the platform of choice for many, providing the automation and control necessary to manage microservices-based applications at scale and with high velocity.&lt;/p&gt;&lt;p&gt;With the network part and parcel to each and every service request in your microservices-based application, it may come as no surprise that at the core of application delivery is your application delivery controller, an intelligent proxy that accelerates and manages application delivery. With no standard definition of what an application delivery controller does, the capabilities of intelligent proxies vary broadly. And so in this white paper, we’ll explore application delivery controllers as they relate to your architecture choices, your use of Kubernetes platforms, and open source tools.&lt;/p&gt;&lt;h2&gt;7 Key Considerations for Microservices-Based Application Delivery&lt;/h2&gt;&lt;p&gt;Before embarking on your cloud native journey, it is essential to critically assess your organization’s readiness with regard to skill set so that you can choose the solutions that best fit the business objective you are seeking to meet in context of your ability to do so. There are seven key considerations to address when planning your microservices-based application delivery design:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Architecting your foundation the right way &lt;/li&gt;&lt;li&gt;Openly integrating with the cloud native ecosystem&lt;/li&gt;&lt;li&gt;Choosing the perfect proxy&lt;/li&gt;&lt;li&gt;Securing your applications and APIs&lt;/li&gt;&lt;li&gt;Enabling CI/CD and canary deployment with advanced traffic steering &lt;/li&gt;&lt;li&gt;Achieving holistic observability&lt;/li&gt;&lt;li&gt;Managing monoliths and microservices&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;A thorough evaluation of these seven considerations is best done with specific tasks and goals in mind. Depending on the size and diversity of your organization, you may need to account for a variety of stakeholders’ needs — that is, tasks and goals that differ based on role and responsibility. In context of application delivery, let’s survey the most common roles with a generalized view of their responsibilities and needs as stakeholders. To help facilitate a general understanding, we’ve grouped some roles when responsibilities overlap across multiple teams:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;h3&gt;Platform&lt;/h3&gt;&lt;p&gt;Platform teams are responsible for deploying and managing their Kubernetes infrastructure. They are responsible for platform governance, operational efficiency, and developer agility. The platform team is the connective tissue among various teams like DevOps, SREs, developers, and network operations teams and therefore must address and balance the unique needs of a diverse group of stakeholders, or influencers, when choosing cloud native solutions.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt;DevOps&lt;/h3&gt;&lt;p&gt;DevOps teams are responsible for continuously deploying applications. They care about faster development and release cycles, CI/CD and automation, and canary and progressive rollout.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt;SREs&lt;/h3&gt;&lt;p&gt;Site reliability engineers must ensure application availability. They care about observability, incident response, and postmortems. SREs often act as architects for DevOps team and as such are often extensions of or directly belong to DevOps teams.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt;Developers&lt;/h3&gt;&lt;p&gt;Development teams are responsible for application performance and are focused on ensuring a seamless end-user experience, including troubleshooting and microservices discovery and routing. Application performance and troubleshooting is shared responsibility among multiple teams.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt;NetOps &lt;/h3&gt;&lt;p&gt;Network operations teams are responsible for ensuring stable, high-performing network connectivity, resiliency, security (e.g. web application firewalls and TLS), and are commonly focused on north-south traffic. They care about establishing networking policies and enforcing compliance; achieving management, control, and monitoring of the network; and gaining visibility for the purpose of resources and capacity planning.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;h3&gt;DevSecOps&lt;/h3&gt;&lt;p&gt;DevSecOps teams care about ensuring a strong security posture and rely on automated tools to orchestrate security for infrastructure, applications, containers, and API gateways. DevSecOps works very closley with NetOps team for holistic secure posture.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;center&quot;&gt;&lt;img src=&quot;static/figure1-6657bcb989b9255c6f56776e21b2b9ee.png&quot; align=&quot;center&quot; alt=&quot;Diverse Stakeholders have different needs&quot;/&gt;&lt;/div&gt;&lt;p&gt;Each role has nuanced responsibilities. Whether you have a single person or teams of people assigned to these roles, each role’s function needs to be accounted for.&lt;/p&gt;&lt;p&gt;It’s important to note that these stakeholders are undergoing a transformation in their responsibilities — or at least a transformation in the way in which they perform their responsibilities. Depending upon your organization’s size and structure, your stakeholders may have clearly defined lines of accountability or not among roles. As you adopt a cloud native approach to application deployment and delivery, you may find that the once-defined lines have blurred or that they are being redrawn. Be aware that the individuals who fill these roles typically go through a period of adjustment that can be unsettling until they adapt to their own and their teams’ new identities.&lt;/p&gt;&lt;p&gt;Your cloud native infrastructure should be as accommodating as possible to you, your team, and your collective responsibilities and process, so we encourage you to seek solutions that address the needs of all your stakeholders. Significantly, this includes evaluating different architectural models for as best fit for purpose. While every organization doesn’t travel the same road to cloud native, every journey starts with initial architectural decisions – decisions which have substantial bearing on your path to cloud native.&lt;/p&gt;&lt;h2&gt;Architecting Your Foundation the Right Way&lt;/h2&gt;&lt;p&gt;Cloud native novices and experts alike find that designing their application delivery architectures is the most challenging part of building microservices. Your architectural choices will have a significant impact on your cloud native journey. Some architectures will provide greater or fewer benefits while others will prove less or more difficult to implement.&lt;/p&gt;&lt;p&gt;Whether you are a cloud native pro or a novice, your selection of the right application delivery architecture will be one that balances the tradeoff between the greatest benefits and the simplicity needed to match your team’s skill set. Figure 1 highlights four common application delivery architecture deployment models:&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;img src=&quot;static/Graph1-922f70168e5eac45ea8da896ca6e827d.png&quot; align=&quot;center&quot; alt=&quot;Graph&quot;/&gt;&lt;/div&gt;&lt;div class=&quot;intro&quot;&gt;&lt;h3 align=&quot;center&quot;&gt;Tip: Traffic Directions&lt;/h3&gt;&lt;p&gt;North-south (N-S) traffic refers to traffic between clients outside the Kubernetes cluster and services inside the cluster, while east-west (E-W) traffic refers to traffic between services inside the Kubernetes cluster.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Each of the deployment models in Figure 1 come with their list of pros and cons and are typically the point of focus of different teams. So how do you choose the right architecture for your deployment? Given the needs of your stakeholders and the many specifics involved in managing both north-south (N-S) and east-west (E-W) traffic, it is critical to assess the four different architectures with respect to the following areas:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Application security &lt;/li&gt;&lt;li&gt;Observability &lt;/li&gt;&lt;li&gt;Continuous deployment &lt;/li&gt;&lt;li&gt;Scalability and performance &lt;/li&gt;&lt;li&gt;Open source tools integration &lt;/li&gt;&lt;li&gt;Service mesh &amp;amp; Istio  integration &lt;/li&gt;&lt;li&gt;IT skill set required &lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Let’s examine each of the four deployment models.&lt;/p&gt;&lt;h3&gt;Two-Tier Ingress&lt;/h3&gt;&lt;div class=&quot;right&quot;&gt;&lt;img src=&quot;static/citrix-two-tier-ingress-5c271192e7c2aec7e0cc115d2796f66e.svg&quot; align=&quot;centre&quot; alt=&quot;Two Tier Ingress&quot;/&gt;&lt;/div&gt;&lt;p&gt;Two-tier ingress is the simplest architectural model to deploy to get teams up and running quickly. In this deployment model, Tthere are two layers of ADCs for N-S traffic ingress. The external ADC (at Tier 1), shown in green in Figure 2, provides L4 traffic management. Frequently, additional services are assigned to this ADC and can include web application firewall (WAF) and, secure sockets layer/transport layer security offload (SSL/TLS) functionality and authentication. A two-tier ingress deployment model is often managed by the existing network team (which is familiar with internet-facing traffic), and it can also be used as an ADC for other existing applications simultaneously.&lt;/p&gt;&lt;p&gt;The second ADC (Tier 2), shown in yellow in Figure 2, handles L7 load balancing for N-S traffic. It is managed by the platform team and is used within the Kubernetes cluster to direct traffic to the correct node. Layer 7 attributes, like information in the URL and HTTP headers, can be used for traffic load-balancing decisions. The yellow ADC continuously receives updates about the availability and respective IP addresses of the microservices pods within the Kubernetes cluster and can make decisions about which pod is best able to handle the request. Deployed as a container inside the Kubernetes cluster, the yellow ADC can be deployed as a container with Citrix CPX or with another similar product.&lt;/p&gt;&lt;p&gt;The E-W traffic between microservices pods is managed by kube-proxy, an open source, basic L4 load balancer with simple IP address-based round robin or least connection algorithm. kube-proxy lacks advanced features like Layer 7 load balancing, security, and observability, making it a blind spot for E-W traffic.&lt;/p&gt;&lt;b&gt;Pros of Two-Tier Ingress&lt;/b&gt;&lt;p&gt;With the right proxy, SSL termination can be done at the edge, and traffic can be inspected easily. This enables N-S traffic to be comprehensively secured across L3-7. ADC collects and reports telemetry on the N-S application traffic it sees, which means that this architecture provides robust observability for N-S traffic. ADC can also also integrate with CI/CD tools like Spinnaker to provide traffic management to N-S traffic for excellent continuous deployment capabilities.&lt;/p&gt;&lt;p&gt;Two-tier ingress scales very well for N-S traffic, as an example Citrix ADC reach hundreds of Gbps or even Tbps throughput through active-active clustering of ADCs if required. Integration with third-party tools like Prometheus, Grafana and Zipkin are supported out of the box with ADC, so you can continue to use the tools with which you are familiar to collect data and manage your systems for N-S traffic.&lt;/p&gt;&lt;p&gt;The bifurcated design of two-tier ingress makes it relatively simple to implement demarcation points for control. The network team can own and manage the green ADC, and the platform team can work inside the Kubernetes environment. Neither the network team nor the platform team needs extensive retraining, which makes this architecture quick to implement.&lt;/p&gt;&lt;b&gt;Cons of Two-Tier Ingress&lt;/b&gt;&lt;p&gt;The limitations of kube-proxy have made the use of third-party tools like Project Calico necessary to provide network policies, segmentation, and security support for inter-microservices communication. Similarly, kube-proxy&amp;#x27;s lack of detailed telemetry capabilities provides very little observability for E-W traffic. kube-proxy does not have the extensive APIs to integrate with continuous deployment tools, and its basic round-robin load balancing does not provide the granular load balancing needed to incorporate a CI/CD strategy inside the cluster. In general so you lack advanced load balancing tool set required to manage your inter-pod traffic. And kube-proxy does not currently integrate with service meshes, so there is no open source control plane integration for your E-W traffic management.&lt;/p&gt;&lt;p&gt;Overall, two-tier ingress provides excellent services for N-S traffic but lacks control for E-W traffic. It is a popular architecture because it is simple to implement and is frequently a starting point for enterprises on their cloud native journey to microservices adoption.&lt;/p&gt;&lt;div class=&quot;note&quot;&gt;By default, kube-proxy uses iptables (x_tables kernel modules), so it does not perform as well as other proxies. You can configure kube-proxy to run in different modes by setting the --proxy-mode flag. Setting this flag to ipvs enables IPVS mode (netfilter kernel modules), which provides a much improved performance and also enables choice of load balancing algorithm through the --ipvs-scheduler parameter beyond the default round robin algorithm.&lt;/div&gt;&lt;h3&gt;Unified Ingress&lt;/h3&gt;&lt;div class=&quot;right&quot;&gt;&lt;img src=&quot;static/citrix-unified-ingress-e24b73fc8f6ed89ecae0a73a8483f8d8.svg&quot; align=&quot;centre&quot; height=&quot;50%&quot; alt=&quot;Unified Ingress&quot;/&gt;&lt;/div&gt;&lt;p&gt;Unified ingress is very similar to the two-tier ingress architecture, except that it unifies two tiers of application delivery controllers (ADCs) for N-S traffic into one. Reducing an ADC tier effectively removes one hop of latency for N-S traffic.&lt;/p&gt;&lt;p&gt;Unified ingress has the same benefits and drawbacks as the two-tier ingress proxy architecture for security, observability, continuous deployment, scale and performance, open source tools support, and service mesh integration. Where it differs is in the skill sets required for implementation. With unified ingress, both the ADCs for N-S traffic and kube-proxy for the E-W traffic are managed by the platform team, who must be very network savvy to implement and manage this architecture.&lt;/p&gt;&lt;p&gt;A unified ingress proxy architecture is capable of participating in the Kubernetes cluster’s overlay network. This allows it to communicate directly with the microservices pods. Therefore, the platform team has to be knowledgeable about layers 3-7 of the network stack to take full advantage of this architecture.&lt;/p&gt;&lt;p&gt;In summary, unified ingress proxy architecture is moderately simple to deploy compared to service mesh (which we will cover next), and it offers robust capabilities for N-S traffic, but has very limited functionality for E-W traffic due to the limitations of kube-proxy. A network-savvy platform team is key for implementing this architecture.&lt;/p&gt;&lt;h3&gt;Service Mesh&lt;/h3&gt;&lt;p&gt;A service mesh is a dedicated infrastructure layer to control how different parts of an application communicate with one another with one another. The service mesh landscape has exploded because service meshes offer the best observability, security, and fine-grained management for traffic among microservices — that is, for E-W traffic. As an additional layer of infrastructure, service meshes do bear additional complexity as a tradeoff to the value they provide.&lt;/p&gt;&lt;div class=&quot;left&quot;&gt;&lt;img src=&quot;static/citrix-service-mesh-9424773542766dde1581086f1363a84b.svg&quot; align=&quot;centre&quot; alt=&quot;Service Mesh&quot;/&gt;&lt;/div&gt;&lt;p&gt;A typical service mesh architecture is similar to the two-tier ingress proxy architecture for N-S traffic and offers the same rich benefits for N-S traffic. The key difference between service mesh and two-tier ingress, and where most of the value lies, is that service mesh employs a lightweight proxy as a sidecar to each microservice pod for E-W traffic. Microservices do not communicate directly: Communication among microservices happens via the sidecar, which enables inter-pod traffic to be inspected and managed as it enters and leaves the pods.&lt;/p&gt;&lt;p&gt;By using proxy sidecars, service mesh offers the highest levels of observability, security, and fine-grained traffic management and control among microservices. Additionally, select repetitive microservice functions like retries and encryption can be offloaded to the sidecars. Despite each sidecar’s being assigned its own memory and CPU resources, sidecars are typically lightweight.&lt;/p&gt;&lt;p&gt;You have the option to use Citrix CPX as a sidecar. Sidecars, which are managed by the platform team and attached to each pod, create a highly scalable, distributed architecture, but they also add complexity because they result in more moving parts.&lt;/p&gt;&lt;strong&gt;Pros of Service Mesh&lt;/strong&gt;&lt;p&gt;The advantages of service mesh for N-S traffic are similar to those for two-tier ingress. Service mesh, however, brings added advantages for E-W traffic.The presence of sidecars enables you to set security policies and control communication among your microservices. You can mandate things like authentication, encryption, and rate limiting for APIs among microservices if required.&lt;/p&gt;&lt;p&gt;Because E-W traffic is seen by the sidecars, there is much more telemetry to provide holistic observability for better insights and improved troubleshooting. Furthermore, Citrix CPX as a sidecar has well-defined APIs that integrate with myriad open source tools, so that you can use the observability tools you&amp;#x27;re used to. Sidecar APIs allow integration with CI/CD tools like Spinnaker.&lt;/p&gt;&lt;p&gt;Similarly, sidecars will integrate with a service mesh control plane like Istio for E-W traffic. Additionally, repetitive functions like retries and encryption can be offloaded to the sidecars. The distributed nature of the sidecar means that the solution is scalable for such features as observability and security.&lt;/p&gt;&lt;strong&gt;Cons of Service Mesh&lt;/strong&gt;&lt;p&gt;The biggest drawback of a service mesh architecture is the complexity of implementation (managing hundreds or thousands of sidecars is not trivial). The learning curve can be steep for the platform team because there are so many moving parts. A sidecar for every pod adds to CPU and memory needs. Similarly, sidecars add latency. Latency, which may affect application performance, varies with proxy implementation and can be easily measured by the open source tool, Meshery. Citrix CPX as a sidecar offers latency as low as 1ms, whereas other solutions can add much more.&lt;/p&gt;&lt;p&gt;Overall, a service mesh architecture provides excellent security, observability, and fine-grained traffic management for all traffic flows. The major downside is that it is complex to implement and manage.&lt;/p&gt;&lt;h3&gt;Service Mesh Lite&lt;/h3&gt;&lt;div class=&quot;right&quot;&gt;&lt;img src=&quot;static/citrix-service-mesh-lite-50ff6a2997a34a7d742ad9f5dd996e67.svg&quot; align=&quot;centre&quot; alt=&quot;Service Mesh Lite&quot;/&gt;&lt;/div&gt;&lt;p&gt;What if you want service mesh-like benefits with much less complexity?  The answer is service mesh lite, which is a variant of service mesh.&lt;/p&gt;&lt;p&gt;With a service mesh lite architecture, the ADC shown in green in Figure 5 is responsible for Layer 4-7 load balancing for N-S traffic to handle inbound requests and load balance to the right Kubernetes cluster. The green ADC may carry out SSL termination, web application firewalling, authentication, or other network services. It is managed by the networking team.&lt;/p&gt;&lt;p&gt;Depending on isolation and scale requirements, service mesh lite proxy architecture uses a single or several ADCs (shown in yellow in Figure 5) that proxy communications among microservices pods to manage inter-pod (E-W) traffic rather than using individual sidecars attached to each pod. Proxies can be deployed per node or per namespace and are managed by platform teams.&lt;/p&gt;&lt;strong&gt;Pros of Service Mesh Lite&lt;/strong&gt;&lt;p&gt;Service mesh lite provides many of the same benefits as service mesh but reduces the overall complexity by only having a small set of proxy instances per cluster to manage the inter-pod traffic. Passing all E-W traffic through a small set of proxies provides the same advanced policy control, security, and fine-grained traffic management of a service mesh proxy architecture without all the complexity.&lt;/p&gt;&lt;p&gt;Another advantage of service mesh lite is reduced latency as compared to service mesh because end user request goes through fewer  proxies. The main advantage is reduced complexity and the lower skill set required to implement compared to service mesh. Similar to two-tier ingress, the networking team can manage the green ADC, and the platform team can manage the yellow ADC. With service mesh lite, both teams can work in familiar environments and develop at their own speed.&lt;/p&gt;&lt;strong&gt;Cons of Service Mesh Lite&lt;/strong&gt;&lt;p&gt;Service mesh lite removes the implementation and management associated with service mesh, but the absence of a proxy per pod means that you sacrifice some functionality offload. For example, encryption for E-W must be implemented in each microservice, itself, if required.&lt;/p&gt;&lt;p&gt;Overall, service mesh lite provides most of the service mesh features but with reduced complexity and a lower IT skill set requirement. Many organizations who started with the two-tier ingress architecture find it an easy transition to service mesh lite for the added benefits it brings to their E-W traffic including better observability, enhanced security, better integration with open source tools, and support for continuous deployment.&lt;/p&gt;&lt;p&gt;So after reviewing the four architecture choices, you’re probably wondering: What ‘s the right architecture choice for my organization? There are no right or wrong answers. Like other architectural choices, proxy deployment models should be selected based on, in part, your application needs and your team structure and your team’s skill set.&lt;/p&gt;&lt;p&gt;Your model of proxy deployment is an important consideration, but just one of many when planning for your application delivery infrastructure. Ensuring that the application delivery components in your deployment are well-integrated into the cloud native ecosystem is your next consideration.&lt;/p&gt;&lt;h2&gt;Openly Integrating with the Cloud Native Ecosystem &lt;/h2&gt;&lt;p&gt;It’s imperative that your various application delivery tools and processes, including your proxy, be well-integrated into commonplace cloud native infrastructure. It’s no secret that much of today’s innovation happens in open source software. And clouds, both public and private, are built upon open source software. So in most cases, your infrastructure will be comprised of popular open source infrastructure and tools that you have picked up on your journey to cloud native. To the extent this is the case, you’ll find common integrations by categories in Figure below:&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;img src=&quot;static/citrix-oss-integration-categories-a43533cd84808f3554b20eb4c7b6f1b7.svg&quot; align=&quot;center&quot; alt=&quot;&quot;/&gt;&lt;p&gt;Figure - Key categories of consideration for proxy integration with Kubernetes platforms and open source tools&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Cloud native environments make liberal use of open source software projects. Irrespective of which projects you use, suffice it to say that cloud native application delivery can’t be done with just containers. The combination of containers, container orchestration, and a service mesh will get you very far. And alongside a CI/CD system, these components are the most significant and ubiquitously used components of cloud native infrastructure. Integration with each of these categories of cloud native infrastructure is critical so that developers and operators can design and run systems that communicate and inter-operate as a whole. The fact that these bedrocks of cloud native infrastructure are open source unlocks their ability to be integrated.&lt;/p&gt;&lt;p&gt;At the heart of the cloud native ecosystem is the extensible and scalable orchestration infrastructure that is Kubernetes. The cloud native ecosystem (both open source and closed source) extends Kubernetes by writing custom resource definitions (CRDs) and associated controllers. The controllers and CRDs give operators a Kubernetes-native way to manage all parts of their platforms — both open source and closed source. This integration affords tool unification and powerful composable intent-based primitives that truly enable a software-defined platform.&lt;/p&gt;&lt;p&gt;Critical to the speed of delivery is an early investment in continuous integration/continuous delivery (CI/CD). It’s likely you have already wrangled continuous integration. Continuous deployment pipelines are your next step in seeing that changes to your source code automatically result in a new container being built and a new version of your microservice being tested and deployed to staging and eventually to production.&lt;/p&gt;&lt;p&gt;For many, the notion that CI/CD is an area of early investment is counterintuitive, and they find it hard to swallow the upfront engineering effort required to get a solid pipeline in place. The sooner CI/CD basics are implemented, however, the sooner the dividends start paying out. We will cover advanced continuous delivery considerations later in this white paper.&lt;/p&gt;&lt;p&gt;With cloud native infrastructure’s being inherently dynamic (in contrast to infrastructure not driven by APIs,) the ability to observe cloud native infrastructure and its workloads is also necessary. Software is written with functionality and debugging in mind. Most often, developers use logging as the primary method for debugging their applications. Integration with Elasticsearch and Kibana is key here.&lt;/p&gt;&lt;p&gt;Performance counters are another way to track application behavior and performance. Akin to SNMP for physical and virtual network monitoring, the equivalent cloud native “standard” is the use of Prometheus and Grafana, so it’s important that your application delivery solution integrate with these tools. Currently there is no recognized standard for cloud native application performance monitoring metrics.&lt;/p&gt;&lt;div class=&quot;intro&quot;&gt;&lt;h3 align=&quot;center&quot;&gt;OpenMetrics&lt;/h3&gt;&lt;p&gt;The cloud native ecosystem needs a common format for the exchange of metrics. Observability pains grow with the release of each newly instrumented service that presents its own metric format. OpenMetrics is an effort to create an open standard for transmitting metrics at scale, with support for both text representation and protocolbBuffers. OpenMetrics builds on Prometheus’s exposition format, popular telemetry formats, and protocols used in infrastructure and application monitoring.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Irrespective of the metrics format, there are a few metrics that have been identified as key indicators of the health of a cloud native application (that is, the health of a service): latency, traffic, errors, and saturation. Your application delivery solution should assist in producing these signals as well as provide support for the tracing of your distributed, cloud native workloads.&lt;/p&gt;&lt;p&gt;The aforementioned integrations with open source tools enable loosely coupled systems that are resilient, manageable, and observable. Citrix ADC also embodies these characteristics. All of the infrastructure integrations detailed here depend upon APIs for interchange and interoperability. Cloud native applications, too, are centered around declarative APIs to interface with the infrastructure and serve user-facing workloads.&lt;/p&gt;&lt;p&gt;The endpoints that your APIs expose are now being managed by open source service meshes. Service meshes deliver the next generation of networking designed for cloud native applications. At the core of a service mesh is its data plane (its collection of proxies). Proxy selection criteria and deployment model tradeoffs are our next area of consideration.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt; Check out the topic &lt;a href=&quot;/resources/service-mesh/choosing-the-perfect-proxy&quot;&gt;Choosing the Perfect Proxy&lt;/a&gt; to learn more! &lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Network Planes]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Network Planes",
  "thumbnail": "./network-planes.png",
  "category": "Network Planes",
  "type": "Article",
  "product": "Service Mesh Performance",
  "tags": ["Network Planes"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Learn more about service mesh fundamentals in ", mdx(Link, {
    className: "blog",
    to: "/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition",
    mdxType: "Link"
  }, "The Enterprise Path to Service Mesh Archictures (2nd Edition)"), " -  free book and excellent resource which addresses how to evaluate your organization\u2019s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.")), mdx("h2", null, "Data Plane"), mdx("p", null, "Service proxies (gateways) are elements of the data plane. The number of proxies present depends on the number of services you\u2019re running and the design of the service mesh\u2019s deployment model. Some service mesh initiatives create their own proxies, while others rely on existing ones. Envoy is a popular choice as the data plane element."), mdx("strong", null, "BFE"), mdx("p", null, mdx("a", {
    href: "https://github.com/bfenetworks/bfe"
  }, "BFE"), " is a Golang-based modern proxy. HTTP, HTTPS, SPDY, HTTP2, WebSocket, TLS, and FastCGI are among the load balancing algorithms and multiple protocols it supports. Users can configure rule and content-based routing using BFE's own domain-specific language."), mdx("strong", null, "Envoy"), mdx("p", null, "Envoy is a modern proxy developed in C++. Envoy's initial success stemmed from its ability to hot-reload both its configuration and itself (update itself in place while handling connections). API gateways, ingress controllers, service meshes, and managed offerings by Cloud providers are just a few of the projects that have been built on top of Envoy. Istio, App Mesh, Kuma, Open Service Mesh, and other service meshes (discussed in the Control Plane section) have been built on top of Envoy."), mdx("strong", null, "Linkerdv2 "), mdx("p", null, "The linkerd2-proxy is explicitly built for the service mesh sidecar use case, Linkerd, can be significantly smaller and faster than Envoy-based service meshes. Rust was chosen as the implementation language because it is memory-safe and highly performant. This service proxy purports a sub-1ms p99 traffic latency. Open-source.  From Buoyant."), mdx("strong", null, "NGINX"), mdx("p", null, mdx("a", {
    href: "https://github.com/nginxinc/nginmesh"
  }, "nginMesh"), " project deploys NGINX as a sidecar proxy in Istio. Open source. Written primarily in C and Rust. From NGINX. "), mdx("br", null), mdx("p", null, "The following are a couple of early, and now antiquated, service mesh\u2013like projects, forming control planes around existing load-balancers:"), mdx("strong", null, "SmartStack"), mdx("p", null, "Comprising two components: Nerve for health-checking and Synapse for service discovery. Open source. From AirBnB. Written in Ruby."), mdx("strong", null, "Nelson"), mdx("p", null, "Takes advantage of integrations with Envoy, Prometheus, Vault, and Nomad to provide Git-centric, developer-driven deployments with automated build-and-release workflow. Open source. From Verizon Labs. Written in Scala."), mdx("h2", null, "Control Plane"), mdx("strong", null, "Consul "), mdx("p", null, "Announced service mesh capable intention in v1.5. Became a full service mesh in v1.8. Consul uses Envoy as its dataplane, offering multi-cluster federation. Open and closed source. From HashiCorp. Primarily written in Go."), mdx("strong", null, "Linkerd"), mdx("p", null, "Linkerd is hosted by the Cloud Native Computing Foundation (CNCF) and has undergone two major releases with significant architectural changes and an entirely different code base used between the two versions."), mdx("strong", null, "Linkerdv1"), mdx("p", null, "The first version of Linkerd was built on top of Twitter Finagle. Pronounced \u201Clinker-dee\u201D, it includes both a proxying data plane and control plane, Namerd (\u201Cnamer-dee\u201D), all in one package. Open source. Written primarily in Scala."), mdx("li", null, "Data plane can be deployed in a node proxy model (commonly)  or in a proxy sidecar (not common). Proven scale, having served more than one trillion service requests."), mdx("li", null, "Supports services running within container orchestrators and as standalone virtual or physical machines."), mdx("li", null, "Service discovery abstractions to unite multiple systems."), mdx("strong", null, "Linkerdv2"), mdx("p", null, "The second major version of Linkerd is based on a project formerly known as Conduit, a Kubernetes-native and Kubernetes-only service mesh announced as a project in December 2017. In contrast to Istio and in learning from Linkerdv1, Linkerdv2\u2019s design principles revolve around a minimalist architecture and zero configuration philosophy, optimizing for streamlined setup."), mdx("li", null, "Open Source. From Buoyant. Control-plane written in Go. Hosted by the CNCF."), mdx("li", null, "Support for gRPC, HTTP/2, and HTTP/1.x requests plus all TCP traffic. Currently only supports Kubernetes."), mdx("strong", null, "Istio"), mdx("p", null, "Announced as a project in May 2017, Istio is considered to be a \u201Csecond explosion after Kubernetes\u201D given its architecture and surface area of functional aspiration."), mdx("li", null, "Supports services running within container orchestrators and as standalone virtual or physical machines."), mdx("li", null, "Was the first service mesh to promote the model of supporting automatic injection of service proxies as sidecars using Kubernetes Admission controller."), mdx("li", null, "Many projects have been built around Istio. Commercial, closed source offerings built around Istio include: AspenMesh, VMware Tanzu Service Mesh, Octarine (acquired by VMware in 2020). Commercial, closed source offerings built inside of Istio include Citrix Service Mesh To be built \u201Cwithin Istio\u201D means to offer the Istio control plane with an alternative service proxy. Citrix Service Mesh displaces Envoy with CPX. Open source, data plane proxy, MOSN released support for running under Istio as the control plane, while displacing Envoy as the service proxy."), mdx("li", null, "Many projects have been built within Istio."), mdx("li", null, "Mesher. Layer 7 (L7) proxy that runs as a sidecar deployable on Huawei Cloud Service Engine. Open source. Written primarily in Go. From Huawei."), mdx("strong", null, "NGINX Service Mesh "), mdx("p", null, "NGINX Service Mesh is a more recent arrival into the service mesh arena, having released in September 2020. Using an Nginx Plus augmented to interface with Kubernetes natively as its dataplane, supports ingress and egress gateways through NGINX Plus Kubernetes Ingress Controllers. NGINX Service Mesh offers its control plane as a CLI, meshctl, using the Service Mesh Interface (SMI) specification as its API. Both Open and closed source. From NGINX. Primarily written in C."), mdx("strong", null, "Others including Open Service Mesh, Maesh, Kuma, App Mesh..."), mdx("p", null, "This list is meant to give you an idea of the wide range of service meshes that are currently available. A complete list of service meshes and their details may be found in the Layer5 ", mdx(Link, {
    to: "/landscape",
    mdxType: "Link"
  }, "service mesh landscape"), ", maintained by the community."), mdx("h2", null, "Management Plane"), mdx("p", null, "The management plane sits a level above the control plane. It can perform various tasks such as operational patterns, business system integration, and application logic enhancement while functioning across different service meshes. A management plane can perform workload and mesh configuration validation, whether in preparation for onboarding a workload into the mesh or as you upgrade to new versions of components running your control and data planes or new versions of your applications. Management planes help organizations running a service mesh get the most out of their investment. Performance management is one part of maintaining service meshes, a function at which Meshery excels."), mdx("strong", null, "Meshery"), mdx("p", null, "the cloud native management plane for adopting, operating and developing on different service meshes. Meshery integrates business processes and application logic into service meshes by deploying custom WebAssembly (WASM) modules as filters in Envoy-based data planes. It provides governance, policy and performance and configuration management of service meshes with a visual topology for designing service mesh deployments and managing the fine-grained traffic control of a service mesh. - Open source. Created by Layer5. Primarily written in Go."), mdx("div", {
    className: "fact"
  }, "Service Mesh Linguistics", mdx("p", null, "As the lingua franca of the cloud-native ecosystem, Go is certainly prevalent and you might expect most service mesh projects to be written in Go. By the nature of their task, data planes must be highly efficient in the interception, introspection, and rewriting of network traffic. As a data plane component, Envoy is written in C++11 because it provides excellent performance (surprisingly, some say it provides a great developer experience). Rust has found its way into service meshes as a growing language (and something of a C++ competitor). Because of its properties around efficiency (outperforming Go) and memory safety (when written to be so) without garbage collection, Rust has been used for Linkerdv2\u2019s data plane component, for the former nginMesh\u2019s Mixer module (see \u201CHow to customize an Istio service mesh\u201D), and is now being used in WebAssembly programs as data plane filters (see \u201CWrite WASM filters for Envoy in Rust and deploy with Consul\u201D)."))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/network-planes/network-planes</link><guid isPermaLink="false">https://layer5.io/resources/network-planes/network-planes</guid><enclosure url="https://layer5.io/static/17825725d58d3f0c12d511f863833f64/network-planes.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Learn more about service mesh fundamentals in &lt;a class=&quot;blog&quot; href=&quot;/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition&quot;&gt;The Enterprise Path to Service Mesh Archictures (2nd Edition)&lt;/a&gt; -  free book and excellent resource which addresses how to evaluate your organization’s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.&lt;/p&gt;&lt;/div&gt;&lt;h2&gt;Data Plane&lt;/h2&gt;&lt;p&gt;Service proxies (gateways) are elements of the data plane. The number of proxies present depends on the number of services you’re running and the design of the service mesh’s deployment model. Some service mesh initiatives create their own proxies, while others rely on existing ones. Envoy is a popular choice as the data plane element.&lt;/p&gt;&lt;strong&gt;BFE&lt;/strong&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/bfenetworks/bfe&quot;&gt;BFE&lt;/a&gt; is a Golang-based modern proxy. HTTP, HTTPS, SPDY, HTTP2, WebSocket, TLS, and FastCGI are among the load balancing algorithms and multiple protocols it supports. Users can configure rule and content-based routing using BFE&amp;#x27;s own domain-specific language.&lt;/p&gt;&lt;strong&gt;Envoy&lt;/strong&gt;&lt;p&gt;Envoy is a modern proxy developed in C++. Envoy&amp;#x27;s initial success stemmed from its ability to hot-reload both its configuration and itself (update itself in place while handling connections). API gateways, ingress controllers, service meshes, and managed offerings by Cloud providers are just a few of the projects that have been built on top of Envoy. Istio, App Mesh, Kuma, Open Service Mesh, and other service meshes (discussed in the Control Plane section) have been built on top of Envoy.&lt;/p&gt;&lt;strong&gt;Linkerdv2 &lt;/strong&gt;&lt;p&gt;The linkerd2-proxy is explicitly built for the service mesh sidecar use case, Linkerd, can be significantly smaller and faster than Envoy-based service meshes. Rust was chosen as the implementation language because it is memory-safe and highly performant. This service proxy purports a sub-1ms p99 traffic latency. Open-source.  From Buoyant.&lt;/p&gt;&lt;strong&gt;NGINX&lt;/strong&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/nginxinc/nginmesh&quot;&gt;nginMesh&lt;/a&gt; project deploys NGINX as a sidecar proxy in Istio. Open source. Written primarily in C and Rust. From NGINX. &lt;/p&gt;&lt;br/&gt;&lt;p&gt;The following are a couple of early, and now antiquated, service mesh–like projects, forming control planes around existing load-balancers:&lt;/p&gt;&lt;strong&gt;SmartStack&lt;/strong&gt;&lt;p&gt;Comprising two components: Nerve for health-checking and Synapse for service discovery. Open source. From AirBnB. Written in Ruby.&lt;/p&gt;&lt;strong&gt;Nelson&lt;/strong&gt;&lt;p&gt;Takes advantage of integrations with Envoy, Prometheus, Vault, and Nomad to provide Git-centric, developer-driven deployments with automated build-and-release workflow. Open source. From Verizon Labs. Written in Scala.&lt;/p&gt;&lt;h2&gt;Control Plane&lt;/h2&gt;&lt;strong&gt;Consul &lt;/strong&gt;&lt;p&gt;Announced service mesh capable intention in v1.5. Became a full service mesh in v1.8. Consul uses Envoy as its dataplane, offering multi-cluster federation. Open and closed source. From HashiCorp. Primarily written in Go.&lt;/p&gt;&lt;strong&gt;Linkerd&lt;/strong&gt;&lt;p&gt;Linkerd is hosted by the Cloud Native Computing Foundation (CNCF) and has undergone two major releases with significant architectural changes and an entirely different code base used between the two versions.&lt;/p&gt;&lt;strong&gt;Linkerdv1&lt;/strong&gt;&lt;p&gt;The first version of Linkerd was built on top of Twitter Finagle. Pronounced “linker-dee”, it includes both a proxying data plane and control plane, Namerd (“namer-dee”), all in one package. Open source. Written primarily in Scala.&lt;/p&gt;&lt;li&gt;Data plane can be deployed in a node proxy model (commonly)  or in a proxy sidecar (not common). Proven scale, having served more than one trillion service requests.&lt;/li&gt;&lt;li&gt;Supports services running within container orchestrators and as standalone virtual or physical machines.&lt;/li&gt;&lt;li&gt;Service discovery abstractions to unite multiple systems.&lt;/li&gt;&lt;strong&gt;Linkerdv2&lt;/strong&gt;&lt;p&gt;The second major version of Linkerd is based on a project formerly known as Conduit, a Kubernetes-native and Kubernetes-only service mesh announced as a project in December 2017. In contrast to Istio and in learning from Linkerdv1, Linkerdv2’s design principles revolve around a minimalist architecture and zero configuration philosophy, optimizing for streamlined setup.&lt;/p&gt;&lt;li&gt;Open Source. From Buoyant. Control-plane written in Go. Hosted by the CNCF.&lt;/li&gt;&lt;li&gt;Support for gRPC, HTTP/2, and HTTP/1.x requests plus all TCP traffic. Currently only supports Kubernetes.&lt;/li&gt;&lt;strong&gt;Istio&lt;/strong&gt;&lt;p&gt;Announced as a project in May 2017, Istio is considered to be a “second explosion after Kubernetes” given its architecture and surface area of functional aspiration.&lt;/p&gt;&lt;li&gt;Supports services running within container orchestrators and as standalone virtual or physical machines.&lt;/li&gt;&lt;li&gt;Was the first service mesh to promote the model of supporting automatic injection of service proxies as sidecars using Kubernetes Admission controller.&lt;/li&gt;&lt;li&gt;Many projects have been built around Istio. Commercial, closed source offerings built around Istio include: AspenMesh, VMware Tanzu Service Mesh, Octarine (acquired by VMware in 2020). Commercial, closed source offerings built inside of Istio include Citrix Service Mesh To be built “within Istio” means to offer the Istio control plane with an alternative service proxy. Citrix Service Mesh displaces Envoy with CPX. Open source, data plane proxy, MOSN released support for running under Istio as the control plane, while displacing Envoy as the service proxy.&lt;/li&gt;&lt;li&gt;Many projects have been built within Istio.&lt;/li&gt;&lt;li&gt;Mesher. Layer 7 (L7) proxy that runs as a sidecar deployable on Huawei Cloud Service Engine. Open source. Written primarily in Go. From Huawei.&lt;/li&gt;&lt;strong&gt;NGINX Service Mesh &lt;/strong&gt;&lt;p&gt;NGINX Service Mesh is a more recent arrival into the service mesh arena, having released in September 2020. Using an Nginx Plus augmented to interface with Kubernetes natively as its dataplane, supports ingress and egress gateways through NGINX Plus Kubernetes Ingress Controllers. NGINX Service Mesh offers its control plane as a CLI, meshctl, using the Service Mesh Interface (SMI) specification as its API. Both Open and closed source. From NGINX. Primarily written in C.&lt;/p&gt;&lt;strong&gt;Others including Open Service Mesh, Maesh, Kuma, App Mesh...&lt;/strong&gt;&lt;p&gt;This list is meant to give you an idea of the wide range of service meshes that are currently available. A complete list of service meshes and their details may be found in the Layer5 &lt;a href=&quot;/landscape&quot;&gt;service mesh landscape&lt;/a&gt;, maintained by the community.&lt;/p&gt;&lt;h2&gt;Management Plane&lt;/h2&gt;&lt;p&gt;The management plane sits a level above the control plane. It can perform various tasks such as operational patterns, business system integration, and application logic enhancement while functioning across different service meshes. A management plane can perform workload and mesh configuration validation, whether in preparation for onboarding a workload into the mesh or as you upgrade to new versions of components running your control and data planes or new versions of your applications. Management planes help organizations running a service mesh get the most out of their investment. Performance management is one part of maintaining service meshes, a function at which Meshery excels.&lt;/p&gt;&lt;strong&gt;Meshery&lt;/strong&gt;&lt;p&gt;the cloud native management plane for adopting, operating and developing on different service meshes. Meshery integrates business processes and application logic into service meshes by deploying custom WebAssembly (WASM) modules as filters in Envoy-based data planes. It provides governance, policy and performance and configuration management of service meshes with a visual topology for designing service mesh deployments and managing the fine-grained traffic control of a service mesh. - Open source. Created by Layer5. Primarily written in Go.&lt;/p&gt;&lt;div class=&quot;fact&quot;&gt;Service Mesh Linguistics&lt;p&gt;As the lingua franca of the cloud-native ecosystem, Go is certainly prevalent and you might expect most service mesh projects to be written in Go. By the nature of their task, data planes must be highly efficient in the interception, introspection, and rewriting of network traffic. As a data plane component, Envoy is written in C++11 because it provides excellent performance (surprisingly, some say it provides a great developer experience). Rust has found its way into service meshes as a growing language (and something of a C++ competitor). Because of its properties around efficiency (outperforming Go) and memory safety (when written to be so) without garbage collection, Rust has been used for Linkerdv2’s data plane component, for the former nginMesh’s Mixer module (see “How to customize an Istio service mesh”), and is now being used in WebAssembly programs as data plane filters (see “Write WASM filters for Envoy in Rust and deploy with Consul”).&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[An Introduction to Meshery (Webinar-on-Demand)]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "An Introduction to Meshery (Webinar-on-Demand)",
  "thumbnail": "../../../assets/images/meshery/full-logo/meshery-logo-light-text.svg",
  "category": "Meshery",
  "type": "Recorded Webinar",
  "product": "Meshery",
  "tags": ["Network Planes", "Meshery"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("p", null, mdx(Link, {
    to: "/service-mesh-management/meshery",
    mdxType: "Link"
  }, "Meshery"), " is an open source, vendor-neutral, extensible management plane that enables service mesh users to overcome the challenges of complex virtual networking, empowers them to design and apply patterns containing tried and true best practices, benchmarks the performance of your service mesh deployments and enables developers, operators, and product managers to understand and manage their cloud native services with confidence."), mdx("h3", null, "Let\u2019s learn how to manage service meshes with confidence with the extensible service mesh manager, ", mdx(Link, {
    to: "/service-mesh-management/meshery",
    mdxType: "Link"
  }, "Meshery"), "."), mdx("div", {
    className: "iframe-container"
  }, mdx("iframe", {
    width: "460",
    height: "215",
    src: "https://www.youtube.com/embed/mU8qHUGYsk8",
    loading: "lazy",
    title: "YouTube video player",
    frameBorder: "0",
    allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",
    allowFullScreen: true
  }))));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/meshery/an-introduction-to-meshery-webinar-on-demand</link><guid isPermaLink="false">https://layer5.io/resources/meshery/an-introduction-to-meshery-webinar-on-demand</guid><enclosure url="https://layer5.io/static/2f4a78ada287ae5dcc2e75fad653f671/meshery-logo-light-text.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;p&gt;&lt;a href=&quot;/service-mesh-management/meshery&quot;&gt;Meshery&lt;/a&gt; is an open source, vendor-neutral, extensible management plane that enables service mesh users to overcome the challenges of complex virtual networking, empowers them to design and apply patterns containing tried and true best practices, benchmarks the performance of your service mesh deployments and enables developers, operators, and product managers to understand and manage their cloud native services with confidence.&lt;/p&gt;&lt;h3&gt;Let’s learn how to manage service meshes with confidence with the extensible service mesh manager, &lt;a href=&quot;/service-mesh-management/meshery&quot;&gt;Meshery&lt;/a&gt;.&lt;/h3&gt;&lt;div class=&quot;iframe-container&quot;&gt;&lt;iframe width=&quot;460&quot; height=&quot;215&quot; src=&quot;https://www.youtube.com/embed/mU8qHUGYsk8&quot; loading=&quot;lazy&quot; title=&quot;YouTube video player&quot; frameBorder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Service Mesh Architecture and Components]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Service Mesh Architecture and Components",
  "thumbnail": "./figure2.png",
  "category": "Service Mesh",
  "type": "Article",
  "tags": ["Service mesh", "Network Planes"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Learn more about service mesh fundamentals in ", mdx(Link, {
    className: "blog",
    to: "/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition",
    mdxType: "Link"
  }, "The Enterprise Path to Service Mesh Archictures (2nd Edition)"), " -  free book and excellent resource which addresses how to evaluate your organization\u2019s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.")), mdx("p", null, "Service mesh architectures typically consist of three planes: a management plane, a control plane, and a data plane. The analogy between how physical networks (and their equipment) are designed and managed along with\xA0the concept of these three planes immediately resonates with network engineers.\xA0 The OSI model is another type of training that network engineers receive. For those who haven't seen the OSI model in a while, Figure 1 serves as a refresher."), mdx("div", {
    className: "right"
  }, mdx("img", {
    src: Planes,
    align: "right",
    alt: "Network Planes"
  }), mdx("p", null, "Figure 1: Physical networking versus software-defined networking planes")), mdx("p", null, "Let\u2019s contrast physical networking planes and network topologies with those of service meshes:"), mdx("h3", null, "Physical network planes"), mdx("p", null, "The application traffic created by hosts, clients, servers, and applications that use the network as a transport is contained in the physical network data plane (also known as the forwarding plane). As a result, data plane traffic should never have source or destination IP addresses that are assigned to network elements like routers and switches; instead, it should be originated from and delivered to end devices like PCs and servers. To forward data plane traffic as swiftly as possible, routers and switches use hardware chips called application-specific integrated circuits (ASICs). A forwarding information base is referenced by the physical networking data plane (FIB). A forwarding information base (FIB) is a basic, dynamic table that maps a media access control address (MAC address) to a physical network port, allowing traffic to be transmitted at wire speed (using ASICs) to the next device."), mdx("p", null, "The physical networking control plane is the\xA0logical entity that is linked to router processes and functions and is responsible for generating and maintaining necessary intelligence about the state of the network (topology) and the router's interfaces. The control plane includes network protocols, such as routing, signaling, and link-state protocols that are used to build and maintain the operational state of the network and provide IP connectivity between IP hosts.\xA0\xA0 As physical network control planes run in-band with network traffic, they are vulnerable to Denial of service (DoS) attacks, which can result in:"), mdx("ul", null, mdx("li", null, "Exhaustion of memory and/or buffer resources."), mdx("li", null, "Loss of routing protocol updates and keepalives."), mdx("li", null, "Slow or blocked access to interactive management sessions."), mdx("li", null, "High CPU utilization."), mdx("li", null, "Routing instability, interrupted network reachability, or inconsistent packet delivery.")), mdx("p", null, "The physical networking management plane is a logical entity that specifies the traffic used to access, manage, and monitor all network elements via protocols such as SNMP, SSH, HTTPS, and\xA0Telnet. All network provisioning, maintenance, and monitoring operations are supported by the management plane. Although control plane network traffic is handled in-band with all other data plane traffic, management plane traffic\xA0can be carried over an out-of-band (OOB) management network to enable separate reachability if the primary in-band IP path is unavailable (and create a security boundary). Restricting management plane access to devices on trusted networks is critical."), mdx("p", null, "Physical networking control and data planes are tightly coupled and generally vendor-provided as a proprietary integration of hardware and firmware. Software-defined networking (SDN) has done much to standardize and decouple. OpenvSwitch and OpenDaylight are two examples of SDN projects. We\u2019ll see that control and data planes of service meshes are not necessarily tightly coupled."), mdx("div", {
    className: "left"
  }, mdx("img", {
    src: Topology,
    align: "right",
    alt: "Mesh Topology"
  }), mdx("p", null, "Figure 2: Mesh topology\u2014fully connected network nodes")), mdx("h3", null, "Physical network topologies"), mdx("p", null, "Star, spoke-and-hub, tree (also called\xA0hierarchical), and mesh are some of the most used physical networking topologies. Nodes in mesh networks connect directly and non-hierarchically, such that each node is connected to an indefinite number (typically as many as possible or as needed dynamically) of neighbour nodes, allowing at least one path from a given node to any other node to route data efficiently ."), mdx("p", null, "Wireless is the canonical use case for physical mesh networks in which the networking medium is sensitive to line-of-sight, weather-induced, or other disruptions, and so reliability is a top priority. Mesh networks typically self-configure, allowing\xA0dynamic task distribution. This ability is especially important to mitigate\xA0the risk of failure (improving resiliency) and reacting to continuously changing topologies. It's easy to see why this network topology\xA0is the preferred design for service mesh architectures."), mdx("h3", null, "Service mesh network planes"), mdx("p", null, "Service mesh architectures typically employ the same three networking planes: data, control, and management. "), mdx("div", {
    className: "right"
  }, mdx("img", {
    src: Architecture,
    align: "right",
    alt: "Service mesh architecture"
  }), mdx("p", null, "Figure 3: An example of service mesh architecture. In Conduit\u2019s architecture, control and data planes divide in-band and out-of-band responsibility for service traffic")), mdx("p", null, "A service mesh data plane (also known as the proxying layer) intercepts all packets in a request and performs health checks, routing, load balancing, authentication, authorization, and generation of observable signals. Service proxies are transparently inserted, and applications are oblivious of the data plane's existence when they conduct service-to-service calls. Intra-service communication, as well as inbound (ingress) and outbound (egress) service mesh traffic, are handled by data planes. Whether traffic is entering the mesh (ingressing) or leaving the mesh (egressing), application service traffic is directed first to the service proxy for handling prior to sending (or not sending) along to the application.\xA0 Traffic is transparently intercepted and redirected to the service proxy in order to reroute traffic from the service proxy to the service application. The service proxy intercepts and redirects traffic between\xA0the service proxy and service application places the service application\u2019s container onto a network it would otherwise not be on.\xA0All traffic to and from the service application is seen by the service proxy.\xA0 Service proxies are the building blocks of service mesh data planes."), mdx("div", {
    className: "fact"
  }, "Traffic Interception and Redirection:", mdx("p", null, "The technology utilised to intercept and redirect traffic varies between service meshes. Some meshes allow you the option of using iptables, IPVS, or eBPF to transparently proxy requests between clients and service applications. Other service mesh proxies operate in a less transparent manner, requiring application traffic to be configured to direct their traffic to the proxy. The operating system type and kernel version used for the service mesh deployment are constrained by the choice of each of these technologies, which influences the speed with which packets are processed.")), mdx("p", null, "Envoy is one of the most widely used proxy in service mesh data planes. It's also common to see it deployed\xA0as a load balancer or ingress gateway. The proxies used in service mesh data planes are highly intelligent.\xA0 In order to manipulate network packets\xA0(including application level data), they\xA0may include any number of protocol-specific filters . Extending data plane capabilities with technology advancements like WebAssembly allows service meshes to inject additional logic into requests while simultaneously handling large traffic loads."), mdx("p", null, "When the number of proxies becomes unmanageable or when a single point of visibility and control is required, a service mesh control plane is essential. Control planes offer policy and configuration for the services in the mesh, transforming a set of isolated, stateless proxies into a service mesh. Control planes run out-of-band and do not directly touch any network packets in the mesh. Control planes usually include a command-line interface (CLI) and a user interface to interact with, both of which provide access to a centralised API for regulating proxy behaviour holistically.\xA0You can use the control plane's APIs to automate changes to its configuration (for example, using a continuous integration/continuous deployment pipeline), where configuration is generally version controlled and updated."), mdx("div", {
    className: "fact"
  }, "Proxies are generally considered stateless, but this is a thought-provoking concept. In the way in which proxies are generally informed by the control plane of the presence of services, mesh topology updates, traffic and authorization policy, and so on, proxies cache the state of the mesh but aren\u2019t regarded as the source of truth for the state of the mesh."), mdx("p", null, "We can see how the data and control planes are packaged and deployed in Linkerd (pronounced \"linker-dee\") and Istio (pronounced \"Ist-tee-oh\"), two prominent open source service meshes. In terms of packaging, Linkerdv1 contains both its proxying components (linkerd) and its control plane (namerd) packaged together simply as \u201CLinkerd,\u201D and Istio brings a collection of control plane components (Galley, Pilot, and Citadel) to pair by default with Envoy (a data plane) packaged together as \u201CIstio.\u201D Envoy is often labeled a service mesh, inappropriately so, because it takes packaging with a control plane to form a service mesh."), mdx("p", null, "A service mesh management plane is a higher order level of control as shown in Figure 4. A management plane may provide a variety of functions. As such, implementations vary in their functionality: some focusing on orchestrating service meshes (e.g., service mesh lifecycle management) and mesh federation, providing insight across a collection of diverse meshes. Some management planes focus on integrating service meshes with business process and policy, including governance, compliance, validation of configuration, and extensible access control."), mdx("div", {
    className: "left"
  }, mdx("img", {
    src: Meshery,
    align: "right",
    alt: "Meshery"
  }), mdx("p", null, "Figure 4: Meshery, the cloud native management plane\u2019s architecture.")), mdx("p", null, "A service mesh management plane is a higher order level of control. A management plane can provide\xA0various functions. As a result, implementations differ in functionality, with some focused on orchestrating service meshes (e.g., service mesh lifecycle management) and mesh federation, which provides insight across a set of meshes.\xA0Some management planes focus on integrating service meshes with business process and policy, including governance, compliance, validation of configuration, and extensible access control."), mdx("p", null, "In terms of deployments, data planes, such as Linkerdv2, contain proxies that are created as part of the project and are not designed to be configured by hand, but rather to have their behaviour completely controlled by the control plane. Other service meshes, such as Istio, prefer not to develop their own proxy and instead ingest and utilise independent proxies (separate projects), simplifying proxy selection and deployment outside of the mesh(standalone). Control planes are often deployed in a separate \"system\" namespace,\xA0using\xA0Kubernetes as the example infrastructure. Depending on how closely they integrate with non-containerized workloads and a business's backend systems, management planes are deployed both on and off cluster.")));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/service-mesh-architecture-and-components</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/service-mesh-architecture-and-components</guid><enclosure url="https://layer5.io/static/bed9d3fcfe69a84ae0787ff2ca8845aa/figure2.png" length="0" type="image/png"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Learn more about service mesh fundamentals in &lt;a class=&quot;blog&quot; href=&quot;/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition&quot;&gt;The Enterprise Path to Service Mesh Archictures (2nd Edition)&lt;/a&gt; -  free book and excellent resource which addresses how to evaluate your organization’s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Service mesh architectures typically consist of three planes: a management plane, a control plane, and a data plane. The analogy between how physical networks (and their equipment) are designed and managed along with the concept of these three planes immediately resonates with network engineers.  The OSI model is another type of training that network engineers receive. For those who haven&amp;#x27;t seen the OSI model in a while, Figure 1 serves as a refresher.&lt;/p&gt;&lt;div class=&quot;right&quot;&gt;&lt;img src=&quot;static/figure1-6e4093aff217b5c671eada947906c711.png&quot; align=&quot;right&quot; alt=&quot;Network Planes&quot;/&gt;&lt;p&gt;Figure 1: Physical networking versus software-defined networking planes&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Let’s contrast physical networking planes and network topologies with those of service meshes:&lt;/p&gt;&lt;h3&gt;Physical network planes&lt;/h3&gt;&lt;p&gt;The application traffic created by hosts, clients, servers, and applications that use the network as a transport is contained in the physical network data plane (also known as the forwarding plane). As a result, data plane traffic should never have source or destination IP addresses that are assigned to network elements like routers and switches; instead, it should be originated from and delivered to end devices like PCs and servers. To forward data plane traffic as swiftly as possible, routers and switches use hardware chips called application-specific integrated circuits (ASICs). A forwarding information base is referenced by the physical networking data plane (FIB). A forwarding information base (FIB) is a basic, dynamic table that maps a media access control address (MAC address) to a physical network port, allowing traffic to be transmitted at wire speed (using ASICs) to the next device.&lt;/p&gt;&lt;p&gt;The physical networking control plane is the logical entity that is linked to router processes and functions and is responsible for generating and maintaining necessary intelligence about the state of the network (topology) and the router&amp;#x27;s interfaces. The control plane includes network protocols, such as routing, signaling, and link-state protocols that are used to build and maintain the operational state of the network and provide IP connectivity between IP hosts.   As physical network control planes run in-band with network traffic, they are vulnerable to Denial of service (DoS) attacks, which can result in:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Exhaustion of memory and/or buffer resources.&lt;/li&gt;&lt;li&gt;Loss of routing protocol updates and keepalives.&lt;/li&gt;&lt;li&gt;Slow or blocked access to interactive management sessions.&lt;/li&gt;&lt;li&gt;High CPU utilization.&lt;/li&gt;&lt;li&gt;Routing instability, interrupted network reachability, or inconsistent packet delivery.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;The physical networking management plane is a logical entity that specifies the traffic used to access, manage, and monitor all network elements via protocols such as SNMP, SSH, HTTPS, and Telnet. All network provisioning, maintenance, and monitoring operations are supported by the management plane. Although control plane network traffic is handled in-band with all other data plane traffic, management plane traffic can be carried over an out-of-band (OOB) management network to enable separate reachability if the primary in-band IP path is unavailable (and create a security boundary). Restricting management plane access to devices on trusted networks is critical.&lt;/p&gt;&lt;p&gt;Physical networking control and data planes are tightly coupled and generally vendor-provided as a proprietary integration of hardware and firmware. Software-defined networking (SDN) has done much to standardize and decouple. OpenvSwitch and OpenDaylight are two examples of SDN projects. We’ll see that control and data planes of service meshes are not necessarily tightly coupled.&lt;/p&gt;&lt;div class=&quot;left&quot;&gt;&lt;img src=&quot;static/figure2-1a9f1b412652dfd917052e9ac2854c73.png&quot; align=&quot;right&quot; alt=&quot;Mesh Topology&quot;/&gt;&lt;p&gt;Figure 2: Mesh topology—fully connected network nodes&lt;/p&gt;&lt;/div&gt;&lt;h3&gt;Physical network topologies&lt;/h3&gt;&lt;p&gt;Star, spoke-and-hub, tree (also called hierarchical), and mesh are some of the most used physical networking topologies. Nodes in mesh networks connect directly and non-hierarchically, such that each node is connected to an indefinite number (typically as many as possible or as needed dynamically) of neighbour nodes, allowing at least one path from a given node to any other node to route data efficiently .&lt;/p&gt;&lt;p&gt;Wireless is the canonical use case for physical mesh networks in which the networking medium is sensitive to line-of-sight, weather-induced, or other disruptions, and so reliability is a top priority. Mesh networks typically self-configure, allowing dynamic task distribution. This ability is especially important to mitigate the risk of failure (improving resiliency) and reacting to continuously changing topologies. It&amp;#x27;s easy to see why this network topology is the preferred design for service mesh architectures.&lt;/p&gt;&lt;h3&gt;Service mesh network planes&lt;/h3&gt;&lt;p&gt;Service mesh architectures typically employ the same three networking planes: data, control, and management. &lt;/p&gt;&lt;div class=&quot;right&quot;&gt;&lt;img src=&quot;static/figure3-58e1728df81b55a288fc15de629455ce.png&quot; align=&quot;right&quot; alt=&quot;Service mesh architecture&quot;/&gt;&lt;p&gt;Figure 3: An example of service mesh architecture. In Conduit’s architecture, control and data planes divide in-band and out-of-band responsibility for service traffic&lt;/p&gt;&lt;/div&gt;&lt;p&gt;A service mesh data plane (also known as the proxying layer) intercepts all packets in a request and performs health checks, routing, load balancing, authentication, authorization, and generation of observable signals. Service proxies are transparently inserted, and applications are oblivious of the data plane&amp;#x27;s existence when they conduct service-to-service calls. Intra-service communication, as well as inbound (ingress) and outbound (egress) service mesh traffic, are handled by data planes. Whether traffic is entering the mesh (ingressing) or leaving the mesh (egressing), application service traffic is directed first to the service proxy for handling prior to sending (or not sending) along to the application.  Traffic is transparently intercepted and redirected to the service proxy in order to reroute traffic from the service proxy to the service application. The service proxy intercepts and redirects traffic between the service proxy and service application places the service application’s container onto a network it would otherwise not be on. All traffic to and from the service application is seen by the service proxy.  Service proxies are the building blocks of service mesh data planes.&lt;/p&gt;&lt;div class=&quot;fact&quot;&gt;Traffic Interception and Redirection:&lt;p&gt;The technology utilised to intercept and redirect traffic varies between service meshes. Some meshes allow you the option of using iptables, IPVS, or eBPF to transparently proxy requests between clients and service applications. Other service mesh proxies operate in a less transparent manner, requiring application traffic to be configured to direct their traffic to the proxy. The operating system type and kernel version used for the service mesh deployment are constrained by the choice of each of these technologies, which influences the speed with which packets are processed.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Envoy is one of the most widely used proxy in service mesh data planes. It&amp;#x27;s also common to see it deployed as a load balancer or ingress gateway. The proxies used in service mesh data planes are highly intelligent.  In order to manipulate network packets (including application level data), they may include any number of protocol-specific filters . Extending data plane capabilities with technology advancements like WebAssembly allows service meshes to inject additional logic into requests while simultaneously handling large traffic loads.&lt;/p&gt;&lt;p&gt;When the number of proxies becomes unmanageable or when a single point of visibility and control is required, a service mesh control plane is essential. Control planes offer policy and configuration for the services in the mesh, transforming a set of isolated, stateless proxies into a service mesh. Control planes run out-of-band and do not directly touch any network packets in the mesh. Control planes usually include a command-line interface (CLI) and a user interface to interact with, both of which provide access to a centralised API for regulating proxy behaviour holistically. You can use the control plane&amp;#x27;s APIs to automate changes to its configuration (for example, using a continuous integration/continuous deployment pipeline), where configuration is generally version controlled and updated.&lt;/p&gt;&lt;div class=&quot;fact&quot;&gt;Proxies are generally considered stateless, but this is a thought-provoking concept. In the way in which proxies are generally informed by the control plane of the presence of services, mesh topology updates, traffic and authorization policy, and so on, proxies cache the state of the mesh but aren’t regarded as the source of truth for the state of the mesh.&lt;/div&gt;&lt;p&gt;We can see how the data and control planes are packaged and deployed in Linkerd (pronounced &amp;quot;linker-dee&amp;quot;) and Istio (pronounced &amp;quot;Ist-tee-oh&amp;quot;), two prominent open source service meshes. In terms of packaging, Linkerdv1 contains both its proxying components (linkerd) and its control plane (namerd) packaged together simply as “Linkerd,” and Istio brings a collection of control plane components (Galley, Pilot, and Citadel) to pair by default with Envoy (a data plane) packaged together as “Istio.” Envoy is often labeled a service mesh, inappropriately so, because it takes packaging with a control plane to form a service mesh.&lt;/p&gt;&lt;p&gt;A service mesh management plane is a higher order level of control as shown in Figure 4. A management plane may provide a variety of functions. As such, implementations vary in their functionality: some focusing on orchestrating service meshes (e.g., service mesh lifecycle management) and mesh federation, providing insight across a collection of diverse meshes. Some management planes focus on integrating service meshes with business process and policy, including governance, compliance, validation of configuration, and extensible access control.&lt;/p&gt;&lt;div class=&quot;left&quot;&gt;&lt;img src=&quot;static/figure4-b3eeda7dcac8dcf72d83a4cc33156ded.png&quot; align=&quot;right&quot; alt=&quot;Meshery&quot;/&gt;&lt;p&gt;Figure 4: Meshery, the cloud native management plane’s architecture.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;A service mesh management plane is a higher order level of control. A management plane can provide various functions. As a result, implementations differ in functionality, with some focused on orchestrating service meshes (e.g., service mesh lifecycle management) and mesh federation, which provides insight across a set of meshes. Some management planes focus on integrating service meshes with business process and policy, including governance, compliance, validation of configuration, and extensible access control.&lt;/p&gt;&lt;p&gt;In terms of deployments, data planes, such as Linkerdv2, contain proxies that are created as part of the project and are not designed to be configured by hand, but rather to have their behaviour completely controlled by the control plane. Other service meshes, such as Istio, prefer not to develop their own proxy and instead ingest and utilise independent proxies (separate projects), simplifying proxy selection and deployment outside of the mesh(standalone). Control planes are often deployed in a separate &amp;quot;system&amp;quot; namespace, using Kubernetes as the example infrastructure. Depending on how closely they integrate with non-containerized workloads and a business&amp;#x27;s backend systems, management planes are deployed both on and off cluster.&lt;/p&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Service Mesh Fundamentals]]></title><description><![CDATA[var _excluded = ["components"];

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

/* @jsxRuntime classic */

/* @jsx mdx */
var _frontmatter = {
  "title": "Service Mesh Fundamentals",
  "thumbnail": "../service-mesh.svg",
  "category": "Service Mesh",
  "type": "Article",
  "tags": ["Service mesh"],
  "featured": false,
  "published": true,
  "resource": true
};
var layoutProps = {
  _frontmatter: _frontmatter
};
var MDXLayout = "wrapper";
return function MDXContent(_ref) {
  var components = _ref.components,
      props = _objectWithoutProperties(_ref, _excluded);

  return mdx(MDXLayout, _extends({}, layoutProps, props, {
    components: components,
    mdxType: "MDXLayout"
  }), mdx(ResourcesWrapper, {
    mdxType: "ResourcesWrapper"
  }, mdx("div", {
    className: "intro"
  }, mdx("p", null, "Learn more about service mesh fundamentals in ", mdx(Link, {
    className: "blog",
    to: "/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition",
    mdxType: "Link"
  }, "The Enterprise Path to Service Mesh Archictures (2nd Edition)"), " -  free book and excellent resource which addresses how to evaluate your organization\u2019s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.")), mdx("p", null, "Many emerging technologies are based on or reincarnated from prior thinking and approaches to computing and networking paradigms. Why is this phenomenon required? We'll look to the microservices and containers movement for service meshes, a cloud-native approach to design scalable, independently supplied services. What was previously internal application communications have become a mesh of service-to-service remote procedure calls (RPCs) transported via networks thanks to microservices. Microservices democratize language and technology choice across independent service teams that generate new features quickly as they iteratively and continuously provide software(typically as a service). The most crucial driver of microservices as an architectural model is the decoupling of engineering teams and their enhanced speed."), mdx("h3", null, "Operating Many Services"), mdx("p", null, "The initial couple of microservices are relatively simple to deliver and operate\u2014at least in comparison to organizations' challenges when they first use many microservices. Whether that \"many\" is three or one hundred, a major technological issue will inevitably arise. To relieve microservices headaches, several remedies are prescribed; one notable example is the use of client libraries. In microservices environments, language and framework-specific client libraries, whether pre-existing or generated, are utilized to address distributed systems challenges. Many teams first explore their path to a service mesh in these situations. The sheer volume of services that must be managed on an individual, distributed basis (rather than centrally as with monoliths) and the challenges of ensuring their reliability, observability, and security cannot be met with outmoded paradigms, necessitating the need to reincarnate prior thinking and approaches. It is necessary to adapt new tools and techniques."), mdx("p", null, "Since microservices are distributed (often ephemeral) by nature, and the network is critical to their functioning, we should consider the fallacy that networks are reliable, have no latency, have infinite bandwidth, and that communication is guaranteed. When you consider how important it is to be able to control and secure service communication in distributed systems that rely on network calls with every transaction, every time an application is invoked, you can see why you are under tooled and why running more than a few microservices on a network topology that is in constant flux is so difficult. In the age of microservices, a new layer of tooling for the caretaking of services is needed\u2014a service mesh is needed."), mdx("h3", null, "What Is a Service Mesh?"), mdx("p", null, "Service meshes provide intent-based networking for microservices describing desired behavior of the network in the face of constantly changing conditions and network topology. At their core, service meshes provide:"), mdx("ul", null, mdx("li", null, "A services-first network;"), mdx("li", null, "A developer-driven network;"), mdx("li", null, "A network that is primarily concerned with alleviating application developers from building infrastructure concerns into their application code; "), mdx("li", null, "A network that empowers operators with the ability to declaratively define network behavior, node identity, and traffic flow through policy; "), mdx("li", null, "A network that enables service owners to control application logic without engaging developers to change its code.")), mdx("p", null, "Value derived from the layer of tooling that service meshes provide is most evident in the land of microservices. The more services, the more value derived from the mesh. In subsequent chapters, I show how service meshes provide value outside of the use of microservices and containers and help modernize existing services (running on virtual or bare metal servers) as well."), mdx("p", null, "Many of you will find yourself working in organizations that have more than one sort of service mesh. Diversity is driven by a broad set of workload requirements varying from process-based to event-driven in their design, from those running on bare metal to executing in functions and those representing every style of deployment artifact in-between. The scope of service mesh capability required by different organizations varies. As a result, different service meshes are created with slightly different use cases in mind, resulting in differences in service mesh architecture and deployment models. Service meshes, which are driven by Cloud, Hybrid, On-Prem, and Edge, can enable each of these. With the requirements of different edge devices and their functions, along with ephemeral cloud-based workloads, microservice patterns and technologies give a plethora of opportunities for service mesh differentiation and specialization. Cloud vendors produce and collaborate as they provide service mesh as a managed service on their platforms."), mdx("div", {
    className: "center"
  }, mdx("img", {
    src: Differences,
    align: "center",
    alt: "comparative spectrum"
  }), mdx("p", null, "Figure 1: A comparative spectrum of the difference between some of the service meshes based on their individual strengths.")), mdx("p", null, "The demand for service meshes, including meshes native to specific cloud platforms, is growing in tandem with the number of microservices. As a result, many enterprises now use various service mesh products, either separately or together."), mdx("h3", null, "Service Mesh Abstractions"), mdx("p", null, "Because there are any number of service meshes available, independent specifications have cropped up to provide abstraction and standardization across them. Three service mesh abstractions exist today:"), mdx("ul", null, mdx("li", null, mdx(Link, {
    to: "/projects/service-mesh-performance",
    mdxType: "Link"
  }, "Service Mesh Performance"), " (SMP) is a format for describing and capturing service mesh performance. Created by Layer5; Meshery is the canonical implementation of this specification."), mdx("li", null, "Multi-Vendor Service Mesh Interoperation (Hamlet) is a set of API standards for enabling service mesh federation. Created by VMware."), mdx("li", null, mdx(Link, {
    to: "/projects/service-mesh-interface-conformance",
    mdxType: "Link"
  }, "Service Mesh Interface"), " (SMI) is a standard interface for service meshes on Kubernetes. Created by Microsoft; Meshery is the official SMI conformance tool used to ensure that a cluster is properly configured and that its behavior conforms to official SMI specifications.")), mdx("h3", null, "Service Mesh Landscape"), mdx("p", null, "Let's start characterizing different service meshes now that we better understand why we live in a multi-mesh world. Some service meshes support non-containerized workloads (services operating on a VM or on bare metal), while others specialize in layering on top of container orchestrators, such as Kubernetes. All service meshes support integration with service discovery systems. The subsections that follow provide a very brief survey of service mesh offerings within the current technology landscape."), mdx("div", {
    className: "fact-left"
  }, mdx("p", null, "See the Layer5 ", mdx(Link, {
    to: "/service-mesh-landscape",
    mdxType: "Link"
  }, "service mesh landscape"), " for a comprehensive overview and characterizing of all of the service meshes, service proxies, and related tools available today. This landscape is community-maintained and places service meshes in contrast with one another so that the reader might make the most informed decision about which service mesh best suits their needs.")), mdx("h3", null, "Why Do I Need One?"), mdx("p", null, "\"I have a container orchestrator; why do I need another infrastructure layer?\" you might wonder. Container orchestrators provide most of what the cluster (nodes and containers) requires.\xA0 Container orchestrators' primary focus is on scheduling, discovery, and health, mainly at the infrastructure level (networking being a Layer 4 and below focus). As a result, microservices have unmet service-level\xA0needs. A service mesh is a specialized infrastructure layer that makes service-to-service communication safe, fast, and reliable. Its operation is typically based on a container orchestrator or integration\xA0with another service discovery system. Although service meshes are frequently deployed as a separate layer on top of container orchestrators, they do\xA0not require one\xA0because control and data plane components could be deployed independently of containerized infrastructure."), mdx("p", null, "As stated previously, the network is directly and critically involved in every transaction, every execution of business logic, and every request made to the application in microservices deployments. For modern, cloud-native applications, network stability and latency are top priorities. A cloud native application may be made up of hundreds of microservices, each of which could have several instances, and each of those ephemeral instances could be rescheduled by a container orchestrator as needed."), mdx("p", null, "What would you want from a network that connects your microservices, given the network's criticality? You want your network to be as intelligent and resilient as possible. To improve the aggregate reliability\xA0of your cluster, you want your network to route traffic around from\xA0failures. You want to avoid overhead\xA0like high-latency routes or servers with cold caches in your network. You want your network to protect the traffic that flows between services against trivial attacks. You want your network to provide insight into service communication failures by exposing unforeseen dependencies and root causes. You want your network to let you impose policies at the granularity of service behaviors, not just at the connection level. You also don\u2019t want to write all this logic into your application."), mdx("p", null, "You want Layer 5 management. You want a services-first network. You want a service mesh!")));
}
;
MDXContent.isMDXComponent = true;]]></description><link>https://layer5.io/resources/service-mesh/service-mesh-fundamentals</link><guid isPermaLink="false">https://layer5.io/resources/service-mesh/service-mesh-fundamentals</guid><enclosure url="https://layer5.io/static/cb310234b6631abcabb632a85974a3dd/service-mesh.svg" length="0" type="image/svg+xml"/><content:encoded>&lt;div class=&quot;Resourcesstyle__ResourcesWrapper-sc-1y33ukx-0 sfJrc&quot;&gt;&lt;div class=&quot;intro&quot;&gt;&lt;p&gt;Learn more about service mesh fundamentals in &lt;a class=&quot;blog&quot; href=&quot;/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition&quot;&gt;The Enterprise Path to Service Mesh Archictures (2nd Edition)&lt;/a&gt; -  free book and excellent resource which addresses how to evaluate your organization’s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;Many emerging technologies are based on or reincarnated from prior thinking and approaches to computing and networking paradigms. Why is this phenomenon required? We&amp;#x27;ll look to the microservices and containers movement for service meshes, a cloud-native approach to design scalable, independently supplied services. What was previously internal application communications have become a mesh of service-to-service remote procedure calls (RPCs) transported via networks thanks to microservices. Microservices democratize language and technology choice across independent service teams that generate new features quickly as they iteratively and continuously provide software(typically as a service). The most crucial driver of microservices as an architectural model is the decoupling of engineering teams and their enhanced speed.&lt;/p&gt;&lt;h3&gt;Operating Many Services&lt;/h3&gt;&lt;p&gt;The initial couple of microservices are relatively simple to deliver and operate—at least in comparison to organizations&amp;#x27; challenges when they first use many microservices. Whether that &amp;quot;many&amp;quot; is three or one hundred, a major technological issue will inevitably arise. To relieve microservices headaches, several remedies are prescribed; one notable example is the use of client libraries. In microservices environments, language and framework-specific client libraries, whether pre-existing or generated, are utilized to address distributed systems challenges. Many teams first explore their path to a service mesh in these situations. The sheer volume of services that must be managed on an individual, distributed basis (rather than centrally as with monoliths) and the challenges of ensuring their reliability, observability, and security cannot be met with outmoded paradigms, necessitating the need to reincarnate prior thinking and approaches. It is necessary to adapt new tools and techniques.&lt;/p&gt;&lt;p&gt;Since microservices are distributed (often ephemeral) by nature, and the network is critical to their functioning, we should consider the fallacy that networks are reliable, have no latency, have infinite bandwidth, and that communication is guaranteed. When you consider how important it is to be able to control and secure service communication in distributed systems that rely on network calls with every transaction, every time an application is invoked, you can see why you are under tooled and why running more than a few microservices on a network topology that is in constant flux is so difficult. In the age of microservices, a new layer of tooling for the caretaking of services is needed—a service mesh is needed.&lt;/p&gt;&lt;h3&gt;What Is a Service Mesh?&lt;/h3&gt;&lt;p&gt;Service meshes provide intent-based networking for microservices describing desired behavior of the network in the face of constantly changing conditions and network topology. At their core, service meshes provide:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;A services-first network;&lt;/li&gt;&lt;li&gt;A developer-driven network;&lt;/li&gt;&lt;li&gt;A network that is primarily concerned with alleviating application developers from building infrastructure concerns into their application code; &lt;/li&gt;&lt;li&gt;A network that empowers operators with the ability to declaratively define network behavior, node identity, and traffic flow through policy; &lt;/li&gt;&lt;li&gt;A network that enables service owners to control application logic without engaging developers to change its code.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Value derived from the layer of tooling that service meshes provide is most evident in the land of microservices. The more services, the more value derived from the mesh. In subsequent chapters, I show how service meshes provide value outside of the use of microservices and containers and help modernize existing services (running on virtual or bare metal servers) as well.&lt;/p&gt;&lt;p&gt;Many of you will find yourself working in organizations that have more than one sort of service mesh. Diversity is driven by a broad set of workload requirements varying from process-based to event-driven in their design, from those running on bare metal to executing in functions and those representing every style of deployment artifact in-between. The scope of service mesh capability required by different organizations varies. As a result, different service meshes are created with slightly different use cases in mind, resulting in differences in service mesh architecture and deployment models. Service meshes, which are driven by Cloud, Hybrid, On-Prem, and Edge, can enable each of these. With the requirements of different edge devices and their functions, along with ephemeral cloud-based workloads, microservice patterns and technologies give a plethora of opportunities for service mesh differentiation and specialization. Cloud vendors produce and collaborate as they provide service mesh as a managed service on their platforms.&lt;/p&gt;&lt;div class=&quot;center&quot;&gt;&lt;img src=&quot;static/figure1-624b7da78797752b7cf79ce222606415.png&quot; align=&quot;center&quot; alt=&quot;comparative spectrum&quot;/&gt;&lt;p&gt;Figure 1: A comparative spectrum of the difference between some of the service meshes based on their individual strengths.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;The demand for service meshes, including meshes native to specific cloud platforms, is growing in tandem with the number of microservices. As a result, many enterprises now use various service mesh products, either separately or together.&lt;/p&gt;&lt;h3&gt;Service Mesh Abstractions&lt;/h3&gt;&lt;p&gt;Because there are any number of service meshes available, independent specifications have cropped up to provide abstraction and standardization across them. Three service mesh abstractions exist today:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;/projects/service-mesh-performance&quot;&gt;Service Mesh Performance&lt;/a&gt; (SMP) is a format for describing and capturing service mesh performance. Created by Layer5; Meshery is the canonical implementation of this specification.&lt;/li&gt;&lt;li&gt;Multi-Vendor Service Mesh Interoperation (Hamlet) is a set of API standards for enabling service mesh federation. Created by VMware.&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;/projects/service-mesh-interface-conformance&quot;&gt;Service Mesh Interface&lt;/a&gt; (SMI) is a standard interface for service meshes on Kubernetes. Created by Microsoft; Meshery is the official SMI conformance tool used to ensure that a cluster is properly configured and that its behavior conforms to official SMI specifications.&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;Service Mesh Landscape&lt;/h3&gt;&lt;p&gt;Let&amp;#x27;s start characterizing different service meshes now that we better understand why we live in a multi-mesh world. Some service meshes support non-containerized workloads (services operating on a VM or on bare metal), while others specialize in layering on top of container orchestrators, such as Kubernetes. All service meshes support integration with service discovery systems. The subsections that follow provide a very brief survey of service mesh offerings within the current technology landscape.&lt;/p&gt;&lt;div class=&quot;fact-left&quot;&gt;&lt;p&gt;See the Layer5 &lt;a href=&quot;/service-mesh-landscape&quot;&gt;service mesh landscape&lt;/a&gt; for a comprehensive overview and characterizing of all of the service meshes, service proxies, and related tools available today. This landscape is community-maintained and places service meshes in contrast with one another so that the reader might make the most informed decision about which service mesh best suits their needs.&lt;/p&gt;&lt;/div&gt;&lt;h3&gt;Why Do I Need One?&lt;/h3&gt;&lt;p&gt;&amp;quot;I have a container orchestrator; why do I need another infrastructure layer?&amp;quot; you might wonder. Container orchestrators provide most of what the cluster (nodes and containers) requires.  Container orchestrators&amp;#x27; primary focus is on scheduling, discovery, and health, mainly at the infrastructure level (networking being a Layer 4 and below focus). As a result, microservices have unmet service-level needs. A service mesh is a specialized infrastructure layer that makes service-to-service communication safe, fast, and reliable. Its operation is typically based on a container orchestrator or integration with another service discovery system. Although service meshes are frequently deployed as a separate layer on top of container orchestrators, they do not require one because control and data plane components could be deployed independently of containerized infrastructure.&lt;/p&gt;&lt;p&gt;As stated previously, the network is directly and critically involved in every transaction, every execution of business logic, and every request made to the application in microservices deployments. For modern, cloud-native applications, network stability and latency are top priorities. A cloud native application may be made up of hundreds of microservices, each of which could have several instances, and each of those ephemeral instances could be rescheduled by a container orchestrator as needed.&lt;/p&gt;&lt;p&gt;What would you want from a network that connects your microservices, given the network&amp;#x27;s criticality? You want your network to be as intelligent and resilient as possible. To improve the aggregate reliability of your cluster, you want your network to route traffic around from failures. You want to avoid overhead like high-latency routes or servers with cold caches in your network. You want your network to protect the traffic that flows between services against trivial attacks. You want your network to provide insight into service communication failures by exposing unforeseen dependencies and root causes. You want your network to let you impose policies at the granularity of service behaviors, not just at the connection level. You also don’t want to write all this logic into your application.&lt;/p&gt;&lt;p&gt;You want Layer 5 management. You want a services-first network. You want a service mesh!&lt;/p&gt;&lt;/div&gt;</content:encoded></item></channel></rss>